<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 Correctness | Merely Useful: RSE</title>
  <meta name="description" content="Chapter 14 Correctness | Merely Useful: RSE" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 Correctness | Merely Useful: RSE" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="merely-useful/merely-useful.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Correctness | Merely Useful: RSE" />
  
  
  

<meta name="author" content="Madeleine Bonsma-Fisher, Kate Hertweck, Damien Irving, Luke Johnston, Christina Koch, Sara Mahallati, Brandeis Marshall, Joel Ostblom, Elizabeth Wickes, Charlotte Wickham, and Greg Wilson" />


<meta name="date" content="2019-11-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rse-package-py.html"/>
<link rel="next" href="rse-publish.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Merely Useful</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#rse-intro-personas"><i class="fa fa-check"></i><b>1.1</b> Who are these lessons for?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#summary"><i class="fa fa-check"></i><b>1.1.1</b> Summary</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.1.2</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#rse-intro-big-picture"><i class="fa fa-check"></i><b>1.2</b> What’s the big picture?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#why-isnt-all-of-this-already-normal"><i class="fa fa-check"></i><b>1.2.1</b> Why isn’t all of this already normal?</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#syllabus"><i class="fa fa-check"></i><b>1.2.2</b> Syllabus</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#rse-intro-ack"><i class="fa fa-check"></i><b>1.3</b> Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html"><i class="fa fa-check"></i><b>2</b> The Basics of the Unix Shell</a><ul>
<li class="chapter" data-level="2.1" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-explore"><i class="fa fa-check"></i><b>2.1</b> How can I explore my files and directories using the shell?</a></li>
<li class="chapter" data-level="2.2" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-navigate"><i class="fa fa-check"></i><b>2.2</b> How can I move around in the shell?</a></li>
<li class="chapter" data-level="2.3" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-filedir"><i class="fa fa-check"></i><b>2.3</b> How can I create new files and directories?</a></li>
<li class="chapter" data-level="2.4" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-move"><i class="fa fa-check"></i><b>2.4</b> How can move files and directories around?</a></li>
<li class="chapter" data-level="2.5" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-copy"><i class="fa fa-check"></i><b>2.5</b> How can I copy files and directories?</a></li>
<li class="chapter" data-level="2.6" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-rm"><i class="fa fa-check"></i><b>2.6</b> How can I delete files and directories?</a></li>
<li class="chapter" data-level="2.7" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basicswildcard"><i class="fa fa-check"></i><b>2.7</b> How can I run commands on lots of files at once?</a></li>
<li class="chapter" data-level="2.8" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-help"><i class="fa fa-check"></i><b>2.8</b> How can I find out what commands there are and how to use them?</a></li>
<li class="chapter" data-level="2.9" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-pipe"><i class="fa fa-check"></i><b>2.9</b> How can I combine commands?</a></li>
<li class="chapter" data-level="2.10" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-stdio"><i class="fa fa-check"></i><b>2.10</b> How do pipes work (and why do I need to know)?</a></li>
<li class="chapter" data-level="2.11" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-loops"><i class="fa fa-check"></i><b>2.11</b> How can I do the same operations on many files?</a></li>
<li class="chapter" data-level="2.12" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-meaningless"><i class="fa fa-check"></i><b>2.12</b> What do variable names mean?</a></li>
<li class="chapter" data-level="2.13" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-history"><i class="fa fa-check"></i><b>2.13</b> How can I re-do things I have done recently?</a></li>
<li class="chapter" data-level="2.14" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-autoname"><i class="fa fa-check"></i><b>2.14</b> How can I create new filenames automatically?</a></li>
<li class="chapter" data-level="2.15" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-exercises"><i class="fa fa-check"></i><b>2.15</b> Exercises</a><ul>
<li class="chapter" data-level="2.15.1" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-more-ls"><i class="fa fa-check"></i><b>2.15.1</b> Exploring more <code>ls</code> flags</a></li>
<li class="chapter" data-level="2.15.2" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-ls-rt"><i class="fa fa-check"></i><b>2.15.2</b> Listing recursively and by time</a></li>
<li class="chapter" data-level="2.15.3" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-paths"><i class="fa fa-check"></i><b>2.15.3</b> Absolute and relative paths</a></li>
<li class="chapter" data-level="2.15.4" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-resolve-rel-path"><i class="fa fa-check"></i><b>2.15.4</b> Relative path resolution</a></li>
<li class="chapter" data-level="2.15.5" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-reading-ls"><i class="fa fa-check"></i><b>2.15.5</b> <code>ls</code> reading comprehension</a></li>
<li class="chapter" data-level="2.15.6" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-touch"><i class="fa fa-check"></i><b>2.15.6</b> Creating files a different way</a></li>
<li class="chapter" data-level="2.15.7" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-move-dot"><i class="fa fa-check"></i><b>2.15.7</b> Moving to the current folder</a></li>
<li class="chapter" data-level="2.15.8" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-renaming-files"><i class="fa fa-check"></i><b>2.15.8</b> Renaming files</a></li>
<li class="chapter" data-level="2.15.9" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-last-ls"><i class="fa fa-check"></i><b>2.15.9</b> Moving and copying</a></li>
<li class="chapter" data-level="2.15.10" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-safe-rm"><i class="fa fa-check"></i><b>2.15.10</b> Using <code>rm</code> safely</a></li>
<li class="chapter" data-level="2.15.11" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-copy-multi"><i class="fa fa-check"></i><b>2.15.11</b> Copy with multiple filenames</a></li>
<li class="chapter" data-level="2.15.12" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-ls-match"><i class="fa fa-check"></i><b>2.15.12</b> List filenames matching a pattern</a></li>
<li class="chapter" data-level="2.15.13" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-more-wildcards"><i class="fa fa-check"></i><b>2.15.13</b> More on wildcards</a></li>
<li class="chapter" data-level="2.15.14" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-organizing"><i class="fa fa-check"></i><b>2.15.14</b> Organizing directories and files</a></li>
<li class="chapter" data-level="2.15.15" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-reproduce-structure"><i class="fa fa-check"></i><b>2.15.15</b> Reproduce a directory structure</a></li>
<li class="chapter" data-level="2.15.16" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-sort-n"><i class="fa fa-check"></i><b>2.15.16</b> What does <code>sort -n</code> do?</a></li>
<li class="chapter" data-level="2.15.17" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-redirect-append"><i class="fa fa-check"></i><b>2.15.17</b> What does <code>&gt;&gt;</code> mean?</a></li>
<li class="chapter" data-level="2.15.18" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-append-data"><i class="fa fa-check"></i><b>2.15.18</b> Appending data</a></li>
<li class="chapter" data-level="2.15.19" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-piping"><i class="fa fa-check"></i><b>2.15.19</b> Piping commands</a></li>
<li class="chapter" data-level="2.15.20" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-uniq-adjacent"><i class="fa fa-check"></i><b>2.15.20</b> Why does <code>uniq</code> only remove adjacent duplicates?</a></li>
<li class="chapter" data-level="2.15.21" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-reading-pipes"><i class="fa fa-check"></i><b>2.15.21</b> Pipe reading comprehension</a></li>
<li class="chapter" data-level="2.15.22" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-pipe-construction"><i class="fa fa-check"></i><b>2.15.22</b> Pipe construction</a></li>
<li class="chapter" data-level="2.15.23" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-which-pipe"><i class="fa fa-check"></i><b>2.15.23</b> Which pipe?</a></li>
<li class="chapter" data-level="2.15.24" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-wildcard-expressions"><i class="fa fa-check"></i><b>2.15.24</b> Wildcard expressions</a></li>
<li class="chapter" data-level="2.15.25" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-remove-unneeded"><i class="fa fa-check"></i><b>2.15.25</b> Removing unneeded files</a></li>
<li class="chapter" data-level="2.15.26" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-loop-dry-run"><i class="fa fa-check"></i><b>2.15.26</b> Doing a dry run</a></li>
<li class="chapter" data-level="2.15.27" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-nested-loops"><i class="fa fa-check"></i><b>2.15.27</b> Nested loops</a></li>
<li class="chapter" data-level="2.15.28" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-loop-variables"><i class="fa fa-check"></i><b>2.15.28</b> Variables in loops</a></li>
<li class="chapter" data-level="2.15.29" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-limiting-file-sets"><i class="fa fa-check"></i><b>2.15.29</b> Limiting sets of files</a></li>
<li class="chapter" data-level="2.15.30" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-loop-save"><i class="fa fa-check"></i><b>2.15.30</b> Saving to a file in a loop</a></li>
<li class="chapter" data-level="2.15.31" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-list-unique"><i class="fa fa-check"></i><b>2.15.31</b> List unique species</a></li>
<li class="chapter" data-level="2.15.32" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-ex-history-order"><i class="fa fa-check"></i><b>2.15.32</b> Why does <code>history</code> record commands before running them?</a></li>
</ul></li>
<li class="chapter" data-level="2.16" data-path="rse-bash-basics.html"><a href="rse-bash-basics.html#rse-bash-basics-keypoints"><i class="fa fa-check"></i><b>2.16</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html"><i class="fa fa-check"></i><b>3</b> Going Further with the Unix Shell</a><ul>
<li class="chapter" data-level="3.1" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-script"><i class="fa fa-check"></i><b>3.1</b> How can I create new commands of my own?</a></li>
<li class="chapter" data-level="3.2" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-params"><i class="fa fa-check"></i><b>3.2</b> How can I make my scripts more versatile?</a></li>
<li class="chapter" data-level="3.3" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-capture"><i class="fa fa-check"></i><b>3.3</b> How can I turn interactive work into a script?</a></li>
<li class="chapter" data-level="3.4" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-grep"><i class="fa fa-check"></i><b>3.4</b> How can I find things in a file?</a></li>
<li class="chapter" data-level="3.5" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-find"><i class="fa fa-check"></i><b>3.5</b> How can I find files?</a></li>
<li class="chapter" data-level="3.6" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-summary"><i class="fa fa-check"></i><b>3.6</b> Summary</a></li>
<li class="chapter" data-level="3.7" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-exercises"><i class="fa fa-check"></i><b>3.7</b> Exercises</a><ul>
<li class="chapter" data-level="3.7.1" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-script-variables"><i class="fa fa-check"></i><b>3.7.1</b> Variables in shell scripts</a></li>
<li class="chapter" data-level="3.7.2" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-longest-with-extension"><i class="fa fa-check"></i><b>3.7.2</b> Find the longest file with a given extension</a></li>
<li class="chapter" data-level="3.7.3" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-reading-scripts"><i class="fa fa-check"></i><b>3.7.3</b> Script reading comprehension</a></li>
<li class="chapter" data-level="3.7.4" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-using-grep"><i class="fa fa-check"></i><b>3.7.4</b> Using <code>grep</code></a></li>
<li class="chapter" data-level="3.7.5" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-tracking-species"><i class="fa fa-check"></i><b>3.7.5</b> Tracking a species</a></li>
<li class="chapter" data-level="3.7.6" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-little-women"><i class="fa fa-check"></i><b>3.7.6</b> Counting names</a></li>
<li class="chapter" data-level="3.7.7" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-match-subtract"><i class="fa fa-check"></i><b>3.7.7</b> Matching and subtracting</a></li>
<li class="chapter" data-level="3.7.8" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-reading-find"><i class="fa fa-check"></i><b>3.7.8</b> <code>find</code> pipeline reading comprehension</a></li>
<li class="chapter" data-level="3.7.9" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-find-properties"><i class="fa fa-check"></i><b>3.7.9</b> Finding files with different properties</a></li>
<li class="chapter" data-level="3.7.10" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-combining-options"><i class="fa fa-check"></i><b>3.7.10</b> Combining options</a></li>
<li class="chapter" data-level="3.7.11" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-ex-other-wildcards"><i class="fa fa-check"></i><b>3.7.11</b> Other wildcards</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="rse-bash-advanced.html"><a href="rse-bash-advanced.html#rse-bash-advanced-keypoints"><i class="fa fa-check"></i><b>3.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rse-py-scripting.html"><a href="rse-py-scripting.html"><i class="fa fa-check"></i><b>4</b> Command Line Programs in Python</a><ul>
<li class="chapter" data-level="4.1" data-path="rse-py-scripting.html"><a href="rse-py-scripting.html#rse-py-scripting-template"><i class="fa fa-check"></i><b>4.1</b> How are command-line scripts structured?</a></li>
<li class="chapter" data-level="4.2" data-path="rse-py-scripting.html"><a href="rse-py-scripting.html#rse-py-scripting-code"><i class="fa fa-check"></i><b>4.2</b> Where should I put my code?</a></li>
<li class="chapter" data-level="4.3" data-path="rse-py-scripting.html"><a href="rse-py-scripting.html#rse-py-scripting-error-messages"><i class="fa fa-check"></i><b>4.3</b> How can I write useful error messages?</a></li>
<li class="chapter" data-level="4.4" data-path="rse-py-scripting.html"><a href="rse-py-scripting.html#rse-pyscripts-keypoints"><i class="fa fa-check"></i><b>4.4</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html"><i class="fa fa-check"></i><b>5</b> Git at the Command Line</a><ul>
<li class="chapter" data-level="5.1" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-setup"><i class="fa fa-check"></i><b>5.1</b> How can I set up Git for command-line use?</a></li>
<li class="chapter" data-level="5.2" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-repos"><i class="fa fa-check"></i><b>5.2</b> How can I create a new repository?</a></li>
<li class="chapter" data-level="5.3" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-changes"><i class="fa fa-check"></i><b>5.3</b> How can I save and track changes?</a></li>
<li class="chapter" data-level="5.4" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-remotes"><i class="fa fa-check"></i><b>5.4</b> How can I synchronize with other repositories?</a></li>
<li class="chapter" data-level="5.5" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-history"><i class="fa fa-check"></i><b>5.5</b> How can I explore a project’s history?</a></li>
<li class="chapter" data-level="5.6" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-restore"><i class="fa fa-check"></i><b>5.6</b> How can I restore old versions of files?</a></li>
<li class="chapter" data-level="5.7" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ignore"><i class="fa fa-check"></i><b>5.7</b> How can I tell Git to ignore some files?</a></li>
<li class="chapter" data-level="5.8" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-exercises"><i class="fa fa-check"></i><b>5.8</b> Exercises</a><ul>
<li class="chapter" data-level="5.8.1" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-places"><i class="fa fa-check"></i><b>5.8.1</b> Places to create Git repositories</a></li>
<li class="chapter" data-level="5.8.2" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-commit"><i class="fa fa-check"></i><b>5.8.2</b> Committing changes</a></li>
<li class="chapter" data-level="5.8.3" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-multiple"><i class="fa fa-check"></i><b>5.8.3</b> Committing multiple files</a></li>
<li class="chapter" data-level="5.8.4" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-bio"><i class="fa fa-check"></i><b>5.8.4</b> Write a biography</a></li>
<li class="chapter" data-level="5.8.5" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-ignore-nested"><i class="fa fa-check"></i><b>5.8.5</b> Ignoring nested files</a></li>
<li class="chapter" data-level="5.8.6" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-include"><i class="fa fa-check"></i><b>5.8.6</b> Including specific files</a></li>
<li class="chapter" data-level="5.8.7" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-github-interface"><i class="fa fa-check"></i><b>5.8.7</b> Exploring the GitHub interface</a></li>
<li class="chapter" data-level="5.8.8" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-timestamp"><i class="fa fa-check"></i><b>5.8.8</b> GitHub timestamps</a></li>
<li class="chapter" data-level="5.8.9" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-push-commit"><i class="fa fa-check"></i><b>5.8.9</b> Push versus commit</a></li>
<li class="chapter" data-level="5.8.10" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-boilerplate"><i class="fa fa-check"></i><b>5.8.10</b> License and README files</a></li>
<li class="chapter" data-level="5.8.11" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-recover"><i class="fa fa-check"></i><b>5.8.11</b> Recovering older versions of a file</a></li>
<li class="chapter" data-level="5.8.12" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-history"><i class="fa fa-check"></i><b>5.8.12</b> Workflow and history</a></li>
<li class="chapter" data-level="5.8.13" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-diff"><i class="fa fa-check"></i><b>5.8.13</b> Understanding <code>git diff</code></a></li>
<li class="chapter" data-level="5.8.14" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-unstage"><i class="fa fa-check"></i><b>5.8.14</b> Getting rid of staged changes</a></li>
<li class="chapter" data-level="5.8.15" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-ex-blame"><i class="fa fa-check"></i><b>5.8.15</b> Figuring out who did what</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="rse-git-cmdline.html"><a href="rse-git-cmdline.html#rse-git-cmdline-keypoints"><i class="fa fa-check"></i><b>5.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html"><i class="fa fa-check"></i><b>6</b> Advanced Git</a><ul>
<li class="chapter" data-level="6.1" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-create-branch"><i class="fa fa-check"></i><b>6.1</b> What is a branch and how do I create one?</a></li>
<li class="chapter" data-level="6.2" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-merge"><i class="fa fa-check"></i><b>6.2</b> How do I merge work from separate branches?</a></li>
<li class="chapter" data-level="6.3" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-conflict"><i class="fa fa-check"></i><b>6.3</b> How do I handle conflicting changes?</a></li>
<li class="chapter" data-level="6.4" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-workflow"><i class="fa fa-check"></i><b>6.4</b> How should I use branches?</a></li>
<li class="chapter" data-level="6.5" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-fork"><i class="fa fa-check"></i><b>6.5</b> How can I use someone else’s work?</a></li>
<li class="chapter" data-level="6.6" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-pull-requests"><i class="fa fa-check"></i><b>6.6</b> What is a pull request and how do I create one?</a></li>
<li class="chapter" data-level="6.7" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-tag"><i class="fa fa-check"></i><b>6.7</b> How can I label a particular version of my project?</a></li>
<li class="chapter" data-level="6.8" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-exercises"><i class="fa fa-check"></i><b>6.8</b> Exercises</a><ul>
<li class="chapter" data-level="6.8.1" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-ex-additional-pr"><i class="fa fa-check"></i><b>6.8.1</b> Add new country file and make additional PR</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="rse-git-advanced.html"><a href="rse-git-advanced.html#rse-git-advanced-keypoints"><i class="fa fa-check"></i><b>6.9</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rse-style.html"><a href="rse-style.html"><i class="fa fa-check"></i><b>7</b> Code Style, Review, and Refactoring</a><ul>
<li class="chapter" data-level="7.1" data-path="rse-style.html"><a href="rse-style.html#rse-style-github"><i class="fa fa-check"></i><b>7.1</b> How should I review someone else’s code?</a></li>
<li class="chapter" data-level="7.2" data-path="rse-style.html"><a href="rse-style.html#rse-style-pep8"><i class="fa fa-check"></i><b>7.2</b> What are the standard rules of good style for Python programs?</a><ul>
<li class="chapter" data-level="7.2.1" data-path="rse-style.html"><a href="rse-style.html#always-indent-code-blocks-using-4-spaces-and-use-spaces-instead-of-tabs."><i class="fa fa-check"></i><b>7.2.1</b> Always indent code blocks using 4 spaces, and use spaces instead of tabs.</a></li>
<li class="chapter" data-level="7.2.2" data-path="rse-style.html"><a href="rse-style.html#do-not-put-spaces-inside-parentheses"><i class="fa fa-check"></i><b>7.2.2</b> Do not put spaces inside parentheses</a></li>
<li class="chapter" data-level="7.2.3" data-path="rse-style.html"><a href="rse-style.html#always-use-spaces-around-comparisons-like-and-."><i class="fa fa-check"></i><b>7.2.3</b> Always use spaces around comparisons like <code>&gt;</code> and <code>&lt;=</code>.</a></li>
<li class="chapter" data-level="7.2.4" data-path="rse-style.html"><a href="rse-style.html#use-all_caps_with_underscores-for-constants-also-called-global-variables."><i class="fa fa-check"></i><b>7.2.4</b> Use <code>ALL_CAPS_WITH_UNDERSCORES</code> for constants (also called global variables).</a></li>
<li class="chapter" data-level="7.2.5" data-path="rse-style.html"><a href="rse-style.html#use-lower_case_with_underscores-for-the-names-of-functions-and-variables."><i class="fa fa-check"></i><b>7.2.5</b> Use <code>lower_case_with_underscores</code> for the names of functions and variables.</a></li>
<li class="chapter" data-level="7.2.6" data-path="rse-style.html"><a href="rse-style.html#put-two-blank-links-between-each-function-definition."><i class="fa fa-check"></i><b>7.2.6</b> Put two blank links between each function definition.</a></li>
<li class="chapter" data-level="7.2.7" data-path="rse-style.html"><a href="rse-style.html#avoid-abbreviations-in-function-and-variable-names."><i class="fa fa-check"></i><b>7.2.7</b> Avoid abbreviations in function and variable names.</a></li>
<li class="chapter" data-level="7.2.8" data-path="rse-style.html"><a href="rse-style.html#use-short-names-for-short-lived-local-variables-but-longer-names-for-things-with-wider-scope."><i class="fa fa-check"></i><b>7.2.8</b> Use short names for short-lived local variables but longer names for things with wider scope.</a></li>
<li class="chapter" data-level="7.2.9" data-path="rse-style.html"><a href="rse-style.html#put-everything-in-a-file-in-order."><i class="fa fa-check"></i><b>7.2.9</b> Put everything in a file in order.</a></li>
<li class="chapter" data-level="7.2.10" data-path="rse-style.html"><a href="rse-style.html#do-not-comment-and-uncomment-sections-of-code-to-change-behavior."><i class="fa fa-check"></i><b>7.2.10</b> Do not comment and uncomment sections of code to change behavior.</a></li>
<li class="chapter" data-level="7.2.11" data-path="rse-style.html"><a href="rse-style.html#keep-functions-short."><i class="fa fa-check"></i><b>7.2.11</b> Keep functions short.</a></li>
<li class="chapter" data-level="7.2.12" data-path="rse-style.html"><a href="rse-style.html#handle-special-cases-at-the-start-of-the-function."><i class="fa fa-check"></i><b>7.2.12</b> Handle special cases at the start of the function.</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="rse-style.html"><a href="rse-style.html#rse-style-check"><i class="fa fa-check"></i><b>7.3</b> How can I check that code follows style guidelines?</a></li>
<li class="chapter" data-level="7.4" data-path="rse-style.html"><a href="rse-style.html#rse-style-how"><i class="fa fa-check"></i><b>7.4</b> How should I collaborate with people when doing code reviews?</a></li>
<li class="chapter" data-level="7.5" data-path="rse-style.html"><a href="rse-style.html#rse-style-order"><i class="fa fa-check"></i><b>7.5</b> In what order should functions be defined?</a></li>
<li class="chapter" data-level="7.6" data-path="rse-style.html"><a href="rse-style.html#rse-style-defaults"><i class="fa fa-check"></i><b>7.6</b> How can I specify default values for functions’ parameters?</a></li>
<li class="chapter" data-level="7.7" data-path="rse-style.html"><a href="rse-style.html#rse-style-varargs"><i class="fa fa-check"></i><b>7.7</b> How can I write functions to handle a variable number of arguments?</a></li>
<li class="chapter" data-level="7.8" data-path="rse-style.html"><a href="rse-style.html#rse-style-starargs"><i class="fa fa-check"></i><b>7.8</b> How can I pass an unknown number of parameters?</a></li>
<li class="chapter" data-level="7.9" data-path="rse-style.html"><a href="rse-style.html#rse-style-destructure"><i class="fa fa-check"></i><b>7.9</b> How can I get values out of structured data more easily?</a></li>
<li class="chapter" data-level="7.10" data-path="rse-style.html"><a href="rse-style.html#rse-style-refactor"><i class="fa fa-check"></i><b>7.10</b> What should I look for when reviewing code?</a><ul>
<li class="chapter" data-level="7.10.1" data-path="rse-style.html"><a href="rse-style.html#do-not-repeat-values"><i class="fa fa-check"></i><b>7.10.1</b> Do not repeat values</a></li>
<li class="chapter" data-level="7.10.2" data-path="rse-style.html"><a href="rse-style.html#do-not-repeat-calculations-in-loops"><i class="fa fa-check"></i><b>7.10.2</b> Do not repeat calculations in loops</a></li>
<li class="chapter" data-level="7.10.3" data-path="rse-style.html"><a href="rse-style.html#replace-tests-with-flags-to-clarify-repeated-tests"><i class="fa fa-check"></i><b>7.10.3</b> Replace tests with flags to clarify repeated tests</a></li>
<li class="chapter" data-level="7.10.4" data-path="rse-style.html"><a href="rse-style.html#use-in-place-operators-to-avoid-duplicating-expression"><i class="fa fa-check"></i><b>7.10.4</b> Use in-place operators to avoid duplicating expression</a></li>
<li class="chapter" data-level="7.10.5" data-path="rse-style.html"><a href="rse-style.html#handle-special-cases-first"><i class="fa fa-check"></i><b>7.10.5</b> Handle special cases first</a></li>
<li class="chapter" data-level="7.10.6" data-path="rse-style.html"><a href="rse-style.html#use-functions-to-make-code-more-comprehensible"><i class="fa fa-check"></i><b>7.10.6</b> Use functions to make code more comprehensible</a></li>
<li class="chapter" data-level="7.10.7" data-path="rse-style.html"><a href="rse-style.html#combine-operations-in-functions"><i class="fa fa-check"></i><b>7.10.7</b> Combine operations in functions</a></li>
<li class="chapter" data-level="7.10.8" data-path="rse-style.html"><a href="rse-style.html#replace-code-with-data"><i class="fa fa-check"></i><b>7.10.8</b> Replace code with data</a></li>
</ul></li>
<li class="chapter" data-level="7.11" data-path="rse-style.html"><a href="rse-style.html#rse-style-summary"><i class="fa fa-check"></i><b>7.11</b> Summary</a></li>
<li class="chapter" data-level="7.12" data-path="rse-style.html"><a href="rse-style.html#rse-style-exercises"><i class="fa fa-check"></i><b>7.12</b> Exercises</a></li>
<li class="chapter" data-level="7.13" data-path="rse-style.html"><a href="rse-style.html#rse-style-keypoints"><i class="fa fa-check"></i><b>7.13</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rse-automate.html"><a href="rse-automate.html"><i class="fa fa-check"></i><b>8</b> Automating Analyses</a><ul>
<li class="chapter" data-level="8.0.1" data-path="rse-automate.html"><a href="rse-automate.html#setting-up"><i class="fa fa-check"></i><b>8.0.1</b> Setting Up</a></li>
<li class="chapter" data-level="8.0.2" data-path="rse-automate.html"><a href="rse-automate.html#acknowledgements"><i class="fa fa-check"></i><b>8.0.2</b> Acknowledgements</a></li>
<li class="chapter" data-level="8.1" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-single-file"><i class="fa fa-check"></i><b>8.1</b> How can I update a single file using Make?</a></li>
<li class="chapter" data-level="8.2" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-multiple"><i class="fa fa-check"></i><b>8.2</b> How can I manage multiple files?</a></li>
<li class="chapter" data-level="8.3" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-phony"><i class="fa fa-check"></i><b>8.3</b> How can I update several files at once?</a></li>
<li class="chapter" data-level="8.4" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-depend-programs"><i class="fa fa-check"></i><b>8.4</b> How can I update files when programs change?</a></li>
<li class="chapter" data-level="8.5" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-variables"><i class="fa fa-check"></i><b>8.5</b> How can I reduce repetition in a Makefile?</a></li>
<li class="chapter" data-level="8.6" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-autovar"><i class="fa fa-check"></i><b>8.6</b> How can I take specific filenames out of my rules?</a></li>
<li class="chapter" data-level="8.7" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-pattern"><i class="fa fa-check"></i><b>8.7</b> How can I write a generic rule to update many files?</a></li>
<li class="chapter" data-level="8.8" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-functions"><i class="fa fa-check"></i><b>8.8</b> How can I automatically define a set of files?</a></li>
<li class="chapter" data-level="8.9" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-doc"><i class="fa fa-check"></i><b>8.9</b> How can I document my Makefile?</a></li>
<li class="chapter" data-level="8.10" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-pipeline"><i class="fa fa-check"></i><b>8.10</b> How can I create entire analysis pipelines?</a></li>
<li class="chapter" data-level="8.11" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-summary"><i class="fa fa-check"></i><b>8.11</b> Summary</a></li>
<li class="chapter" data-level="8.12" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-exercises"><i class="fa fa-check"></i><b>8.12</b> Exercises</a><ul>
<li class="chapter" data-level="8.12.1" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-ex-create-summary-results"><i class="fa fa-check"></i><b>8.12.1</b> Create a summary results file</a></li>
<li class="chapter" data-level="8.12.2" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-ex-plot-top-n"><i class="fa fa-check"></i><b>8.12.2</b> Generate a plot for the top N words</a></li>
<li class="chapter" data-level="8.12.3" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-ex-mkdir"><i class="fa fa-check"></i><b>8.12.3</b> Make sure the output directory exists</a></li>
<li class="chapter" data-level="8.12.4" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-ex-report-change"><i class="fa fa-check"></i><b>8.12.4</b> Report results that would change</a></li>
<li class="chapter" data-level="8.12.5" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-ex-readable-help"><i class="fa fa-check"></i><b>8.12.5</b> Create more readable help</a></li>
<li class="chapter" data-level="8.12.6" data-path="rse-automate.html"><a href="rse-automate.html#rse-automate-ex-wildcard-perils"><i class="fa fa-check"></i><b>8.12.6</b> The perils of shell wildcards</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="rse-teams.html"><a href="rse-teams.html"><i class="fa fa-check"></i><b>9</b> Working in Teams</a><ul>
<li class="chapter" data-level="9.1" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-software-license"><i class="fa fa-check"></i><b>9.1</b> How should we license our software?</a></li>
<li class="chapter" data-level="9.2" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-other-license"><i class="fa fa-check"></i><b>9.2</b> How should we license our data and reports?</a></li>
<li class="chapter" data-level="9.3" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-issues"><i class="fa fa-check"></i><b>9.3</b> How can we keep track of the work we still have to do?</a></li>
<li class="chapter" data-level="9.4" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-bugs"><i class="fa fa-check"></i><b>9.4</b> How can we write good bug reports?</a></li>
<li class="chapter" data-level="9.5" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-labels"><i class="fa fa-check"></i><b>9.5</b> How can we use labels to organize work?</a></li>
<li class="chapter" data-level="9.6" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-workflow"><i class="fa fa-check"></i><b>9.6</b> How can we enforce a workflow for a project?</a></li>
<li class="chapter" data-level="9.7" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-martha"><i class="fa fa-check"></i><b>9.7</b> How can we make decisions?</a></li>
<li class="chapter" data-level="9.8" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-meetings"><i class="fa fa-check"></i><b>9.8</b> How can we run meetings more efficiently?</a></li>
<li class="chapter" data-level="9.9" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-fair"><i class="fa fa-check"></i><b>9.9</b> How can we keep people from talking too much or too little?</a></li>
<li class="chapter" data-level="9.10" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-online"><i class="fa fa-check"></i><b>9.10</b> How should we run online meetings?</a></li>
<li class="chapter" data-level="9.11" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-conflict"><i class="fa fa-check"></i><b>9.11</b> How should we handle conflict within the team?</a></li>
<li class="chapter" data-level="9.12" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-conduct"><i class="fa fa-check"></i><b>9.12</b> Why should we establish a code of conduct for a project?</a></li>
<li class="chapter" data-level="9.13" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-allyship"><i class="fa fa-check"></i><b>9.13</b> How can we be good allies for members of marginalized groups?</a></li>
<li class="chapter" data-level="9.14" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-summary"><i class="fa fa-check"></i><b>9.14</b> Summary</a></li>
<li class="chapter" data-level="9.15" data-path="rse-teams.html"><a href="rse-teams.html#rse-teams-exercises"><i class="fa fa-check"></i><b>9.15</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="rse-project.html"><a href="rse-project.html"><i class="fa fa-check"></i><b>10</b> Project Structure</a><ul>
<li class="chapter" data-level="10.1" data-path="rse-project.html"><a href="rse-project.html#rse-project-thinking"><i class="fa fa-check"></i><b>10.1</b> What is a project?</a></li>
<li class="chapter" data-level="10.2" data-path="rse-project.html"><a href="rse-project.html#rse-project-boilerplate"><i class="fa fa-check"></i><b>10.2</b> What files should every project contain?</a></li>
<li class="chapter" data-level="10.3" data-path="rse-project.html"><a href="rse-project.html#rse-project-organize"><i class="fa fa-check"></i><b>10.3</b> How should I structure the rest of my project?</a></li>
<li class="chapter" data-level="10.4" data-path="rse-project.html"><a href="rse-project.html#rse-project-scripts"><i class="fa fa-check"></i><b>10.4</b> How should I manage a mix of compiled programs and scripts?</a></li>
<li class="chapter" data-level="10.5" data-path="rse-project.html"><a href="rse-project.html#rse-project-software-docs"><i class="fa fa-check"></i><b>10.5</b> How should I document the software in a project?</a></li>
<li class="chapter" data-level="10.6" data-path="rse-project.html"><a href="rse-project.html#rse-project-infer"><i class="fa fa-check"></i><b>10.6</b> What should I document?</a></li>
<li class="chapter" data-level="10.7" data-path="rse-project.html"><a href="rse-project.html#rse-project-faq"><i class="fa fa-check"></i><b>10.7</b> How can I create a useful FAQ?</a></li>
<li class="chapter" data-level="10.8" data-path="rse-project.html"><a href="rse-project.html#rse-project-data-vs-code"><i class="fa fa-check"></i><b>10.8</b> How does documentation for data differ from documentation for code?</a></li>
<li class="chapter" data-level="10.9" data-path="rse-project.html"><a href="rse-project.html#rse-project-data-docs"><i class="fa fa-check"></i><b>10.9</b> How should I document the data in a project?</a></li>
<li class="chapter" data-level="10.10" data-path="rse-project.html"><a href="rse-project.html#rse-project-data-start"><i class="fa fa-check"></i><b>10.10</b> How can I get started documenting my data?</a></li>
<li class="chapter" data-level="10.11" data-path="rse-project.html"><a href="rse-project.html#rse-project-data-first"><i class="fa fa-check"></i><b>10.11</b> What data documentation should I create first?</a></li>
<li class="chapter" data-level="10.12" data-path="rse-project.html"><a href="rse-project.html#rse-project-external"><i class="fa fa-check"></i><b>10.12</b> How should I manage data that can’t be stored in version control?</a></li>
<li class="chapter" data-level="10.13" data-path="rse-project.html"><a href="rse-project.html#rse-project-summary"><i class="fa fa-check"></i><b>10.13</b> Summary</a></li>
<li class="chapter" data-level="10.14" data-path="rse-project.html"><a href="rse-project.html#exercises"><i class="fa fa-check"></i><b>10.14</b> Exercises</a><ul>
<li class="chapter" data-level="10.14.1" data-path="rse-project.html"><a href="rse-project.html#rse-project-ex-understand-project"><i class="fa fa-check"></i><b>10.14.1</b> Understand a project</a></li>
<li class="chapter" data-level="10.14.2" data-path="rse-project.html"><a href="rse-project.html#rse-project-ex-audience"><i class="fa fa-check"></i><b>10.14.2</b> Determining the audience for documentation</a></li>
<li class="chapter" data-level="10.14.3" data-path="rse-project.html"><a href="rse-project.html#rse-project-ex-create-doc-template"><i class="fa fa-check"></i><b>10.14.3</b> Creating documentation template</a></li>
<li class="chapter" data-level="10.14.4" data-path="rse-project.html"><a href="rse-project.html#rse-project-ex-permanent-links"><i class="fa fa-check"></i><b>10.14.4</b> Making permanent links</a></li>
</ul></li>
<li class="chapter" data-level="10.15" data-path="rse-project.html"><a href="rse-project.html#rse-project-keypoints"><i class="fa fa-check"></i><b>10.15</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="rse-ci.html"><a href="rse-ci.html"><i class="fa fa-check"></i><b>11</b> Continuous Integration</a><ul>
<li class="chapter" data-level="11.1" data-path="rse-ci.html"><a href="rse-ci.html#rse-ci-basic"><i class="fa fa-check"></i><b>11.1</b> How do I set up continuous integration?</a><ul>
<li class="chapter" data-level="11.1.1" data-path="rse-ci.html"><a href="rse-ci.html#watching-a-repository"><i class="fa fa-check"></i><b>11.1.1</b> Watching a repository</a></li>
<li class="chapter" data-level="11.1.2" data-path="rse-ci.html"><a href="rse-ci.html#configuring-a-project"><i class="fa fa-check"></i><b>11.1.2</b> Configuring a project</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="rse-ci.html"><a href="rse-ci.html#rse-ci-display-github"><i class="fa fa-check"></i><b>11.2</b> How can I display my project’s status on GitHub?</a></li>
<li class="chapter" data-level="11.3" data-path="rse-ci.html"><a href="rse-ci.html#rse-ci-setting-up-with-r"><i class="fa fa-check"></i><b>11.3</b> How can I set up Travis CI for an R project?</a></li>
<li class="chapter" data-level="11.4" data-path="rse-ci.html"><a href="rse-ci.html#rse-ci-testing"><i class="fa fa-check"></i><b>11.4</b> How can I use Travis CI to test my project?</a></li>
<li class="chapter" data-level="11.5" data-path="rse-ci.html"><a href="rse-ci.html#rse-ci-deploying"><i class="fa fa-check"></i><b>11.5</b> How can I use CI for other purposes?</a></li>
<li class="chapter" data-level="11.6" data-path="rse-ci.html"><a href="rse-ci.html#rse-ci-summary"><i class="fa fa-check"></i><b>11.6</b> Summary</a></li>
<li class="chapter" data-level="11.7" data-path="rse-ci.html"><a href="rse-ci.html#rse-ci-exercises"><i class="fa fa-check"></i><b>11.7</b> Exercises</a></li>
<li class="chapter" data-level="11.8" data-path="rse-ci.html"><a href="rse-ci.html#rse-ci-keypoints"><i class="fa fa-check"></i><b>11.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="rse-package-r.html"><a href="rse-package-r.html"><i class="fa fa-check"></i><b>12</b> R Packaging</a><ul>
<li class="chapter" data-level="12.1" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-intro"><i class="fa fa-check"></i><b>12.1</b> What’s in an R package?</a><ul>
<li class="chapter" data-level="12.1.1" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-what-packages-do-you-have"><i class="fa fa-check"></i><b>12.1.1</b> Exercise: What packages do you have?</a></li>
<li class="chapter" data-level="12.1.2" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-can-you-build-a-package"><i class="fa fa-check"></i><b>12.1.2</b> Exercise: Can you build a package?</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-background"><i class="fa fa-check"></i><b>12.2</b> What <em>is</em> a package, exactly?</a></li>
<li class="chapter" data-level="12.3" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-create"><i class="fa fa-check"></i><b>12.3</b> How do I create a package?</a><ul>
<li class="chapter" data-level="12.3.1" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-packaging-the-co2-functions"><i class="fa fa-check"></i><b>12.3.1</b> Exercise: Packaging the CO2 functions</a></li>
<li class="chapter" data-level="12.3.2" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-exploring-a-package"><i class="fa fa-check"></i><b>12.3.2</b> Exercise: Exploring a package</a></li>
<li class="chapter" data-level="12.3.3" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-ignoring-files"><i class="fa fa-check"></i><b>12.3.3</b> Exercise: Ignoring Files</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-use"><i class="fa fa-check"></i><b>12.4</b> How do I use a package while I’m creating it?</a></li>
<li class="chapter" data-level="12.5" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-document"><i class="fa fa-check"></i><b>12.5</b> How do I document a R package?</a><ul>
<li class="chapter" data-level="12.5.1" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-document-a-function"><i class="fa fa-check"></i><b>12.5.1</b> Exercise: Document a function</a></li>
<li class="chapter" data-level="12.5.2" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-use-markdown-documentation"><i class="fa fa-check"></i><b>12.5.2</b> Exercise: Use Markdown documentation</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-docwhat"><i class="fa fa-check"></i><b>12.6</b> What should I document?</a><ul>
<li class="chapter" data-level="12.6.1" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-fixing-documentation"><i class="fa fa-check"></i><b>12.6.1</b> Exercise: Fixing documentation</a></li>
<li class="chapter" data-level="12.6.2" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-cross-references"><i class="fa fa-check"></i><b>12.6.2</b> Exercise: Cross-references</a></li>
<li class="chapter" data-level="12.6.3" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-documenting-error-conditions"><i class="fa fa-check"></i><b>12.6.3</b> Exercise: Documenting error conditions</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-dependencies"><i class="fa fa-check"></i><b>12.7</b> How do I manage package dependencies?</a><ul>
<li class="chapter" data-level="12.7.1" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-document-dependencies"><i class="fa fa-check"></i><b>12.7.1</b> Exercise: Document dependencies</a></li>
<li class="chapter" data-level="12.7.2" data-path="rse-package-r.html"><a href="rse-package-r.html#importing"><i class="fa fa-check"></i><b>12.7.2</b> Importing</a></li>
</ul></li>
<li class="chapter" data-level="12.8" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-github"><i class="fa fa-check"></i><b>12.8</b> How can I share my package via GitHub?</a></li>
<li class="chapter" data-level="12.9" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-data"><i class="fa fa-check"></i><b>12.9</b> How can I add data to a package?</a><ul>
<li class="chapter" data-level="12.9.1" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-letting-usethis-do-even-more-work"><i class="fa fa-check"></i><b>12.9.1</b> Exercise: Letting <code>usethis</code> do even more work</a></li>
<li class="chapter" data-level="12.9.2" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-scripting-data-creation"><i class="fa fa-check"></i><b>12.9.2</b> Exercise: Scripting data creation</a></li>
<li class="chapter" data-level="12.9.3" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-add-sample-data-to-the-co2-package"><i class="fa fa-check"></i><b>12.9.3</b> Exercise: Add sample data to the CO2 package</a></li>
<li class="chapter" data-level="12.9.4" data-path="rse-package-r.html"><a href="rse-package-r.html#exercise-reproducible-data-set-creation"><i class="fa fa-check"></i><b>12.9.4</b> Exercise: Reproducible data set creation</a></li>
</ul></li>
<li class="chapter" data-level="12.10" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-summary"><i class="fa fa-check"></i><b>12.10</b> Summary</a></li>
<li class="chapter" data-level="12.11" data-path="rse-package-r.html"><a href="rse-package-r.html#rse-package-r-keypoints"><i class="fa fa-check"></i><b>12.11</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="rse-package-py.html"><a href="rse-package-py.html"><i class="fa fa-check"></i><b>13</b> Python Packaging</a><ul>
<li class="chapter" data-level="13.1" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-modules"><i class="fa fa-check"></i><b>13.1</b> How can I turn a set of Python source files into a module?</a><ul>
<li class="chapter" data-level="13.1.1" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-hello-zipf"><i class="fa fa-check"></i><b>13.1.1</b> Exercise: Hello, Zipf!</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-import"><i class="fa fa-check"></i><b>13.2</b> How can I control what is executed during import and what isn’t?</a><ul>
<li class="chapter" data-level="13.2.1" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-what-is-__name__-in-different-contexts"><i class="fa fa-check"></i><b>13.2.1</b> Exercise: What is <code>__name__</code> in different contexts?</a></li>
<li class="chapter" data-level="13.2.2" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-turn-use.py-into-a-unit-test"><i class="fa fa-check"></i><b>13.2.2</b> Exercise: Turn <code>use.py</code> into a unit test</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-creating"><i class="fa fa-check"></i><b>13.3</b> How do I create a package?</a><ul>
<li class="chapter" data-level="13.3.1" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-create-a-package-for-our-zipf-code."><i class="fa fa-check"></i><b>13.3.1</b> Exercise: Create a package for our Zipf code.</a></li>
<li class="chapter" data-level="13.3.2" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-hello-__init__.py"><i class="fa fa-check"></i><b>13.3.2</b> Exercise: “Hello <code>__init__.py</code>”</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="rse-package-py.html"><a href="rse-package-py.html#referring-to-modules-within-the-same-package-multiple-files"><i class="fa fa-check"></i><b>13.4</b> Referring to modules within the same package: multiple files</a><ul>
<li class="chapter" data-level="13.4.1" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-factor-out-the-package-wide-constant-relative_error"><i class="fa fa-check"></i><b>13.4.1</b> Exercise: Factor out the package-wide constant <code>RELATIVE_ERROR</code></a></li>
<li class="chapter" data-level="13.4.2" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-importing-from-within-init.py"><i class="fa fa-check"></i><b>13.4.2</b> Exercise: Importing from within <strong>init</strong>.py</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-install"><i class="fa fa-check"></i><b>13.5</b> What does it mean to install a Python package?</a><ul>
<li class="chapter" data-level="13.5.1" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-find-a-package-in-pip-list"><i class="fa fa-check"></i><b>13.5.1</b> Exercise: Find a package in pip list</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-virtualenv"><i class="fa fa-check"></i><b>13.6</b> How can I have only the packages my projects need?</a><ul>
<li class="chapter" data-level="13.6.1" data-path="rse-package-py.html"><a href="rse-package-py.html#exercises-examining-the-virtual-environment"><i class="fa fa-check"></i><b>13.6.1</b> Exercises: Examining the virtual environment</a></li>
<li class="chapter" data-level="13.6.2" data-path="rse-package-py.html"><a href="rse-package-py.html#exercises-installing-a-package-into-the-virtual-environment"><i class="fa fa-check"></i><b>13.6.2</b> Exercises: Installing a package into the virtual environment</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-package"><i class="fa fa-check"></i><b>13.7</b> How can I create an installable Python package?</a></li>
<li class="chapter" data-level="13.8" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-distrib-scripts"><i class="fa fa-check"></i><b>13.8</b> How can I distribute command-line scripts in my Python package?</a></li>
<li class="chapter" data-level="13.9" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-document"><i class="fa fa-check"></i><b>13.9</b> How should I document my package for others?</a></li>
<li class="chapter" data-level="13.10" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-sphinx"><i class="fa fa-check"></i><b>13.10</b> How do I generate web pages of documentation for my package?</a></li>
<li class="chapter" data-level="13.11" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-rtd"><i class="fa fa-check"></i><b>13.11</b> How do I put the documentation for my package online?</a></li>
<li class="chapter" data-level="13.12" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-distribute"><i class="fa fa-check"></i><b>13.12</b> How can I distribute software packages that I have created?</a><ul>
<li class="chapter" data-level="13.12.1" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-clean-up-warning-messages"><i class="fa fa-check"></i><b>13.12.1</b> Exercise: Clean up warning messages</a></li>
<li class="chapter" data-level="13.12.2" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-license-longinfo-and-classification-metadata"><i class="fa fa-check"></i><b>13.12.2</b> Exercise License, longinfo, and classification metadata</a></li>
<li class="chapter" data-level="13.12.3" data-path="rse-package-py.html"><a href="rse-package-py.html#exercise-requirements-in-setup.py"><i class="fa fa-check"></i><b>13.12.3</b> Exercise: Requirements in setup.py</a></li>
</ul></li>
<li class="chapter" data-level="13.13" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-announce"><i class="fa fa-check"></i><b>13.13</b> Announcing Work</a></li>
<li class="chapter" data-level="13.14" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-summary"><i class="fa fa-check"></i><b>13.14</b> Summary</a></li>
<li class="chapter" data-level="13.15" data-path="rse-package-py.html"><a href="rse-package-py.html#rse-package-py-keypoints"><i class="fa fa-check"></i><b>13.15</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="rse-correct.html"><a href="rse-correct.html"><i class="fa fa-check"></i><b>14</b> Correctness</a><ul>
<li class="chapter" data-level="14.1" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-manual"><i class="fa fa-check"></i><b>14.1</b> How can I test functions manually?</a></li>
<li class="chapter" data-level="14.2" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-features"><i class="fa fa-check"></i><b>14.2</b> What features do we want a testing framework to have?</a></li>
<li class="chapter" data-level="14.3" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-create-python"><i class="fa fa-check"></i><b>14.3</b> How do I create and run unit tests in Python?</a></li>
<li class="chapter" data-level="14.4" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-create-r"><i class="fa fa-check"></i><b>14.4</b> How do I create and run unit tests in R?</a></li>
<li class="chapter" data-level="14.5" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-fixtures"><i class="fa fa-check"></i><b>14.5</b> How should I set up fixtures my unit tests?</a></li>
<li class="chapter" data-level="14.6" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-check"><i class="fa fa-check"></i><b>14.6</b> How should I check the results of tests?</a></li>
<li class="chapter" data-level="14.7" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-failure"><i class="fa fa-check"></i><b>14.7</b> Why and how should I test that software fails correctly?</a></li>
<li class="chapter" data-level="14.8" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-coverage"><i class="fa fa-check"></i><b>14.8</b> How can I tell whether my code has been tested or not?</a></li>
<li class="chapter" data-level="14.9" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-enough"><i class="fa fa-check"></i><b>14.9</b> How much testing is enough?</a></li>
<li class="chapter" data-level="14.10" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-tdd"><i class="fa fa-check"></i><b>14.10</b> When should I write my tests?</a></li>
<li class="chapter" data-level="14.11" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-float"><i class="fa fa-check"></i><b>14.11</b> Why should I be cautious when using floating-point numbers?</a></li>
<li class="chapter" data-level="14.12" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-numeric"><i class="fa fa-check"></i><b>14.12</b> How should I write tests that involved floating-point values?</a></li>
<li class="chapter" data-level="14.13" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-infer"><i class="fa fa-check"></i><b>14.13</b> How can I infer and check properties of my data?</a></li>
<li class="chapter" data-level="14.14" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-summary"><i class="fa fa-check"></i><b>14.14</b> Summary</a></li>
<li class="chapter" data-level="14.15" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-exercises"><i class="fa fa-check"></i><b>14.15</b> Exercises</a><ul>
<li class="chapter" data-level="14.15.1" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-ex-numsign"><i class="fa fa-check"></i><b>14.15.1</b> Fixing <code>numSign</code></a></li>
<li class="chapter" data-level="14.15.2" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-ex-simple-calc"><i class="fa fa-check"></i><b>14.15.2</b> Checking simple calculations</a></li>
<li class="chapter" data-level="14.15.3" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-ex-purpose"><i class="fa fa-check"></i><b>14.15.3</b> Explain the purpose of tests</a></li>
<li class="chapter" data-level="14.15.4" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-ex-count-words"><i class="fa fa-check"></i><b>14.15.4</b> Testing <code>count_words</code></a></li>
<li class="chapter" data-level="14.15.5" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-ex-check-errors"><i class="fa fa-check"></i><b>14.15.5</b> Checking for errors</a></li>
</ul></li>
<li class="chapter" data-level="14.16" data-path="rse-correct.html"><a href="rse-correct.html#rse-correct-keypoints"><i class="fa fa-check"></i><b>14.16</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="rse-publish.html"><a href="rse-publish.html"><i class="fa fa-check"></i><b>15</b> Publishing</a><ul>
<li class="chapter" data-level="15.1" data-path="rse-publish.html"><a href="rse-publish.html#rse-publish-identifiers"><i class="fa fa-check"></i><b>15.1</b> Identification</a></li>
<li class="chapter" data-level="15.2" data-path="rse-publish.html"><a href="rse-publish.html#rse-publish-document"><i class="fa fa-check"></i><b>15.2</b> Publishing a report</a></li>
<li class="chapter" data-level="15.3" data-path="rse-publish.html"><a href="rse-publish.html#rse-publish-data"><i class="fa fa-check"></i><b>15.3</b> Publishing data</a><ul>
<li class="chapter" data-level="15.3.1" data-path="rse-publish.html"><a href="rse-publish.html#what-is-the-most-useful-way-to-share-my-data"><i class="fa fa-check"></i><b>15.3.1</b> What is the most useful way to share my data?</a></li>
<li class="chapter" data-level="15.3.2" data-path="rse-publish.html"><a href="rse-publish.html#what-standards-of-data-sharing-should-i-aspire-to"><i class="fa fa-check"></i><b>15.3.2</b> What standards of data sharing should I aspire to?</a></li>
<li class="chapter" data-level="15.3.3" data-path="rse-publish.html"><a href="rse-publish.html#how-and-where-do-i-publish-the-data"><i class="fa fa-check"></i><b>15.3.3</b> How and where do I publish the data?</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="rse-publish.html"><a href="rse-publish.html#rse-publish-software"><i class="fa fa-check"></i><b>15.4</b> Publishing analysis software</a></li>
<li class="chapter" data-level="15.5" data-path="rse-publish.html"><a href="rse-publish.html#rse-publish-scripts"><i class="fa fa-check"></i><b>15.5</b> Publishing analysis scripts</a><ul>
<li class="chapter" data-level="15.5.1" data-path="rse-publish.html"><a href="rse-publish.html#software-description"><i class="fa fa-check"></i><b>15.5.1</b> Software description</a></li>
<li class="chapter" data-level="15.5.2" data-path="rse-publish.html"><a href="rse-publish.html#analysis-scripts"><i class="fa fa-check"></i><b>15.5.2</b> Analysis scripts</a></li>
<li class="chapter" data-level="15.5.3" data-path="rse-publish.html"><a href="rse-publish.html#data-processing-steps"><i class="fa fa-check"></i><b>15.5.3</b> Data processing steps</a></li>
<li class="chapter" data-level="15.5.4" data-path="rse-publish.html"><a href="rse-publish.html#where-to-publish-all-this-stuff"><i class="fa fa-check"></i><b>15.5.4</b> Where to publish all this stuff?</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="rse-publish.html"><a href="rse-publish.html#rse-publish-summary"><i class="fa fa-check"></i><b>15.6</b> Summary</a></li>
<li class="chapter" data-level="15.7" data-path="rse-publish.html"><a href="rse-publish.html#rse-publish-exercises"><i class="fa fa-check"></i><b>15.7</b> Exercises</a><ul>
<li class="chapter" data-level="15.7.1" data-path="rse-publish.html"><a href="rse-publish.html#orcid"><i class="fa fa-check"></i><b>15.7.1</b> ORCID</a></li>
<li class="chapter" data-level="15.7.2" data-path="rse-publish.html"><a href="rse-publish.html#a-fair-test"><i class="fa fa-check"></i><b>15.7.2</b> A FAIR test</a></li>
<li class="chapter" data-level="15.7.3" data-path="rse-publish.html"><a href="rse-publish.html#publishing-your-code"><i class="fa fa-check"></i><b>15.7.3</b> Publishing your code</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="rse-publish.html"><a href="rse-publish.html#rse-publish-keypoints"><i class="fa fa-check"></i><b>15.8</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="rse-finale.html"><a href="rse-finale.html"><i class="fa fa-check"></i><b>16</b> Finale</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i><b>A</b> License</a></li>
<li class="chapter" data-level="B" data-path="conduct.html"><a href="conduct.html"><i class="fa fa-check"></i><b>B</b> Code of Conduct</a><ul>
<li class="chapter" data-level="B.1" data-path="conduct.html"><a href="conduct.html#conduct-standards"><i class="fa fa-check"></i><b>B.1</b> Our Standards</a></li>
<li class="chapter" data-level="B.2" data-path="conduct.html"><a href="conduct.html#conduct-responsibilities"><i class="fa fa-check"></i><b>B.2</b> Our Responsibilities</a></li>
<li class="chapter" data-level="B.3" data-path="conduct.html"><a href="conduct.html#conduct-scope"><i class="fa fa-check"></i><b>B.3</b> Scope</a></li>
<li class="chapter" data-level="B.4" data-path="conduct.html"><a href="conduct.html#conduct-enforcement"><i class="fa fa-check"></i><b>B.4</b> Enforcement</a></li>
<li class="chapter" data-level="B.5" data-path="conduct.html"><a href="conduct.html#conduct-attribution"><i class="fa fa-check"></i><b>B.5</b> Attribution</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i><b>C</b> Contributing</a><ul>
<li class="chapter" data-level="C.1" data-path="contributing.html"><a href="contributing.html#contributing-style"><i class="fa fa-check"></i><b>C.1</b> Style Guide</a></li>
<li class="chapter" data-level="C.2" data-path="contributing.html"><a href="contributing.html#setting-up-1"><i class="fa fa-check"></i><b>C.2</b> Setting Up</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>D</b> Glossary</a></li>
<li class="chapter" data-level="E" data-path="rse-objectives.html"><a href="rse-objectives.html"><i class="fa fa-check"></i><b>E</b> Learning Objectives</a><ul>
<li class="chapter" data-level="E.1" data-path="rse-objectives.html"><a href="rse-objectives.html#the-basics-of-the-unix-shell"><i class="fa fa-check"></i><b>E.1</b> The Basics of the Unix Shell</a></li>
<li class="chapter" data-level="E.2" data-path="rse-objectives.html"><a href="rse-objectives.html#going-further-with-the-unix-shell"><i class="fa fa-check"></i><b>E.2</b> Going Further with the Unix Shell</a></li>
<li class="chapter" data-level="E.3" data-path="rse-objectives.html"><a href="rse-objectives.html#git-at-the-command-line"><i class="fa fa-check"></i><b>E.3</b> Git at the Command Line</a></li>
<li class="chapter" data-level="E.4" data-path="rse-objectives.html"><a href="rse-objectives.html#advanced-git"><i class="fa fa-check"></i><b>E.4</b> Advanced Git</a></li>
<li class="chapter" data-level="E.5" data-path="rse-objectives.html"><a href="rse-objectives.html#code-style-review-and-refactoring"><i class="fa fa-check"></i><b>E.5</b> Code Style, Review, and Refactoring</a></li>
<li class="chapter" data-level="E.6" data-path="rse-objectives.html"><a href="rse-objectives.html#automating-analyses"><i class="fa fa-check"></i><b>E.6</b> Automating Analyses</a></li>
<li class="chapter" data-level="E.7" data-path="rse-objectives.html"><a href="rse-objectives.html#working-in-teams"><i class="fa fa-check"></i><b>E.7</b> Working in Teams</a></li>
<li class="chapter" data-level="E.8" data-path="rse-objectives.html"><a href="rse-objectives.html#project-structure"><i class="fa fa-check"></i><b>E.8</b> Project Structure</a></li>
<li class="chapter" data-level="E.9" data-path="glossary.html"><a href="glossary.html#continuous-integration"><i class="fa fa-check"></i><b>E.9</b> Continuous Integration</a></li>
<li class="chapter" data-level="E.10" data-path="rse-objectives.html"><a href="rse-objectives.html#r-packaging"><i class="fa fa-check"></i><b>E.10</b> R Packaging</a></li>
<li class="chapter" data-level="E.11" data-path="rse-objectives.html"><a href="rse-objectives.html#python-packaging"><i class="fa fa-check"></i><b>E.11</b> Python Packaging</a></li>
<li class="chapter" data-level="E.12" data-path="rse-objectives.html"><a href="rse-objectives.html#correctness"><i class="fa fa-check"></i><b>E.12</b> Correctness</a></li>
<li class="chapter" data-level="E.13" data-path="rse-objectives.html"><a href="rse-objectives.html#publishing"><i class="fa fa-check"></i><b>E.13</b> Publishing</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="rse-keypoints.html"><a href="rse-keypoints.html"><i class="fa fa-check"></i><b>F</b> Key Points</a><ul>
<li class="chapter" data-level="F.1" data-path="rse-keypoints.html"><a href="rse-keypoints.html#the-basics-of-the-unix-shell-1"><i class="fa fa-check"></i><b>F.1</b> The Basics of the Unix Shell</a></li>
<li class="chapter" data-level="F.2" data-path="rse-keypoints.html"><a href="rse-keypoints.html#going-further-with-the-unix-shell-1"><i class="fa fa-check"></i><b>F.2</b> Going Further with the Unix Shell</a></li>
<li class="chapter" data-level="F.3" data-path="rse-keypoints.html"><a href="rse-keypoints.html#git-at-the-command-line-1"><i class="fa fa-check"></i><b>F.3</b> Git at the Command Line</a></li>
<li class="chapter" data-level="F.4" data-path="rse-keypoints.html"><a href="rse-keypoints.html#advanced-git-1"><i class="fa fa-check"></i><b>F.4</b> Advanced Git</a></li>
<li class="chapter" data-level="F.5" data-path="rse-keypoints.html"><a href="rse-keypoints.html#code-style-review-and-refactoring-1"><i class="fa fa-check"></i><b>F.5</b> Code Style, Review, and Refactoring</a></li>
<li class="chapter" data-level="F.6" data-path="rse-keypoints.html"><a href="rse-keypoints.html#automating-analyses-1"><i class="fa fa-check"></i><b>F.6</b> Automating Analyses</a></li>
<li class="chapter" data-level="F.7" data-path="rse-keypoints.html"><a href="rse-keypoints.html#working-in-teams-1"><i class="fa fa-check"></i><b>F.7</b> Working in Teams</a></li>
<li class="chapter" data-level="F.8" data-path="rse-keypoints.html"><a href="rse-keypoints.html#project-structure-1"><i class="fa fa-check"></i><b>F.8</b> Project Structure</a></li>
<li class="chapter" data-level="F.9" data-path="rse-keypoints.html"><a href="rse-keypoints.html#continuous-integration-1"><i class="fa fa-check"></i><b>F.9</b> Continuous Integration</a></li>
<li class="chapter" data-level="F.10" data-path="rse-keypoints.html"><a href="rse-keypoints.html#r-packaging-1"><i class="fa fa-check"></i><b>F.10</b> R Packaging</a></li>
<li class="chapter" data-level="F.11" data-path="rse-keypoints.html"><a href="rse-keypoints.html#python-packaging-1"><i class="fa fa-check"></i><b>F.11</b> Python Packaging</a></li>
<li class="chapter" data-level="F.12" data-path="rse-keypoints.html"><a href="rse-keypoints.html#correctness-1"><i class="fa fa-check"></i><b>F.12</b> Correctness</a></li>
<li class="chapter" data-level="F.13" data-path="rse-keypoints.html"><a href="rse-keypoints.html#publishing-1"><i class="fa fa-check"></i><b>F.13</b> Publishing</a></li>
</ul></li>
<li class="chapter" data-level="G" data-path="rse-solutions.html"><a href="rse-solutions.html"><i class="fa fa-check"></i><b>G</b> Solutions</a><ul>
<li class="chapter" data-level="G.1" data-path="rse-solutions.html"><a href="rse-solutions.html#chapterrefrse-bash-basics"><i class="fa fa-check"></i><b>G.1</b> Chapter @ref(rse-bash-basics)</a><ul>
<li class="chapter" data-level="G.1.1" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-more-ls"><i class="fa fa-check"></i><b>G.1.1</b> Exercise @ref(rse-bash-basics-ex-more-ls)</a></li>
<li class="chapter" data-level="G.1.2" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-ls-rt"><i class="fa fa-check"></i><b>G.1.2</b> Exercise @ref(rse-bash-basics-ex-ls-rt)</a></li>
<li class="chapter" data-level="G.1.3" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-paths"><i class="fa fa-check"></i><b>G.1.3</b> Exercise @ref(rse-bash-basics-ex-paths)</a></li>
<li class="chapter" data-level="G.1.4" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-resolve-rel-path"><i class="fa fa-check"></i><b>G.1.4</b> Exercise @ref(rse-bash-basics-ex-resolve-rel-path)</a></li>
<li class="chapter" data-level="G.1.5" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-reading-ls"><i class="fa fa-check"></i><b>G.1.5</b> Exercise @ref(rse-bash-basics-ex-reading-ls)</a></li>
<li class="chapter" data-level="G.1.6" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-touch"><i class="fa fa-check"></i><b>G.1.6</b> Exercise @ref(rse-bash-basics-ex-touch)</a></li>
<li class="chapter" data-level="G.1.7" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-move-dot"><i class="fa fa-check"></i><b>G.1.7</b> Exercise @ref(rse-bash-basics-ex-move-dot)</a></li>
<li class="chapter" data-level="G.1.8" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-renaming-files"><i class="fa fa-check"></i><b>G.1.8</b> Exercise @ref(rse-bash-basics-ex-renaming-files)</a></li>
<li class="chapter" data-level="G.1.9" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-last-ls"><i class="fa fa-check"></i><b>G.1.9</b> Exercise @ref(rse-bash-basics-ex-last-ls)</a></li>
<li class="chapter" data-level="G.1.10" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-safe-rm"><i class="fa fa-check"></i><b>G.1.10</b> Exercise @ref(rse-bash-basics-ex-safe-rm)</a></li>
<li class="chapter" data-level="G.1.11" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-copy-multi"><i class="fa fa-check"></i><b>G.1.11</b> Exercise @ref(rse-bash-basics-ex-copy-multi)</a></li>
<li class="chapter" data-level="G.1.12" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-ls-match"><i class="fa fa-check"></i><b>G.1.12</b> Exercise @ref(rse-bash-basics-ex-ls-match)</a></li>
<li class="chapter" data-level="G.1.13" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-more-wildcards"><i class="fa fa-check"></i><b>G.1.13</b> Exercise @ref(rse-bash-basics-ex-more-wildcards)</a></li>
<li class="chapter" data-level="G.1.14" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-organizing"><i class="fa fa-check"></i><b>G.1.14</b> Exercise @ref(rse-bash-basics-ex-organizing)</a></li>
<li class="chapter" data-level="G.1.15" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-reproduce-structure"><i class="fa fa-check"></i><b>G.1.15</b> Exercise @ref(rse-bash-basics-ex-reproduce-structure)</a></li>
<li class="chapter" data-level="G.1.16" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-sort-n"><i class="fa fa-check"></i><b>G.1.16</b> Exercise @ref(rse-bash-basics-ex-sort-n)</a></li>
<li class="chapter" data-level="G.1.17" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-redirect-append"><i class="fa fa-check"></i><b>G.1.17</b> Exercise @ref(rse-bash-basics-ex-redirect-append)</a></li>
<li class="chapter" data-level="G.1.18" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-append-data"><i class="fa fa-check"></i><b>G.1.18</b> Exercise @ref(rse-bash-basics-ex-append-data)</a></li>
<li class="chapter" data-level="G.1.19" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-piping"><i class="fa fa-check"></i><b>G.1.19</b> Exercise @ref(rse-bash-basics-ex-piping)</a></li>
<li class="chapter" data-level="G.1.20" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-uniq-adjacent"><i class="fa fa-check"></i><b>G.1.20</b> Exercise @ref(rse-bash-basics-ex-uniq-adjacent)</a></li>
<li class="chapter" data-level="G.1.21" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-reading-pipes"><i class="fa fa-check"></i><b>G.1.21</b> Exercise @ref(rse-bash-basics-ex-reading-pipes)</a></li>
<li class="chapter" data-level="G.1.22" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-pipe-construction"><i class="fa fa-check"></i><b>G.1.22</b> Exercise @ref(rse-bash-basics-ex-pipe-construction)</a></li>
<li class="chapter" data-level="G.1.23" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-which-pipe"><i class="fa fa-check"></i><b>G.1.23</b> Exercise @ref(rse-bash-basics-ex-which-pipe)</a></li>
<li class="chapter" data-level="G.1.24" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-wildcard-expressions"><i class="fa fa-check"></i><b>G.1.24</b> Exercise @ref(rse-bash-basics-ex-wildcard-expressions)</a></li>
<li class="chapter" data-level="G.1.25" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-remove-unneeded"><i class="fa fa-check"></i><b>G.1.25</b> Exercise @ref(rse-bash-basics-ex-remove-unneeded)</a></li>
<li class="chapter" data-level="G.1.26" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-loop-dry-run"><i class="fa fa-check"></i><b>G.1.26</b> Exercise @ref(rse-bash-basics-ex-loop-dry-run)</a></li>
<li class="chapter" data-level="G.1.27" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-nested-loops"><i class="fa fa-check"></i><b>G.1.27</b> Exercise @ref(rse-bash-basics-ex-nested-loops)</a></li>
<li class="chapter" data-level="G.1.28" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-loop-variables"><i class="fa fa-check"></i><b>G.1.28</b> Exercise @ref(rse-bash-basics-ex-loop-variables)</a></li>
<li class="chapter" data-level="G.1.29" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-limiting-file-sets"><i class="fa fa-check"></i><b>G.1.29</b> Exercise @ref(rse-bash-basics-ex-limiting-file-sets)</a></li>
<li class="chapter" data-level="G.1.30" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-loop-save"><i class="fa fa-check"></i><b>G.1.30</b> Exercise @ref(rse-bash-basics-ex-loop-save)</a></li>
<li class="chapter" data-level="G.1.31" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-list-unique"><i class="fa fa-check"></i><b>G.1.31</b> Exercise @ref(rse-bash-basics-ex-list-unique)</a></li>
<li class="chapter" data-level="G.1.32" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-basics-ex-history-order"><i class="fa fa-check"></i><b>G.1.32</b> Exercise @ref(rse-bash-basics-ex-history-order)</a></li>
</ul></li>
<li class="chapter" data-level="G.2" data-path="rse-solutions.html"><a href="rse-solutions.html#chapterrefrse-bash-advanced"><i class="fa fa-check"></i><b>G.2</b> Chapter @ref(rse-bash-advanced)</a><ul>
<li class="chapter" data-level="G.2.1" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-script-variables"><i class="fa fa-check"></i><b>G.2.1</b> Exercise @ref(rse-bash-advanced-ex-script-variables)</a></li>
<li class="chapter" data-level="G.2.2" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-longest-with-extension"><i class="fa fa-check"></i><b>G.2.2</b> Exercise @ref(rse-bash-advanced-ex-longest-with-extension)</a></li>
<li class="chapter" data-level="G.2.3" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-reading-scripts"><i class="fa fa-check"></i><b>G.2.3</b> Exercise @ref(rse-bash-advanced-ex-reading-scripts)</a></li>
<li class="chapter" data-level="G.2.4" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-using-grep"><i class="fa fa-check"></i><b>G.2.4</b> Exercise @ref(rse-bash-advanced-ex-using-grep)</a></li>
<li class="chapter" data-level="G.2.5" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-tracking-species"><i class="fa fa-check"></i><b>G.2.5</b> Exercise @ref(rse-bash-advanced-ex-tracking-species)</a></li>
<li class="chapter" data-level="G.2.6" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-little-women"><i class="fa fa-check"></i><b>G.2.6</b> Exercise @ref(rse-bash-advanced-ex-little-women)</a></li>
<li class="chapter" data-level="G.2.7" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-match-subtract"><i class="fa fa-check"></i><b>G.2.7</b> Exercise @ref(rse-bash-advanced-ex-match-subtract)</a></li>
<li class="chapter" data-level="G.2.8" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-reading-find"><i class="fa fa-check"></i><b>G.2.8</b> Exercise @ref(rse-bash-advanced-ex-reading-find)</a></li>
<li class="chapter" data-level="G.2.9" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-find-properties"><i class="fa fa-check"></i><b>G.2.9</b> Exercise @ref(rse-bash-advanced-ex-find-properties)</a></li>
<li class="chapter" data-level="G.2.10" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-combining-options"><i class="fa fa-check"></i><b>G.2.10</b> Exercise @ref(rse-bash-advanced-ex-combining-options)</a></li>
<li class="chapter" data-level="G.2.11" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-bash-advanced-ex-other-wildcards"><i class="fa fa-check"></i><b>G.2.11</b> Exercise @ref(rse-bash-advanced-ex-other-wildcards)</a></li>
</ul></li>
<li class="chapter" data-level="G.3" data-path="rse-solutions.html"><a href="rse-solutions.html#chapterrefrse-automate"><i class="fa fa-check"></i><b>G.3</b> Chapter @ref(rse-automate)</a><ul>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-automate-ex-create-summary-results"><i class="fa fa-check"></i>Exercise @ref(rse-automate-ex-create-summary-results)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-automate-ex-plot-top-n"><i class="fa fa-check"></i>Exercise @ref(rse-automate-ex-plot-top-n)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-automate-ex-mkdir"><i class="fa fa-check"></i>Exercise @ref(rse-automate-ex-mkdir)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-automate-ex-report-change"><i class="fa fa-check"></i>Exercise @ref(rse-automate-ex-report-change)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-automate-ex-readable-help"><i class="fa fa-check"></i>Exercise @ref(rse-automate-ex-readable-help)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-automate-ex-wildcard-perils"><i class="fa fa-check"></i>Exercise @ref(rse-automate-ex-wildcard-perils)</a></li>
</ul></li>
<li class="chapter" data-level="G.4" data-path="rse-solutions.html"><a href="rse-solutions.html#chapterrefrse-git-cmdline"><i class="fa fa-check"></i><b>G.4</b> Chapter @ref(rse-git-cmdline)</a><ul>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-places"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-places)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-commit"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-commit)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-multiple"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-multiple)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-bio"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-bio)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-ignore-nested"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-ignore-nested)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-include"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-include)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-github-interface"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-github-interface)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-timestamp"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-timestamp)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-push-commit"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-push-commit)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-boilerplate"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-boilerplate)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-recover"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-recover)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-history"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-history)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exericserefrse-git-cmdline-ex-diff"><i class="fa fa-check"></i>Exericse @ref(rse-git-cmdline-ex-diff)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-unstage"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-unstage)</a></li>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-cmdline-ex-blame"><i class="fa fa-check"></i>Exercise @ref(rse-git-cmdline-ex-blame)</a></li>
</ul></li>
<li class="chapter" data-level="G.5" data-path="rse-solutions.html"><a href="rse-solutions.html#chapterrefrse-git-advanced"><i class="fa fa-check"></i><b>G.5</b> Chapter @ref(rse-git-advanced)</a><ul>
<li class="chapter" data-level="" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-git-advanced-ex-additional-pr"><i class="fa fa-check"></i>Exercise @ref(rse-git-advanced-ex-additional-pr)</a></li>
</ul></li>
<li class="chapter" data-level="G.6" data-path="rse-solutions.html"><a href="rse-solutions.html#chapterrefrse-project"><i class="fa fa-check"></i><b>G.6</b> Chapter @ref(rse-project}</a><ul>
<li class="chapter" data-level="G.6.1" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-project-ex-understand-project"><i class="fa fa-check"></i><b>G.6.1</b> Exercise @ref(rse-project-ex-understand-project)</a></li>
<li class="chapter" data-level="G.6.2" data-path="rse-solutions.html"><a href="rse-solutions.html#exerciserefrse-project-ex-permanent-links"><i class="fa fa-check"></i><b>G.6.2</b> Exercise @ref(rse-project-ex-permanent-links)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="H" data-path="rse-yaml.html"><a href="rse-yaml.html"><i class="fa fa-check"></i><b>H</b> YAML</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Merely Useful: RSE</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rse-correct" class="section level1">
<h1><span class="header-section-number">Chapter 14</span> Correctness</h1>
<p>We all hope the software we write does what we wrote it to do.
But how can we be sure?
The short is answer is that we can’t,
but that as in science,
we can test our expectations against reality to help us decide if we are sure enough.
This chapter explores ways of doing that in both R and Python.</p>
<div id="rse-correct-manual" class="section level2">
<h2><span class="header-section-number">14.1</span> How can I test functions manually?</h2>
<p>Suppose we have written a function to get the sign of a number.
In R,
this might be:</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb679-1" data-line-number="1">numSign &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb679-2" data-line-number="2">  <span class="cf">if</span> (x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb679-3" data-line-number="3">    <span class="dv">1</span></a>
<a class="sourceLine" id="cb679-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb679-5" data-line-number="5">    <span class="dv">-1</span></a>
<a class="sourceLine" id="cb679-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb679-7" data-line-number="7">}</a></code></pre></div>
<p>while in Python,
it might be:</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb680-1" data-line-number="1"><span class="kw">def</span> numSign(x):</a>
<a class="sourceLine" id="cb680-2" data-line-number="2">    <span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">0</span>:</a>
<a class="sourceLine" id="cb680-3" data-line-number="3">        out <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb680-4" data-line-number="4">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb680-5" data-line-number="5">        out <span class="op">=</span> <span class="dv">-1</span></a>
<a class="sourceLine" id="cb680-6" data-line-number="6">    <span class="cf">return</span> out</a></code></pre></div>
<p>A simple way to test the function interactively in either language
is to check that it produces the correct value for a few representative cases:</p>
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb681-1" data-line-number="1"><span class="kw">numSign</span>(<span class="dv">2</span>) <span class="op">==</span><span class="st"> </span><span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb683"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb683-1" data-line-number="1"><span class="kw">numSign</span>(<span class="dv">0</span>) <span class="op">==</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb685"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb685-1" data-line-number="1"><span class="kw">numSign</span>(<span class="op">-</span><span class="dv">4</span>) <span class="op">==</span><span class="st"> </span><span class="dv">-1</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>These tests show that it handles (some) positive and negatives value correctly,
but gives the wrong value for zero
(whose sign should also be 0).</p>
<p>Manual testing is a good place to start,
but when we are creating or modifying a larger function,
we want to be able to re-run our tests with a single command.
That phrase “with a single command” suggests that we should write a second function
whose job is to re-run tests for the first.
In R,
this might be:</p>
<div class="sourceCode" id="cb687"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb687-1" data-line-number="1">test_numSign &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb687-2" data-line-number="2">    <span class="kw">stopifnot</span>(<span class="kw">numSign</span>(<span class="fl">0.1</span>) <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb687-3" data-line-number="3">    <span class="kw">stopifnot</span>(<span class="kw">numSign</span>(<span class="dv">0</span>) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb687-4" data-line-number="4">    <span class="kw">stopifnot</span>(<span class="kw">numSign</span>(<span class="op">-</span><span class="ot">Inf</span>) <span class="op">==</span><span class="st"> </span><span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb687-5" data-line-number="5">}</a></code></pre></div>
<p>As its name suggests,
<code>stopifnot</code> stops the program if its argument is not true.
A Python equivalent could use <code>assert</code> to achieve the same effect:</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb688-1" data-line-number="1"><span class="im">import</span> math</a>
<a class="sourceLine" id="cb688-2" data-line-number="2"></a>
<a class="sourceLine" id="cb688-3" data-line-number="3"><span class="kw">def</span> test_numSign():</a>
<a class="sourceLine" id="cb688-4" data-line-number="4">    <span class="cf">assert</span> numSign(<span class="fl">0.1</span>) <span class="op">==</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb688-5" data-line-number="5">    <span class="cf">assert</span> numSign(<span class="dv">0</span>) <span class="op">==</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb688-6" data-line-number="6">    <span class="cf">assert</span> numSign(math.inf) <span class="op">==</span> <span class="dv">-1</span></a></code></pre></div>
</div>
<div id="rse-correct-features" class="section level2">
<h2><span class="header-section-number">14.2</span> What features do we want a testing framework to have?</h2>
<p>The individual tests in <code>test_numSign</code> are called <a href="glossary.html#unit-test">unit tests</a>
because they test the smallest units of our code.
Writing functions so that we can easily re-run unit tests is a step in the right direction,
but our current approach has two flaws.
First,
if a test fails,
none of the tests that come after it run.
In this case,
for example,
we don’t know if <code>numSign</code> handles <code>-Inf</code> correctly or not
because testing stops when <code>numSign(0)</code> gives the wrong answer.
We would have more information if all of the tests ran every time.</p>
<p>The second flaw in <code>test_numSign</code> is that it doesn’t tell us anything if our tests pass.
A one-line summary saying “3/3 tests passed” would confirm that the tests actually ran,
while something like “2/3 tests passed”
followed by a list of the tests that <em>didn’t</em> so we know where to start investigating
would be even better.</p>
<blockquote>
<p><strong>Too Much Information</strong></p>
<p>We <em>don’t</em> want our testing framework to list all of the tests that pass
because if there is too much output,
we will soon start ignoring all of it.
A testing framework should only demand that we pay attention to details
when we actually need to.</p>
</blockquote>
<p>One other requirement for a good set of tests is <a href="glossary.html#test-isolation">isolation</a>.
Suppose that we have two functions <code>first</code> and <code>second</code> and we test them in this way:</p>
<pre><code>first_result = first()
check(first_result)
second_result = second(first_result)
check(second_result)</code></pre>
<p>If <code>first</code> produces a wrong answer,
we won’t know if <code>second</code> is working
because we won’t know what its actual input is.
Using the output of one test as the input of another
increases the risk of <a href="glossary.html#false-positive">false positives</a> (tests passing when they should fail)
and <a href="glossary.html#false-negative">false negatives</a> (tests failing when they should pass),
which distract or mislead us.</p>
<p>Putting these requirements together,
a single unit test has:</p>
<ul>
<li>a <a href="glossary.html#fixture">fixture</a>,
which is the thing being tested (e.g., the number 0 or a list of images);</li>
<li>an <a href="glossary.html#actual-result">actual result</a>,
which is what the code produces when given that fixture; and</li>
<li>an <a href="glossary.html#expected-result">expected result</a>
that the actual result is compared to.</li>
</ul>
<p>Each test can have one of three results:</p>
<ul>
<li><a href="glossary.html#test-success">success</a>: the code passed the test.</li>
<li><a href="glossary.html#test-failure">failure</a>: the code didn’t pass the test.</li>
<li><a href="glossary.html#test-error">error</a>: something went wrong with the test itself,
so we don’t know anything for certain about the code being tested.</li>
</ul>
<p>A <a href="glossary.html#test-framework">test framework</a> (also called a <a href="glossary.html#test-runner">test runner</a>) should:</p>
<ul>
<li>find and run tests;</li>
<li>summarize results;</li>
<li>pinpoint the locations of failures so that users know where to start debugging;</li>
<li>encourage people to isolate tests; and</li>
<li>make it easy to write and update tests (because otherwise people won’t do it).</li>
</ul>
<p>The next two sections will introduce the most popular frameworks for R and Python.
We will then explore general issues
such as how we can tell which parts of our code have and haven’t been tested
and what kinds of tests we should write.</p>
</div>
<div id="rse-correct-create-python" class="section level2">
<h2><span class="header-section-number">14.3</span> How do I create and run unit tests in Python?</h2>
<p><a href="http://pytest.org/"><code>pytest</code></a> is the most widely used test framework for Python.
Tests obey three rules:</p>
<ol style="list-style-type: decimal">
<li>All tests are put in files whose names begin with <code>test_</code>.</li>
<li>Each test is a function whose name also begins with <code>test_</code>.</li>
<li>These functions use <code>assert</code> to check results.</li>
</ol>
<p>The <code>pytest</code> library comes with a command-line tool that is also called <code>pytest</code>.
When we run it with no options:</p>
<pre class="shell"><code>$ pytest</code></pre>
<p>it searches for all files named <code>test_*.py</code> in the current directory and its subdirectories.
It then imports these files,
runs the tests they contain,
and summarizes their results.
If we only want to run the tests in a particular file,
we can use the command <code>pytest path/to/test_file.py</code>.</p>
<p>We can put our tests wherever we want,
but most projects put them in a subdirectory of the project’s root directory called <code>tests</code>.
If the project uses a <a href="glossary.html#build-tool">build tool</a> like Make (Chapter <a href="rse-automate.html#rse-automate">8</a>),
it is common to include a target called <code>test</code> so that <code>make test</code> will re-run all of the tests.</p>
<p>So what do tests look like?
To see,
create a file called <code>test_add.py</code> and insert the following code:</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb691-1" data-line-number="1"><span class="kw">def</span> add(x, y):</a>
<a class="sourceLine" id="cb691-2" data-line-number="2">    val <span class="op">=</span> x <span class="op">+</span> y</a>
<a class="sourceLine" id="cb691-3" data-line-number="3">    <span class="cf">return</span> val</a>
<a class="sourceLine" id="cb691-4" data-line-number="4"></a>
<a class="sourceLine" id="cb691-5" data-line-number="5"><span class="kw">def</span> test_add_two_small_integers_2():</a>
<a class="sourceLine" id="cb691-6" data-line-number="6">    <span class="cf">assert</span> add_two(<span class="dv">1</span>, <span class="dv">2</span>) <span class="op">==</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb691-7" data-line-number="7"></a>
<a class="sourceLine" id="cb691-8" data-line-number="8"><span class="kw">def</span> test_add_integer_and_float():</a>
<a class="sourceLine" id="cb691-9" data-line-number="9">    left <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb691-10" data-line-number="10">    right <span class="op">=</span> <span class="fl">2.0</span></a>
<a class="sourceLine" id="cb691-11" data-line-number="11">    result <span class="op">=</span> add_two(left, right)</a>
<a class="sourceLine" id="cb691-12" data-line-number="12">    <span class="cf">assert</span> result <span class="op">==</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb691-13" data-line-number="13">    <span class="cf">assert</span> <span class="bu">type</span>(result) <span class="op">==</span> <span class="bu">int</span></a></code></pre></div>
<p>The function being tested will <em>not</em> normally be in
the file of tests—test files will normally import those functions instead—but
we have put <code>add</code> here for convenience.
We don’t write comments to explain what each test is doing;
we give each a long name instead,
because that’s what <code>pytest</code> will print if and when the test fails.
Finally,
we have shown two styles of testing here:
one in which the fixture is just the values passed into the function
and the result is checked immediately,
and one in which the fixture is constructed step-by-step (the variables <code>left</code> and <code>right</code>)
and the function’s result is captured in another variable
so that several checks can be done.</p>
<p>To run these tests, we use:</p>
<pre class="shell"><code>$ pytest test_add.py</code></pre>
<p>The output is:</p>
<pre class="text"><code>============================= test session starts ==============================
platform darwin -- Python 3.7.3, pytest-5.0.1, py-1.8.0, pluggy-0.12.0
rootdir: /Users/merely/tests
plugins: openfiles-0.3.2, arraydiff-0.3, doctestplus-0.3.0, remotedata-0.3.1
collected 2 items

test_add.py FF                                                          [100%]

=================================== FAILURES ===================================
________________________ test_add_two_small_integers_2 _________________________

    def test_add_two_small_integers_2():
&gt;       assert add_two(1, 2) == 3
E       NameError: name &#39;add_two&#39; is not defined

test_add.py:6: NameError
__________________________ test_add_integer_and_float __________________________

    def test_add_integer_and_float():
        left = 1
        right = 2.0
&gt;       result = add_two(left, right)
E       NameError: name &#39;add_two&#39; is not defined

test_add.py:11: NameError
=========================== 2 failed in 0.10 seconds ===========================</code></pre>
<p>The two <code>F</code>’s in the top line tell us there are two failures.
The <code>E</code> in the report for each test tells us why that test failed,
and the listing immediately above this line tells us why:
our function is called <code>add</code>,
but we are using <code>add_two</code> in our tests.
Let’s rename the function and re-run our tests:</p>
<pre class="text"><code>============================= test session starts ==============================
platform darwin -- Python 3.7.3, pytest-5.0.1, py-1.8.0, pluggy-0.12.0
rootdir: /Users/merely/tests
plugins: openfiles-0.3.2, arraydiff-0.3, doctestplus-0.3.0, remotedata-0.3.1
collected 2 items

test_add.py .F                                                           [100%]

=================================== FAILURES ===================================
__________________________ test_add_integer_and_float __________________________

    def test_add_integer_and_float():
        left = 1
        right = 2.0
        result = add_two(left, right)
        assert result == 3
&gt;       assert type(result) == int
E       AssertionError: assert &lt;class &#39;float&#39;&gt; == int
E        +  where &lt;class &#39;float&#39;&gt; = type(3.0)

test_add.py:13: AssertionError
====================== 1 failed, 1 passed in 0.05 seconds ======================</code></pre>
<p>This time the first line of output tells us that one test passed (the <code>.</code>)
and another failed (the <code>F</code>).
<code>pytest</code> then shows where the problem occurred in the failing test:
we claimed on line 13 that the result’s type would be <code>int</code>
but it is actually <code>float</code>.</p>
</div>
<div id="rse-correct-create-r" class="section level2">
<h2><span class="header-section-number">14.4</span> How do I create and run unit tests in R?</h2>
<p>The easiest way to start testing in R is via the <code>usethis</code> package.
Let’s create a new project in RStudio caller <code>creater</code> of type “package”
(both because <code>usethis</code> is designed to work with packages,
and because our R projects should always be packages).
We can then type:</p>
<div class="sourceCode" id="cb695"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb695-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_testthat</span>()</a></code></pre></div>
<pre class="text"><code>✔ Setting active project to &#39;/Users/merely/creater&#39;
✔ Adding &#39;testthat&#39; to Suggests field in DESCRIPTION
✔ Creating &#39;tests/testthat/&#39;
✔ Writing &#39;tests/testthat.R&#39;
● Call `use_test()` to initialize a basic test file and open it for editing.</code></pre>
<p>The call creates a new directory <code>tests/testthat/</code>,
adds <code>testthat</code> to <code>Suggests</code> in the <code>DESCRIPTION</code> file,
and creates a file called <code>tests/testthat.R</code> that tells R how to run the tests.
This may seem like a lot,
but it is all needed to create an R package (Chapter <a href="rse-package-r.html#rse-package-r">12</a>),
so we might as well do things that way from the start.</p>
<p>The file <code>tests/testthat.R</code> contains:</p>
<div class="sourceCode" id="cb697"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb697-1" data-line-number="1"><span class="kw">library</span>(testthat)</a>
<a class="sourceLine" id="cb697-2" data-line-number="2"><span class="kw">library</span>(creater)</a>
<a class="sourceLine" id="cb697-3" data-line-number="3"></a>
<a class="sourceLine" id="cb697-4" data-line-number="4"><span class="kw">test_check</span>(<span class="st">&quot;creater&quot;</span>)</a></code></pre></div>
<p>I.e.,
it loads the <code>testthat</code> library and our own package,
then calls <code>test_check</code> to run tests.
If we try to run our tests using:</p>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb698-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">test</span>()</a></code></pre></div>
<p>we get the message:</p>
<pre class="text"><code>No tests: no files in /Users/merely/creater/tests/testthat match &#39;^test.*\.[rR]$&#39;</code></pre>
<p>This is fair,
since we haven’t yet created any tests.
To do that,
we run:</p>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb700-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_test</span>(<span class="st">&quot;mean&quot;</span>)</a></code></pre></div>
<pre class="text"><code>✔ Increasing &#39;testthat&#39; version to &#39;&gt;= 2.1.0&#39; in DESCRIPTION
✔ Writing &#39;tests/testthat/test-mean.R&#39;
● Modify &#39;tests/testthat/test-mean.R&#39;</code></pre>
<p>As the output suggests,
this command creates a file called <code>tests/testthat/test-mean.R</code>.
We could create this file ourselves if we want;
either way,
its name should reflect what we are using it to test,
such as <code>test-read-data.R</code> or <code>test-annual-analysis.R</code>.
Note that we do <em>not</em> type the prefix <code>test-</code> in the call to <code>usethis::use_test</code>;
<code>usethis</code> will insert that automatically.</p>
<p>The newly-created file contains a single test case:</p>
<div class="sourceCode" id="cb702"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb702-1" data-line-number="1"><span class="kw">test_that</span>(<span class="st">&quot;multiplication works&quot;</span>, {</a>
<a class="sourceLine" id="cb702-2" data-line-number="2">  <span class="kw">expect_equal</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb702-3" data-line-number="3">})</a></code></pre></div>
<p>We can run this with:</p>
<div class="sourceCode" id="cb703"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb703-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">test</span>()</a></code></pre></div>
<pre class="text"><code>Loading creater
Testing creater
✔ |  OK F W S | Context
✔ |   1       | mean

══ Results ══════════════════════════════════════════════════════════════════════════════════════════════════════
OK:       1
Failed:   0
Warnings: 0
Skipped:  0</code></pre>
<p>or use the RStudio keyboard shortcut <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd> (on Windows)
or <kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>T</kbd> (on Mac),
which calls the same function.
Either way,
R searches below the <code>tests/testthat</code> directory to find files whose names start with <code>test</code>,
loads them,
and runs the tests that it finds.
The output tells us that one test passed,
none failed,
there were no warnings,
and no tests were skipped.</p>
<p>Let’s re-open <code>tests/testthat/test-mean.R</code> and replace the test that R wrote for us
with this code:</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb705-1" data-line-number="1"><span class="kw">context</span>(<span class="st">&quot;Computing the mean&quot;</span>)</a>
<a class="sourceLine" id="cb705-2" data-line-number="2"></a>
<a class="sourceLine" id="cb705-3" data-line-number="3"><span class="kw">test_that</span>(<span class="st">&quot;the mean of an odd-length vector is correct&quot;</span>, {</a>
<a class="sourceLine" id="cb705-4" data-line-number="4">    <span class="kw">expect_identical</span>(<span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>), <span class="fl">2.0</span>)</a>
<a class="sourceLine" id="cb705-5" data-line-number="5">})</a>
<a class="sourceLine" id="cb705-6" data-line-number="6"></a>
<a class="sourceLine" id="cb705-7" data-line-number="7"><span class="kw">test_that</span>(<span class="st">&quot;the mean of an even-length vector is correct&quot;</span>, {</a>
<a class="sourceLine" id="cb705-8" data-line-number="8">    <span class="kw">expect_identical</span>(<span class="kw">mean</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>), <span class="fl">2.0</span>)</a>
<a class="sourceLine" id="cb705-9" data-line-number="9">})</a></code></pre></div>
<pre class="text"><code>Loading creater
Testing creater
✔ |  OK F W S | Context
✖ |   1 1     | Computing the mean
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────
test-mean.R:8: failure: the mean of an even-length vector is correct
mean(1:4) not identical to 2.
1/1 mismatches
[1] 2.5 - 2 == 0.5
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────

══ Results ══════════════════════════════════════════════════════════════════════════════════════════════════════
OK:       1
Failed:   1
Warnings: 0
Skipped:  0</code></pre>
<p>The little table at the top of the output shows that one test passed and one failed
in the context titled <code>&quot;Computing the mean&quot;</code>.
The lines below tell us what failed and why,
and the final section of the report summarizes the results.
It is redundant in this case,
since both of our tests are in the same context,
but is useful if we have several files full of tests.</p>
</div>
<div id="rse-correct-fixtures" class="section level2">
<h2><span class="header-section-number">14.5</span> How should I set up fixtures my unit tests?</h2>
<p>Test files all have a similar structure:</p>
<ol style="list-style-type: decimal">
<li>Load the software to be tested
(since it normally won’t be in the same file as the tests).</li>
<li>Write one short function to test each feature of the software.</li>
</ol>
<p>Each test function also has a stereotypical structure:</p>
<ol style="list-style-type: decimal">
<li>Create the fixture.</li>
<li>Run the test.</li>
<li>Check the result.</li>
</ol>
<p>Creating a fixture often requires many lines of code,
so we often write helper functions to do this.
For example,
if we are testing functions that work on multiple dataframes in R,
we might write a function like this:</p>
<div class="sourceCode" id="cb707"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb707-1" data-line-number="1">create_three_frames &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb707-2" data-line-number="2">    ones &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb707-3" data-line-number="3">        <span class="op">~</span>odd, <span class="op">~</span>even,</a>
<a class="sourceLine" id="cb707-4" data-line-number="4">           <span class="dv">1</span>,     <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb707-5" data-line-number="5">           <span class="dv">3</span>,     <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb707-6" data-line-number="6">    tens &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb707-7" data-line-number="7">        <span class="op">~</span>odd, <span class="op">~</span>even,</a>
<a class="sourceLine" id="cb707-8" data-line-number="8">          <span class="dv">10</span>,    <span class="dv">20</span>,</a>
<a class="sourceLine" id="cb707-9" data-line-number="9">          <span class="dv">30</span>,    <span class="dv">40</span>)</a>
<a class="sourceLine" id="cb707-10" data-line-number="10">    hundreds &lt;-<span class="st"> </span><span class="kw">tribble</span>(</a>
<a class="sourceLine" id="cb707-11" data-line-number="11">        <span class="op">~</span>odd, <span class="op">~</span>even,</a>
<a class="sourceLine" id="cb707-12" data-line-number="12">         <span class="dv">100</span>,   <span class="dv">200</span>,</a>
<a class="sourceLine" id="cb707-13" data-line-number="13">         <span class="dv">300</span>,   <span class="dv">400</span>)</a>
<a class="sourceLine" id="cb707-14" data-line-number="14">    <span class="kw">list</span>(<span class="dt">ones=</span>ones, <span class="dt">tens=</span>tens, <span class="dt">hundreds=</span>hundreds)</a>
<a class="sourceLine" id="cb707-15" data-line-number="15">}</a></code></pre></div>
<p>We could then use the fixture that function produces in many tests.
Here,
for example,
we are using it to test a function called <code>columnize</code>:</p>
<div class="sourceCode" id="cb708"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb708-1" data-line-number="1"><span class="kw">test_that</span>(<span class="st">&quot;columnize combines columns by name with addition&quot;</span>, {</a>
<a class="sourceLine" id="cb708-2" data-line-number="2">    fixture &lt;-<span class="st"> </span><span class="kw">create_three_frames</span>()</a>
<a class="sourceLine" id="cb708-3" data-line-number="3">    result &lt;-<span class="st"> </span><span class="kw">columnize</span>(fixture, <span class="st">&#39;+&#39;</span>, odd)</a>
<a class="sourceLine" id="cb708-4" data-line-number="4">    <span class="kw">expect_equal</span>(result<span class="op">$</span>odd, <span class="kw">c</span>(<span class="dv">111</span>, <span class="dv">333</span>))</a>
<a class="sourceLine" id="cb708-5" data-line-number="5">})</a>
<a class="sourceLine" id="cb708-6" data-line-number="6"></a>
<a class="sourceLine" id="cb708-7" data-line-number="7"><span class="kw">test_that</span>(<span class="st">&quot;columnize combines columns by name with multiplication&quot;</span>, {</a>
<a class="sourceLine" id="cb708-8" data-line-number="8">    fixture &lt;-<span class="st"> </span><span class="kw">create_three_frames</span>()</a>
<a class="sourceLine" id="cb708-9" data-line-number="9">    result &lt;-<span class="st"> </span><span class="kw">columnize</span>(fixture, <span class="st">&#39;*&#39;</span>, odd)</a>
<a class="sourceLine" id="cb708-10" data-line-number="10">    <span class="kw">expect_equal</span>(result<span class="op">$</span>odd, <span class="kw">c</span>(<span class="dv">1000</span>, <span class="dv">9000</span>))</a>
<a class="sourceLine" id="cb708-11" data-line-number="11">})</a></code></pre></div>
<p>Using helper functions to create fixtures like this
reduces the <a href="glossary.html#cognitive-load">cognitive load</a> on whoever has to maintain the tests,
since they only have to form a <a href="glossary.html#mental-model">mental model</a> of a few cases
rather than a new one for each test.
Note that we do <em>not</em> create the fixture once as a global variable
and then re-use it in many tests.
Tests should be isolated,
and having them share data increases the chances that
one of our tests will modify the data in ways that interfere with other tests.</p>
</div>
<div id="rse-correct-check" class="section level2">
<h2><span class="header-section-number">14.6</span> How should I check the results of tests?</h2>
<p>Once we have a result we need to check it.
The simplest way to do this in Python is the <code>assert</code> statement,
which <a href="glossary.html#raise-exception">raises</a> an <a href="glossary.html#exception">exception</a> if a condition is not true.
This normally causes Python to halt the program,
but <code>pytest</code> catches these exceptions,
adds them to its summary report,
and then runs the next test function.
As a result,
all of the test functions are run,
but each function only runs as far as the first failed check (Figure <a href="rse-correct.html#fig:rse-correct-failed-test">14.1</a>).</p>
<div class="figure"><span id="fig:rse-correct-failed-test"></span>
<img src="figures/FIXME.png" alt="Test Failure"  />
<p class="caption">
Figure 14.1: Test Failure
</p>
</div>
<p>This is another reason to recycle fixtures and keep test functions short:
in the example below,
we can’t be sure that the second test is run in <code>combined_tests</code>:</p>
<div class="sourceCode" id="cb709"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb709-1" data-line-number="1"><span class="kw">def</span> combined_tests():</a>
<a class="sourceLine" id="cb709-2" data-line-number="2">    fixture <span class="op">=</span> make_fixture()</a>
<a class="sourceLine" id="cb709-3" data-line-number="3">    result <span class="op">=</span> function(fixture)</a>
<a class="sourceLine" id="cb709-4" data-line-number="4">    <span class="cf">assert</span> <span class="bu">len</span>(result) <span class="op">&gt;</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb709-5" data-line-number="5">    <span class="cf">assert</span> result[<span class="dv">0</span>] <span class="op">!=</span> <span class="dv">0</span>  <span class="co"># might not run</span></a></code></pre></div>
<p>but we can be sure that both checks are run in <code>split_test_len</code> and <code>split_test_zero</code>.</p>
<div class="sourceCode" id="cb710"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb710-1" data-line-number="1"><span class="kw">def</span> split_test_len():</a>
<a class="sourceLine" id="cb710-2" data-line-number="2">    fixture <span class="op">=</span> make_fixture()</a>
<a class="sourceLine" id="cb710-3" data-line-number="3">    result <span class="op">=</span> function(fixture)</a>
<a class="sourceLine" id="cb710-4" data-line-number="4">    <span class="cf">assert</span> <span class="bu">len</span>(result) <span class="op">&gt;</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb710-5" data-line-number="5"></a>
<a class="sourceLine" id="cb710-6" data-line-number="6"><span class="kw">def</span> split_test_zero():</a>
<a class="sourceLine" id="cb710-7" data-line-number="7">    fixture <span class="op">=</span> make_fixture()</a>
<a class="sourceLine" id="cb710-8" data-line-number="8">    result <span class="op">=</span> function(fixture)</a>
<a class="sourceLine" id="cb710-9" data-line-number="9">    <span class="cf">assert</span> result[<span class="dv">0</span>] <span class="op">!=</span> <span class="dv">0</span></a></code></pre></div>
<blockquote>
<p><strong>Testing in the Real World</strong></p>
<p>In practice,
most programmers would write <code>combined_tests</code> in this case
rather than doubling the amount of reading they have to do
in order to understand these tests.
The purpose of testing is always to draw attention to things that need it;
if the second check in <code>combined_tests</code> doesn’t run because the first one failed
then we will have less information than we could,
but we will still know the most important thing:
our code is broken.</p>
</blockquote>
<p>In contrast to Python,
R’s <code>testthat</code> library provides multiple checking functions for different purposes.
<code>expect_identical()</code> compares that actual and expected results are identical down to the last bit.
<code>expect_equal()</code> checks that its arguments are equal within a narrow tolerance;
as we discuss in Section <a href="rse-correct.html#rse-correct-float">14.11</a>,
this is more useful for most data science problems.
Others include <code>expect_length</code>,
which checks that a vector has the right length,
and <code>expect_match</code>,
which checks that a string matches a <a href="glossary.html#regular-expression">regular expression</a>.
We can always replace these with <code>expect_true</code>,
i.e.,
use:</p>
<div class="sourceCode" id="cb711"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb711-1" data-line-number="1"><span class="kw">expect_true</span>(<span class="kw">length</span>(result <span class="op">==</span><span class="st"> </span><span class="dv">3</span>))</a></code></pre></div>
<p>instead of:</p>
<div class="sourceCode" id="cb712"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb712-1" data-line-number="1"><span class="kw">expect_length</span>(result, <span class="dv">3</span>)</a></code></pre></div>
<p>but the latter makes our intention clearer.</p>
</div>
<div id="rse-correct-failure" class="section level2">
<h2><span class="header-section-number">14.7</span> Why and how should I test that software fails correctly?</h2>
<p>Evil clowns are every programmer’s worst nightmare.
Their second worst is a <a href="glossary.html#silent-failure">silent failure</a>:
something that goes wrong but doesn’t crash,
print a warning,
or otherwise signal that human attention is required.
Testing that our code fails when it should
is therefore just as important as testing that it runs correctly.</p>
<blockquote>
<p><strong>We Have the Data</strong></p>
<p>The need to test error handling is not just folklore:
in their study of failures in data-intensive applications,
<span class="citation">Yuan et al. (<a href="references.html#ref-Yuan2014">2014</a>)</span> found that,
“the majority of catastrophic failures could easily have been prevented
by performing simple testing on error handling code—the last line of defense—even without
an understanding of the software design.”</p>
</blockquote>
<p>In Python,
we can test for an error using a <code>with</code> statement
and the <code>pytest.raises</code> function.
For example,
suppose a function called <code>count_words</code> is supposed to raise a <code>ValueError</code> exception when given an empty string.
We can test this behavior as follows:</p>
<div class="sourceCode" id="cb713"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb713-1" data-line-number="1"><span class="im">import</span> pytest</a>
<a class="sourceLine" id="cb713-2" data-line-number="2"></a>
<a class="sourceLine" id="cb713-3" data-line-number="3"><span class="kw">def</span> test_text_must_not_be_empty():</a>
<a class="sourceLine" id="cb713-4" data-line-number="4">    <span class="cf">with</span> pytest.raises(<span class="pp">ValueError</span>):</a>
<a class="sourceLine" id="cb713-5" data-line-number="5">        count_words(<span class="st">&#39;&#39;</span>)</a></code></pre></div>
<p>In R,
<code>testthat</code> provides specific functions to test for errors or warnings
called <code>expect_error()</code> and <code>expect_warning()</code> respectively:</p>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb714-1" data-line-number="1"><span class="kw">test_that</span>(<span class="st">&quot;text must not be empty&quot;</span>, {</a>
<a class="sourceLine" id="cb714-2" data-line-number="2">    <span class="kw">expect_error</span>(<span class="kw">count_words</span>(<span class="st">&quot;&quot;</span>))</a>
<a class="sourceLine" id="cb714-3" data-line-number="3">})</a></code></pre></div>
</div>
<div id="rse-correct-coverage" class="section level2">
<h2><span class="header-section-number">14.8</span> How can I tell whether my code has been tested or not?</h2>
<p>As we write more code or make changes to code we already have,
we may lose track of which parts we have tested and which we haven’t.
Even short programs,
loops or conditionals may make it difficult for us to figure out
what is actually being executed.
For example,
take a few moments to read this function in Python:</p>
<div class="sourceCode" id="cb715"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb715-1" data-line-number="1"><span class="kw">def</span> first(left, right):</a>
<a class="sourceLine" id="cb715-2" data-line-number="2">    <span class="cf">if</span> left <span class="op">&lt;</span> right:</a>
<a class="sourceLine" id="cb715-3" data-line-number="3">        left, right <span class="op">=</span> right, left</a>
<a class="sourceLine" id="cb715-4" data-line-number="4">    <span class="cf">while</span> left <span class="op">&gt;</span> right:</a>
<a class="sourceLine" id="cb715-5" data-line-number="5">        value <span class="op">=</span> second(left, right)</a>
<a class="sourceLine" id="cb715-6" data-line-number="6">        left, right <span class="op">=</span> right, <span class="bu">int</span>(right<span class="op">/</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb715-7" data-line-number="7">    <span class="cf">return</span> value</a>
<a class="sourceLine" id="cb715-8" data-line-number="8"></a>
<a class="sourceLine" id="cb715-9" data-line-number="9"><span class="kw">def</span> second(check, balance):</a>
<a class="sourceLine" id="cb715-10" data-line-number="10">    <span class="cf">if</span> check <span class="op">&gt;</span> <span class="dv">0</span>:</a>
<a class="sourceLine" id="cb715-11" data-line-number="11">        <span class="cf">return</span> balance</a>
<a class="sourceLine" id="cb715-12" data-line-number="12">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb715-13" data-line-number="13">        <span class="cf">return</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb715-14" data-line-number="14"></a>
<a class="sourceLine" id="cb715-15" data-line-number="15"><span class="bu">print</span>(first(<span class="dv">3</span>, <span class="dv">5</span>))</a></code></pre></div>
<p>or its equivalent in R:</p>
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb716-1" data-line-number="1">first &lt;-<span class="st"> </span><span class="cf">function</span>(left, right) {</a>
<a class="sourceLine" id="cb716-2" data-line-number="2">  <span class="cf">if</span> (left <span class="op">&lt;</span><span class="st"> </span>right) {</a>
<a class="sourceLine" id="cb716-3" data-line-number="3">    tmp &lt;-<span class="st"> </span>left</a>
<a class="sourceLine" id="cb716-4" data-line-number="4">    left &lt;-<span class="st"> </span>right</a>
<a class="sourceLine" id="cb716-5" data-line-number="5">    right &lt;-<span class="st"> </span>tmp</a>
<a class="sourceLine" id="cb716-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb716-7" data-line-number="7"></a>
<a class="sourceLine" id="cb716-8" data-line-number="8">  <span class="cf">while</span> (left <span class="op">&gt;</span><span class="st"> </span>right) {</a>
<a class="sourceLine" id="cb716-9" data-line-number="9">    value &lt;-<span class="st"> </span><span class="kw">second</span>(left, right)</a>
<a class="sourceLine" id="cb716-10" data-line-number="10">    left &lt;-<span class="st"> </span>right</a>
<a class="sourceLine" id="cb716-11" data-line-number="11">    right &lt;-<span class="st"> </span><span class="kw">as.integer</span>(right <span class="op">/</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb716-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb716-13" data-line-number="13"></a>
<a class="sourceLine" id="cb716-14" data-line-number="14">  value</a>
<a class="sourceLine" id="cb716-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb716-16" data-line-number="16"></a>
<a class="sourceLine" id="cb716-17" data-line-number="17">second &lt;-<span class="st"> </span><span class="cf">function</span>(check, balance) {</a>
<a class="sourceLine" id="cb716-18" data-line-number="18">    <span class="cf">if</span> (check <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb716-19" data-line-number="19">        balance</a>
<a class="sourceLine" id="cb716-20" data-line-number="20">    } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb716-21" data-line-number="21">        <span class="dv">0</span></a>
<a class="sourceLine" id="cb716-22" data-line-number="22">    }</a>
<a class="sourceLine" id="cb716-23" data-line-number="23">}</a>
<a class="sourceLine" id="cb716-24" data-line-number="24"></a>
<a class="sourceLine" id="cb716-25" data-line-number="25"><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="kw">first</span>(<span class="dv">3</span>, <span class="dv">5</span>))</a></code></pre></div>
<p>The only way to know which parts of these functions are and aren’t executed
is to trace their execution a line at a time.
The good news is that we don’t have to do this ourselves:
a <a href="glossary.html#code-coverage">code coverage</a> tool will do this for us.
In essence,
a code coverage tool creates a vector of Boolean flags with one entry for each line of code,
then modifies the code so that the appropriate flag is set to <code>true</code> whenever that line is executed
(Figure <a href="rse-correct.html#fig:rse-correct-how-coverage-works">14.2</a>).
When the program finishes,
the tool can show us which lines were touched
and report summary statistics such as the number or percentage of lines that weren’t used.</p>
<div class="figure"><span id="fig:rse-correct-how-coverage-works"></span>
<img src="figures/FIXME.png" alt="How Coverage Works"  />
<p class="caption">
Figure 14.2: How Coverage Works
</p>
</div>
<p>Most Python programmers use the <code>coverage</code> module as a coverage checking tool.
When we install it we get a command-line utility that is also called <code>coverage</code>.
If the example program above is in a file called <code>demo.py</code>,
we can check coverage by running:</p>
<pre class="shell"><code>$ coverage run demo_coverage.py</code></pre>
<p>This command doesn’t display anything of its own;
instead,
it puts coverage data in a file called <code>.coverage</code> (with a leading <code>.</code>) in the current directory.
To display that data,
we run:</p>
<pre class="shell"><code>$ coverage report</code></pre>
<pre class="text"><code>Name      Stmts   Miss  Cover
-----------------------------
demo.py      12      1    92%</code></pre>
<p>To get a fuller report,
we run <code>coverage html</code>
and then open <code>htmlcov/index.html</code>.
Clicking on the name of our file produces the colorized line-by-line display shown in Figure <a href="rse-correct.html#fig:python-coverage">14.3</a>.</p>
<div class="figure"><span id="fig:python-coverage"></span>
<img src="figures/rse-correct/python-coverage.png" alt="Python Coverage"  />
<p class="caption">
Figure 14.3: Python Coverage
</p>
</div>
<p>R’s <code>covr</code> package has several functions for checking coverage.
For example,
we can test the coverage of the tests for a package by running:</p>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb720-1" data-line-number="1">covr<span class="op">::</span><span class="kw">package_coverage</span>()</a></code></pre></div>
<p>This function outputs a list of all R files in the package
with their corresponding percentage coverage,
which is a good way to figure out what needs to be done next.</p>
</div>
<div id="rse-correct-enough" class="section level2">
<h2><span class="header-section-number">14.9</span> How much testing is enough?</h2>
<p>If we are writing software for a safety-critical application such as a medical device,
we should aim for 100% code coverage,
i.e.,
every single line in the application should be tested.
In fact,
we should probably go further and aim for 100% <a href="glossary.html#path-coverage">path coverage</a>
and ensure that every possible path through the code has been checked.</p>
<p>But most of us don’t write software that people’s lives depend on,
so requiring 100% code coverage is like asking for ten decimal places of accuracy
when checking the voltage of a household electrical outlet.
We always need to balance the effort required to create tests
against the likelihood that those tests will uncover useful information.</p>
<p>It’s important to understand that no amount of testing can prove a piece of software is completely correct.
A function with only two numeric arguments has 2<sup>128</sup> possible inputs.
Even if we could write the tests,
how could we be sure we were checking the result of each one correctly?</p>
<p>And testing data analysis pipelines is often harder than testing mainstream software applications,
since data analysts often don’t know what the right answer is.
(If we did,
we would have submitted our report and moved on to the next problem already.)
The key distinction is the difference between <a href="glossary.html#validation">validation</a>,
which asks whether the specification is correct,
while <a href="glossary.html#verification">verification</a>,
which asks whether we have met that specification.
The difference between them is the difference between building the right thing and building something right,
and the former question is often hard for data scientists to answer.</p>
<p>Luckily,
we can group the test cases for most functions into classes.
For example,
it might be possible to test a function that takes numbers as inputs
as well as we need to
using only a few cases:
zero, a positive number, a negative one, and infinity.
If we want to go further,
we could check that it fails the right way when given a string or a list.
Similarly,
when testing a function that summarizes a table full of data,
we should probably check that it handles tables with:</p>
<ul>
<li>no rows</li>
<li>only one row</li>
<li>many identical rows</li>
<li>rows having keys that are supposed to be unique, but aren’t</li>
<li>rows that contain nothing but missing values</li>
</ul>
<p>Some projects develop <a href="glossary.html#checklist">checklists</a> to remind programmers what they ought to test.
These checklists can be a bit daunting for newcomers,
but they are a great way to pass on hard-earned experience.</p>
</div>
<div id="rse-correct-tdd" class="section level2">
<h2><span class="header-section-number">14.10</span> When should I write my tests?</h2>
<p>Many programmers are passionate advocates of a practice called
<a href="glossary.html#tdd">test-driven development</a> (TDD).
Rather than writing code and then writing tests,
they write the tests first and then write just enough code to make those tests pass.
Once the code is working,
they clean it up (Chapter <a href="glossary.html#refactor"><strong>??</strong></a>) and then move on to the next task.</p>
<p>TDD’s advocates claim that working this way leads to better code in less time because:</p>
<ol style="list-style-type: decimal">
<li><p>Writing tests clarifies what the code is actually supposed to do.</p></li>
<li><p>It eliminates <a href="glossary.html#confirmation-bias">confirmation bias</a>.
If someone has just written a function,
they are predisposed to want it to be right,
so they will bias their tests towards proving that it is correct
instead of trying to uncover errors.</p></li>
<li><p>Writing tests first ensures that they actually get written.</p></li>
</ol>
<p>These arguments are plausible.
However,
studies such as <span class="citation">Fucci et al. (<a href="references.html#ref-Fucc2016">2016</a>)</span> don’t support them:
in practice,
writing tests first or last doesn’t appear to affect productivity.
What <em>does</em> have an impact is working in small, interleaved increments,
i.e.,
writing just a few lines of code and testing it before moving on
rather than writing several pages of code and then spending hours on testing.</p>
<p>So how do most data scientists figure out if their software is doing the right thing?
The answer is spot checks:
each time they produce an intermediate or final result,
they scan a table, create a chart, or inspect some summary statistics
to see if everything looks OK.
Their heuristics are usually easy to state,
like “there shouldn’t be NAs at this point” or “the age range should be reasonable”,
but applying those heuristics to a particular analysis always depends on
their evolving insight into the data in question.</p>
<p>By analogy with test-driven development,
we could call this process <a href="glossary.html#cdd">checking-driven development</a> (CDD).
Each time we add a step to our pipeline and look at its output,
we can also add a check of some kind to the pipeline to ensure that
what we are checking for remains true as the pipeline evolves or is run on other data.
This helps reusability—it’s amazing how often a one-off analysis
winds up being used many times—but the real goal is comprehensibility.
If someone can get our code and data,
run the former on the latter,
and get the same result that we did,
then our computation is reproducible,
but that doesn’t mean they can understand it.
Comments help
(either in the code or as blocks of prose in a <a href="glossary.html#computational-notebook">computational notebook</a>),
but they won’t check that assumptions and invariants hold.
And unlike comments,
runnable assertions can’t fall out of step with what the code is actually doing…</p>
<p>We also need to distinguish between testing during development
and testing in production.
During development,
our main concern is whether our answers are (close enough to) what we expect.
We do this by analyzing small datasets
and convincing ourselves that we’re getting the right answer in some ad hoc way.</p>
<p>In production,
on the other hand,
our goal is to detect cases where behavior deviates significantly from what we previously decided what right.
We want this to be automated
so that our pipeline will ring an alarm bell to tell us something is wrong
even if we’re busy working on something else.
This can happen because real data will never have exactly the same characteristics as the data we used during development.
We also need these checks because the pipeline’s environment can change:
for example,
someone could upgrade a library that one of our libraries depends on,
which could lead to us getting slightly different answers than we expected.</p>
</div>
<div id="rse-correct-float" class="section level2">
<h2><span class="header-section-number">14.11</span> Why should I be cautious when using floating-point numbers?</h2>
<p>No matter what the cause,
we need to understand exactly what we mean by “tolerance” when talking about testing.
The explanation that follows is simplified to keep it manageable;
To learn more,
please take half an hour to read <span class="citation">Goldberg (<a href="references.html#ref-Gold1991">1991</a>)</span>.</p>
<p>Finding a good representation for floating point numbers is hard:
we cannot represent an infinite number of real values with a finite set of bit patterns,
and unlike integers,
no matter what values we <em>do</em> represent,
there will be an infinite number of values between each of them that we can’t.
These days,
floating point numbers are usually represented using <a href="glossary.html#sign">sign</a>,
<a href="glossary.html#magnitude">magnitude</a> (or <a href="glossary.html#mantissa">mantissa</a>),
and an <a href="glossary.html#exponent">exponent</a>.
In a 32-bit number,
the IEEE 754 standard calls for 1 bit of sign,
23 bits for the mantissa,
and 8 bits for the exponent.
To illustrate the problems with floating point,
we will use a much simpler 5-bit representation
with 3 bits for the magnitude and 2 for the exponent.
We won’t worry about fractions or negative numbers,
since our simple representation will show off the main problems.</p>
<p>The table below shows the possible values we can represent with 5 bits.
(Real floating point representations shift values left and right to avoid the redundancy shown here,
but again,
that doesn’t affect our main point.)
Using subscripts to show the bases of numbers,
110<sub>2</sub>×2<sup>11<sub>2</sub></sup> in binary
is 6×2<sup>3</sup> in decimal,
or 48.</p>
<table>
<tr>
<th>
</th>
<th colspan="4">
Exponent
</th>
</tr>
<tr>
<th>
Mantissa
</th>
<th>
00
</th>
<th>
01
</th>
<th>
10
</th>
<th>
11
</th>
</tr>
<tr>
<th>
000
</th>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
<td>
0
</td>
</tr>
<tr>
<th>
001
</th>
<td>
1
</td>
<td>
2
</td>
<td>
4
</td>
<td>
8
</td>
</tr>
<tr>
<th>
010
</th>
<td>
2
</td>
<td>
4
</td>
<td>
8
</td>
<td>
16
</td>
</tr>
<tr>
<th>
011
</th>
<td>
3
</td>
<td>
6
</td>
<td>
12
</td>
<td>
24
</td>
</tr>
<tr>
<th>
100
</th>
<td>
4
</td>
<td>
8
</td>
<td>
16
</td>
<td>
32
</td>
</tr>
<tr>
<th>
101
</th>
<td>
5
</td>
<td>
10
</td>
<td>
20
</td>
<td>
40
</td>
</tr>
<tr>
<th>
110
</th>
<td>
6
</td>
<td>
12
</td>
<td>
24
</td>
<td>
48
</td>
</tr>
<tr>
<th>
111
</th>
<td>
7
</td>
<td>
14
</td>
<td>
28
</td>
<td>
56
</td>
</tr>
</table>
<div class="figure"><span id="fig:verify-spacing"></span>
<img src="figures/rse-correct/number-spacing.png" alt="Number Spacing"  />
<p class="caption">
Figure 14.4: Number Spacing
</p>
</div>
<p>Figure <a href="rse-correct.html#fig:verify-spacing">14.4</a> is a clearer view of some of the values our scheme can represent.
It shows that a lot of values are missing from this diagram:
for example,
it includes 8 and 10 but not 9.
This is exactly the same problem as writing out ⅓ in decimal:
we have to round that to 0.3333 or 0.3334.</p>
<p>Since this scheme has no representation for 9,
8+1 must be stored as either 8 or 10.
But if 8+1 is 8, what is 8+1+1?
If we add from the left, 8+1 is 8, plus another 1 is 8 again.
If we add from the right, 1+1 is 2, and 2+8 is 10,
so changing the order of operations can make the difference between right and wrong.
In this case,
sorting the values and adding from smallest to largest
gives us the best chance of getting the most accurate answer.
In other situations,
like inverting a matrix,
the rules are more complicated.</p>
<p>To make this more concrete,
consider the short Python program below.
It loops over the integers from 1 to 9
and puts the numbers 0.9, 0.09, 0.009, and so on in <code>vals</code>.
The sums should be 0.9, 0.99, 0.999, and so on, but are they?
To find out,
we can calculate the same values by subtracting .1 from 1,
then subtracting .01 from 1, and so on.
This should create exactly the same sequence of numbers, but it doesn’t.</p>
<div class="sourceCode" id="cb721"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb721-1" data-line-number="1">vals <span class="op">=</span> []</a>
<a class="sourceLine" id="cb721-2" data-line-number="2"><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>):</a>
<a class="sourceLine" id="cb721-3" data-line-number="3">    number <span class="op">=</span> <span class="fl">9.0</span> <span class="op">*</span> <span class="fl">10.0</span> <span class="op">**</span> <span class="op">-</span>i</a>
<a class="sourceLine" id="cb721-4" data-line-number="4">    vals.append(number)</a>
<a class="sourceLine" id="cb721-5" data-line-number="5">    total <span class="op">=</span> <span class="bu">sum</span>(vals)</a>
<a class="sourceLine" id="cb721-6" data-line-number="6">    expected <span class="op">=</span> <span class="fl">1.0</span> <span class="op">-</span> (<span class="fl">10.0</span> <span class="op">**</span> <span class="op">-</span>i)</a>
<a class="sourceLine" id="cb721-7" data-line-number="7">    diff <span class="op">=</span> total <span class="op">-</span> expected</a>
<a class="sourceLine" id="cb721-8" data-line-number="8">    <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">{:2d}</span><span class="st"> </span><span class="sc">{:22.21f}</span><span class="st"> </span><span class="sc">{:22.21f}</span><span class="st">&#39;</span>.<span class="bu">format</span>(i, total, total<span class="op">-</span>expected))</a></code></pre></div>
<pre><code>##  1 0.900000000000000022204 0.000000000000000000000
##  2 0.989999999999999991118 0.000000000000000000000
##  3 0.998999999999999999112 0.000000000000000000000
##  4 0.999900000000000011013 0.000000000000000000000
##  5 0.999990000000000045510 0.000000000000000000000
##  6 0.999999000000000082267 0.000000000000000111022
##  7 0.999999900000000052636 0.000000000000000000000
##  8 0.999999990000000060775 0.000000000000000111022
##  9 0.999999999000000028282 0.000000000000000000000</code></pre>
<p>As the output shows,
the very first value contributing to our sum is already slightly off:
even with 23 bits for a mantissa,
we cannot exactly represent 0.9 in base 2.
Doubling the size of the mantissa would reduce the error,
but we can’t ever eliminate it.</p>
<p>The good news is that 9×10<sup>-1</sup> and 1-0.1 are exactly the same:
the values might not be correct,
but at least they are consistent.
However,
some later values differ,
and sometimes accumulated error makes the result <em>more</em> accurate.</p>
<p><em>This has nothing to do with randomness.</em>
The process is completely deterministic,
so the same calculation will produce exactly the same results no matter how many times it is run.
(If we see someone run the same code on the same data with the same parameters many times and average the results,
we should ask if they know what they’re doing.)
In practice,
just as electrical engineers trust oscilloscope makers,
data scientists should trust the authors of core libraries to do the best they can.</p>
</div>
<div id="rse-correct-numeric" class="section level2">
<h2><span class="header-section-number">14.12</span> How should I write tests that involved floating-point values?</h2>
<p>The absolute spacing between the values we can represent in Figure <a href="rse-correct.html#fig:verify-spacing">14.4</a> is uneven.
However,
the relative spacing between each set of values stays the same:
the first group is separated by 1,
then the separation becomes 2,
then 4,
and then 8.
This happens because we’re multiplying the same fixed set of mantissas by ever-larger exponents,
and it leads to some useful definitions.
The <a href="glossary.html#absolute-error">absolute error</a> in an approximation is the absolute value of
the difference between the approximation and the actual value.
The <a href="glossary.html#relative-error">relative error</a> is the ratio of the absolute error to the value we’re approximating.
For example,
it we are off by 1 in approximating 8+1 and 56+1,
we have the same absolute error,
but the relative error is larger in the first case than in the second.</p>
<p>Relative error is almost always more important than absolute error when we are testing software
because it makes little sense to say that we’re off by a hundredth
when the value in question is a billionth.
<a href="glossary.html#accuracy">Accuracy</a> is how close our answer is to right,
and <a href="glossary.html#precision">precision</a> is how close repeated measurements are to each other.
We can be precise without being accurate (systematic bias),
or accurate without being precise (near the right answer but without many significant digits).</p>
<p>Accuracy is usually more important than precision for human decision making:
a relative error of 10<sup>-2</sup> (two decimal places) is good enough for most data science
because the decision a human being would make won’t change if the number changes by 1%.</p>
<p>We now come to the crux of this lesson:
if the function we are testing uses floating point numbers,
what should we compare its result to?
If we compared the sum of the first few numbers in <code>vals</code> to the “right” answer,
the answer could be <code>False</code> even though we’re doing nothing wrong.
If we compared it to a previously calculated result that we had stored somehow,
the match would be exact.</p>
<p>No one has a good generic answer to this problem
because its root cause is that we’re using approximations,
and each approximation has to be judged in context.
So what can you do to test your programs?
If you are comparing to a saved result,
and the result was saved at full precision,
you could use exact equality,
because there is no reason for the new number to differ.
However,
any change to your code,
however small,
could trigger a report of a difference.
Experience shows that these spurious warnings quickly lead developers to stop paying attention to their tests.</p>
<p>A much better approach is to write a test that checks whether numbers are the same within some <a href="glossary.html#tolerance">tolerance</a>,
which is best expressed as a relative error.
R’s <code>expect_equal</code> does this automatically.
In Python,
we can use <code>pytest.approx</code>,
which works on lists, sets, arrays, and other collections,
and can be given either relative or absolute error bounds.
To show how it works,
here’s an example with an unrealistically tight absolute bound:</p>
<div class="sourceCode" id="cb723"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb723-1" data-line-number="1"><span class="im">from</span> pytest <span class="im">import</span> approx</a>
<a class="sourceLine" id="cb723-2" data-line-number="2"></a>
<a class="sourceLine" id="cb723-3" data-line-number="3"><span class="cf">for</span> bound <span class="kw">in</span> (<span class="fl">1e-15</span>, <span class="fl">1e-16</span>):</a>
<a class="sourceLine" id="cb723-4" data-line-number="4">    vals <span class="op">=</span> []</a>
<a class="sourceLine" id="cb723-5" data-line-number="5">    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>):</a>
<a class="sourceLine" id="cb723-6" data-line-number="6">        number <span class="op">=</span> <span class="fl">9.0</span> <span class="op">*</span> <span class="fl">10.0</span> <span class="op">**</span> <span class="op">-</span>i</a>
<a class="sourceLine" id="cb723-7" data-line-number="7">        vals.append(number)</a>
<a class="sourceLine" id="cb723-8" data-line-number="8">        total <span class="op">=</span> <span class="bu">sum</span>(vals)</a>
<a class="sourceLine" id="cb723-9" data-line-number="9">        expected <span class="op">=</span> <span class="fl">1.0</span> <span class="op">-</span> (<span class="fl">10.0</span> <span class="op">**</span> <span class="op">-</span>i)</a>
<a class="sourceLine" id="cb723-10" data-line-number="10">        <span class="cf">if</span> total <span class="op">!=</span> approx(expected, <span class="bu">abs</span><span class="op">=</span>bound):</a>
<a class="sourceLine" id="cb723-11" data-line-number="11">            <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">{:22.21f}</span><span class="st"> </span><span class="sc">{:2d}</span><span class="st"> </span><span class="sc">{:22.21f}</span><span class="st"> </span><span class="sc">{:22.21f}</span><span class="st">&#39;</span>.<span class="bu">format</span>(bound, i, total, expected))</a></code></pre></div>
<pre class="text"><code>9.999999999999999790978e-17  6 0.999999000000000082267 0.999998999999999971244
9.999999999999999790978e-17  8 0.999999990000000060775 0.999999989999999949752</code></pre>
<p>This tells us that two tests pass with an absolute error of 10<sup>-15</sup>
but fail when the bound is 10<sup>-16</sup>,
both of which are unreasonably tight.
Again,
it helps to think of physical experiments:
an absolute error of 10<sup>-15</sup is one part in a trillion,
which only a handful of high-precision experiments have ever achieved.

## How can I test plots and other graphical results? {#rse-correct-plots}

Testing visualizations is hard:
any change to the dimension of the plot,
however small,
can change many pixels in a [raster image][raster-image],
and cosmetic changes such as moving the legend up a couple of pixels
will similarly cause false positives.

The simplest solution is therefore to test the data used to produce the image
rather than the image itself.
Unless we suspect that the plotting library contains bugs,
the correct data should alwyas produce the correct plot.

If we *do* need to test the generated image,
the only practical approach is to compare it to a saved image that we have visually verified.
For example,
[pytest-mpl][pytest-mpl] does this by calculating the root mean square (RMS) difference between images,
which must be below a threshold for the comparison to pass.
It also allows us to turn off comparison of text,
because font differences can throw up spurious failures.
As with choosing tolerances for floating-point tests,
our rule for picking thresholds should be,
"If images are close enough that a human being would make the same decision about meaning,
the test should pass"

Another approach is to save the plot in a [vector format][vector-image] like [SVG][svg]
that stores the coordinates of lines and other elements as text.
We can then check that the right elements are there with the right properties.
However,
this is usually unrewarding:
again,
small changes to the library or to plotting parameters can make all of the tests fail
by moving elements by a pixel or two.
Vector-based tests therefore still need to have thresholds on floating-point values.

## What data should I use to test my analyses? {#rse-correct-data}

There aren't any useful general rules for testing the calculations that our pipelines do,
since those calculations vary from one pipeline to the next,
but there *are* some rules about where to get data to test with.
The first method is [subsampling][subsampling]:
choose random subsets of your data,
analyze it,
and see how close the output is to what you get with the full dataset.
If the output doesn't converge as the sample size grows,
something is probably unstable in either the algorithm or its implementation.

When we are subsampling,
it's vital that we select a truly random subset of data
rather than (for example) the first N records or every N'th record.
If there is any ordering or grouping in our data,
those techniques can produce samples that are biased,
which may in turn invalidate some of your tests.

The other approach is to test with [synthetic data][synthetic-data].
A few lines of code can generate uniform data (i.e., data having the same values for all observations),
strongly bimodal data (which is handy for testing clustering algorithms),
or a pseudorandom sample with a known distribution.
If we do this,
we should also give our pipeline data that *doesn't* fit your expected distribution
and make sure that something, somewhere, complains.
Doing this is the data science equivalent of testing the fire alarm every once in a while.

For example,
we can write a short program to generate data that conforms to Zips' Law and use it to test our analysis.
Real data will be integers,
since words only occur or not,
and distributions will be fractional.
After a bit of experimentation,
we will use 5% relative error as our threshold for correctness:
1% excludes a valid correct case.
The test function is called `is_zipf`:

```python
from pytest import approx


RELATIVE_ERROR = 0.05


def is_zipf(hist):
    scaled = [h/hist[0] for h in hist]
    print('scaled', scaled)
    perfect = [1/(1 + i) for i in range(len(hist))]
    print('perfect', perfect)
    return scaled == approx(perfect, rel=RELATIVE_ERROR)
```

Here are three tests that synthesize data and then check it using this function
with names that suggest their purpose:

```python
def test_fit_correct():
    actual = [round(100 / (1 + i)) for i in range(10)]
    print('actual', actual)
    assert is_zipf(actual)


def test_fit_first_too_small():
    actual = [round(100 / (1 + i)) for i in range(10)]
    actual[0] /= 2
    assert not is_zipf(actual)


def test_fit_last_too_large():
    actual = [round(100 / (1 + i)) for i in range(10)]
    actual[-1] = actual[1]
    assert not is_zipf(actual)
```

## How can I test a data analysis pipeline in production? {#rse-correct-production}

An [operational test][operational-test] is one that is kept in place during production
to tell users if everything is still working as it should.
Some common operational tests include:

-   Does this pipeline stage produce the same number of output records as input records?
-   Or fewer if the stage is aggregating?
-   If two or more tables are being [joined][join],
    is the number of output records equal to the product of the number of input records?
-   Is the standard deviation smaller than the range of the data?
-   Are there any NaNs or NULLs where there aren't supposed to be?

A common pattern for such tests is to have every tool append information to a [log file][log-file]
and then have another tool check that log file after the run is over.
Logging while calculating and checking afterward makes it easy to compare values between pipeline stages,
and ensures that there's a record of why a problem was reported.

To illustrate these ideas,
here's a script that reads a document and prints one line per word:

```python
import sys

num_lines = num_words = 0
for line in sys.stdin:
    num_lines += 1
    words = [strip_punctuation(w) for w in line.strip().split()]
    num_words += len(words)
    for w in words:
        print(w)

with open('logfile.csv', 'a') as logger:
    logger.write('text_to_words.py,num_lines,{}\n'.format(num_lines))
    logger.write('text_to_words.py,num_words,{}\n'.format(num_words))
```

Here's a complementary script that counts how often words appear in its input:

```python
import sys

num_words = 0
count = {}
for word in sys.stdin:
    num_words += 1
    count[word] = count.get(word, 0) + 1

for word in count:
    print('{} {}', word, count[word])

with open('logfile.csv', 'a') as logger:
    logger.write('word_count.py,num_words,{}\n'.format(num_words))
    logger.write('word_count.py,num_distinct,{}\n'.format(len(count)))
```

Both of these scripts write records to `logfile.csv`.
When we look at that file after a typical run,
we see records like this:

```text
text_to_words.py,num_lines,431
text_to_words.py,num_words,2554
word_count.py,num_words,2554
word_count.py,num_distinct,1167
```

We can then use a small program to check that everything went as planned:

```python
import sys
import csv

data = {}
for row in csv.reader(sys.stdin):
    data[(row[0], row[1])] = int(row[2])

assert data[('text_to_words.py', 'num_lines')] <= data['word_count.py', 'num_words')]
assert data[('text_to_words.py', 'num_words')] == data['word_count.py', 'num_words')]
assert data[('word_count.py', 'num_words')] >= data[‘word_count.py’, ‘num_distinct’)]
```</p>
<p>Tests like these are simple to write
and catch a surprising number of errors,
particularly when the person using the pipeline isn’t its original author.</p>
<blockquote>
<p><strong>Validating Pipelines</strong></p>
<p>There are several libraries for validating data pipelines in R,
including <a href="https://cran.r-project.org/web/packages/assertr/index.html">assertr</a>,
<a href="https://cran.r-project.org/web/packages/checkr/index.html">checkr</a>,
and <a href="https://cran.r-project.org/web/packages/validate/index.html">validate</a>.</p>
</blockquote>
</div>
<div id="rse-correct-infer" class="section level2">
<h2><span class="header-section-number">14.13</span> How can I infer and check properties of my data?</h2>
<p>Writing tests for the properties of data can be tedious,
but some of the work can be automated.
In particular,
the <a href="http://www.tdda.info/">TDDA library</a> for Python can infer test rules from data,
such as “<code>age</code> should be less than 100”,
“<code>Date</code> should be sorted in ascending order”,
or “<code>StartDate</code> should be less than or equal to <code>EndDate</code>”.
The library comes with a command-line tool called <code>tdda</code>,
so that the command:</p>
<pre class="shell"><code>$ tdda discover training-data.csv properties.tdda</code></pre>
<p>infers rules from data,
while the command:</p>
<pre class="shell"><code>$ tdda verify actual-data.csv properties.tdda</code></pre>
<p>verifies data against those rules.
The inferred rules are stored as <a href="glossary.html#json">JSON</a>,
which is (sort of) readable with a bit of practice.
Reading the generated rules is a good way to get to know your data,
and modifying values
(e.g., changing the maximum allowed value for <code>Grade</code> from the observed 94.5 to the actual 100.0)
is an easy way to make constraints explicit.
For example,
if we run:</p>
<pre class="shell"><code>$ tdda discover elements92.csv elements.tdda</code></pre>
<p>(which contains information about the first 92 elements)
the output includes:</p>
<div class="sourceCode" id="cb728"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb728-1" data-line-number="1"><span class="er">&quot;fields&quot;:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb728-2" data-line-number="2">    <span class="dt">&quot;Name&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb728-3" data-line-number="3">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;string&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-4" data-line-number="4">        <span class="dt">&quot;min_length&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-5" data-line-number="5">        <span class="dt">&quot;max_length&quot;</span><span class="fu">:</span> <span class="dv">12</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-6" data-line-number="6">        <span class="dt">&quot;max_nulls&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-7" data-line-number="7">        <span class="dt">&quot;no_duplicates&quot;</span><span class="fu">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb728-8" data-line-number="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb728-9" data-line-number="9">    <span class="dt">&quot;Symbol&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb728-10" data-line-number="10">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;string&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-11" data-line-number="11">        <span class="dt">&quot;min_length&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-12" data-line-number="12">        <span class="dt">&quot;max_length&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-13" data-line-number="13">        <span class="dt">&quot;max_nulls&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-14" data-line-number="14">        <span class="dt">&quot;no_duplicates&quot;</span><span class="fu">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb728-15" data-line-number="15">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb728-16" data-line-number="16">    <span class="dt">&quot;ChemicalSeries&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb728-17" data-line-number="17">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;string&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-18" data-line-number="18">        <span class="dt">&quot;min_length&quot;</span><span class="fu">:</span> <span class="dv">7</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-19" data-line-number="19">        <span class="dt">&quot;max_length&quot;</span><span class="fu">:</span> <span class="dv">20</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-20" data-line-number="20">        <span class="dt">&quot;max_nulls&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-21" data-line-number="21">        <span class="dt">&quot;allowed_values&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb728-22" data-line-number="22">            <span class="st">&quot;Actinoid&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-23" data-line-number="23">            <span class="st">&quot;Alkali metal&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-24" data-line-number="24">            <span class="st">&quot;Alkaline earth metal&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-25" data-line-number="25">            <span class="st">&quot;Halogen&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-26" data-line-number="26">            <span class="st">&quot;Lanthanoid&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-27" data-line-number="27">            <span class="st">&quot;Metalloid&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-28" data-line-number="28">            <span class="st">&quot;Noble gas&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-29" data-line-number="29">            <span class="st">&quot;Nonmetal&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-30" data-line-number="30">            <span class="st">&quot;Poor metal&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb728-31" data-line-number="31">            <span class="st">&quot;Transition metal&quot;</span></a>
<a class="sourceLine" id="cb728-32" data-line-number="32">        <span class="ot">]</span></a>
<a class="sourceLine" id="cb728-33" data-line-number="33">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb728-34" data-line-number="34">    <span class="dt">&quot;AtomicWeight&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb728-35" data-line-number="35">        <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;real&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-36" data-line-number="36">        <span class="dt">&quot;min&quot;</span><span class="fu">:</span> <span class="fl">1.007947</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-37" data-line-number="37">        <span class="dt">&quot;max&quot;</span><span class="fu">:</span> <span class="fl">238.028913</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-38" data-line-number="38">        <span class="dt">&quot;sign&quot;</span><span class="fu">:</span> <span class="st">&quot;positive&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb728-39" data-line-number="39">        <span class="dt">&quot;max_nulls&quot;</span><span class="fu">:</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb728-40" data-line-number="40">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb728-41" data-line-number="41">    <span class="er">...more...</span></a>
<a class="sourceLine" id="cb728-42" data-line-number="42"><span class="fu">}</span></a></code></pre></div>
<p>We can apply these inferred rules to all elements up to number 118
using the <code>-7</code> option to get pure ASCII output
and the <code>-f</code> option to show only fields with failures:</p>
<pre class="shell"><code>$ tdda verify -f elements118.csv elements.tdda</code></pre>
<pre class="text"><code>FIELDS:

Z: 1 failure  5 passes  type ✓  min ✓  max ✗  sign ✓  max_nulls ✓  no_duplicates ✓

Name: 1 failure  4 passes  type ✓  min_length ✓  max_length ✗  max_nulls ✓  no_duplicates ✓

Symbol: 1 failure  4 passes  type ✓  min_length ✓  max_length ✗  max_nulls ✓  no_duplicates ✓

AtomicWeight: 2 failures  3 passes  type ✓  min ✓  max ✗  sign ✓  max_nulls ✗

...other reports...

SUMMARY:

Constraints passing: 57
Constraints failing: 15</code></pre>
<p>Another way to use TDDA is to generate constraints for two datasets and then look at differences
in order to see how similar the datasets are to each other.
This is especially useful if the constraint file is put under version control.</p>
</div>
<div id="rse-correct-summary" class="section level2">
<h2><span class="header-section-number">14.14</span> Summary</h2>
<div class="figure"><span id="fig:rse-correct-concept"></span>
<img src="figures/rse-correct/concept.svg" alt="Correctness Concept Map"  />
<p class="caption">
Figure 14.5: Correctness Concept Map
</p>
</div>
</div>
<div id="rse-correct-exercises" class="section level2">
<h2><span class="header-section-number">14.15</span> Exercises</h2>
<div id="rse-correct-ex-numsign" class="section level3">
<h3><span class="header-section-number">14.15.1</span> Fixing <code>numSign</code></h3>
<ol style="list-style-type: decimal">
<li>Fix the implementation of <code>numSign</code> in either R or Python so that all tests will succeed.</li>
<li>Re-run the tests to confirm that the function is working.</li>
<li>Extend the function so that it does something sensible when passed a string or an empty list.
Write functions to check your changes.</li>
</ol>
</div>
<div id="rse-correct-ex-simple-calc" class="section level3">
<h3><span class="header-section-number">14.15.2</span> Checking simple calculations</h3>
<p>Create a new test by running <code>usethis::use_test(&quot;simple-arithmetic&quot;)</code>.
Copy the code below into the newly created test file and fill in the blanks
so that it runs correctly.</p>
<div class="sourceCode" id="cb731"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb731-1" data-line-number="1"><span class="kw">context</span>(<span class="st">&quot;Check simple calculations&quot;</span>)</a>
<a class="sourceLine" id="cb731-2" data-line-number="2"></a>
<a class="sourceLine" id="cb731-3" data-line-number="3"><span class="kw">test_that</span>(<span class="st">&quot;plus and minus give correct outputs&quot;</span>, {</a>
<a class="sourceLine" id="cb731-4" data-line-number="4">  <span class="kw">expect_identical</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb731-5" data-line-number="5">  <span class="kw">___</span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb731-6" data-line-number="6">  <span class="kw">expect_identical</span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="ot">NA</span>, __)</a>
<a class="sourceLine" id="cb731-7" data-line-number="7">  <span class="kw">expect_identical</span>(___ <span class="op">-</span><span class="st"> </span>___, <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb731-8" data-line-number="8">})</a></code></pre></div>
</div>
<div id="rse-correct-ex-purpose" class="section level3">
<h3><span class="header-section-number">14.15.3</span> Explain the purpose of tests</h3>
<p>Based on the contents of the tests below,
replace the blanks with appropriate <code>context()</code> and <code>test_that()</code> messages.</p>
<div class="sourceCode" id="cb732"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb732-1" data-line-number="1"><span class="kw">context</span>(<span class="st">&quot;___&quot;</span>)</a>
<a class="sourceLine" id="cb732-2" data-line-number="2"></a>
<a class="sourceLine" id="cb732-3" data-line-number="3"><span class="kw">test_that</span>(<span class="st">&quot;___&quot;</span>, {</a>
<a class="sourceLine" id="cb732-4" data-line-number="4">  <span class="kw">expect_identical</span>(<span class="kw">sum</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)), <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb732-5" data-line-number="5">  <span class="kw">expect_identical</span>(<span class="kw">sum</span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">2</span>)), <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb732-6" data-line-number="6">})</a>
<a class="sourceLine" id="cb732-7" data-line-number="7"></a>
<a class="sourceLine" id="cb732-8" data-line-number="8"><span class="kw">test_that</span>(<span class="st">&quot;___&quot;</span>, {</a>
<a class="sourceLine" id="cb732-9" data-line-number="9">  <span class="kw">expect_identical</span>(<span class="kw">mean</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)), <span class="fl">1.5</span>)</a>
<a class="sourceLine" id="cb732-10" data-line-number="10">  <span class="kw">expect_identical</span>(<span class="kw">mean</span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">2</span>)), <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb732-11" data-line-number="11">})</a></code></pre></div>
</div>
<div id="rse-correct-ex-count-words" class="section level3">
<h3><span class="header-section-number">14.15.4</span> Testing <code>count_words</code></h3>
<ol style="list-style-type: decimal">
<li>Create a new test file.</li>
<li>Write unit tests for <code>count_words</code> to check the following:
<ul>
<li>Returns zero when given an empty string.</li>
<li>Returns <code>NA</code> when given <code>NA</code>.</li>
<li>Returns 2 when given two words separated by a space.</li>
<li>Returns 2 when given two words separated by a dash <code>-</code>.</li>
</ul></li>
</ol>
</div>
<div id="rse-correct-ex-check-errors" class="section level3">
<h3><span class="header-section-number">14.15.5</span> Checking for errors</h3>
<p>Add new unit tests for the word-counting function
to check that it raises errors when it should.</p>
</div>
</div>
<div id="rse-correct-keypoints" class="section level2">
<h2><span class="header-section-number">14.16</span> Key Points</h2>
<ul>
<li>Testing can only ever show that software has flaws, not that it is correct.</li>
<li>The real purpose is to convince people (including yourself) that software is correct enough
and to make tolerances on ‘enough’ explicit.</li>
<li>A testing suite finds and runs tests written in a prescribed fashion and reports their results.</li>
<li>A unit test can pass (work as expected),
fail (meaning the software under test is flawed),
or produce an error (meaning the test itself is flawed).</li>
<li>Every unit test should be independent of each other so results are comprehensible, contained, and reliable.</li>
<li>Tests should be built to test that the software fails when and as it is supposed.</li>
<li>Tests can usefully exercise particular pieces of functionality (unit tests)
or larger pieces of the code base demonstrating interactions between units (integration tests)</li>
<li>Tests should verify software (make sure it does what it’s supposed to)
and also validate it (make sure it produces the right answers).</li>
<li>Data science is normally concerned with approximate correctness of solutions.</li>
<li>Stochastic statistical variation and deterministic floating point approximations both make answers approximately correct.</li>
<li>Check that parametric or non-parametric statistics of data
do not differ from saved values by more than a specified tolerance.</li>
<li>Infer constraints on data and then check that subsequent data sets obey these constraints.</li>
<li>Test the data structures used in plotting rather than the plots themselves.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rse-package-py.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rse-publish.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/merely-useful/merely-useful.github.io/edit/master/rse-correct.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["rse.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
