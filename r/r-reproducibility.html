<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Reproducibility | Merely Useful: Novice R</title>
  <meta name="description" content="Chapter 6 Reproducibility | Merely Useful: Novice R" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Reproducibility | Merely Useful: Novice R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="merely-useful/merely-useful.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Reproducibility | Merely Useful: Novice R" />
  
  
  

<meta name="author" content="Madeleine Bonsma-Fisher, Kate Hertweck, Damien Irving, Luke Johnston, Christina Koch, Sara Mahallati, Brandeis Marshall, Joel Ostblom, Elizabeth Wickes, Charlotte Wickham, and Greg Wilson" />


<meta name="date" content="2019-11-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="practice.html"/>
<link rel="next" href="r-data-manipulation.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Merely Useful</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview-against"><i class="fa fa-check"></i><b>1.1</b> Why isn’t all of this normal already?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#overview-ack"><i class="fa fa-check"></i><b>1.2</b> Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="novice-goals.html"><a href="novice-goals.html"><i class="fa fa-check"></i><b>2</b> Novice Goals</a><ul>
<li class="chapter" data-level="2.1" data-path="novice-goals.html"><a href="novice-goals.html#personas"><i class="fa fa-check"></i><b>2.1</b> Personas</a><ul>
<li class="chapter" data-level="2.1.1" data-path="novice-goals.html"><a href="novice-goals.html#anya"><i class="fa fa-check"></i><b>2.1.1</b> Anya</a></li>
<li class="chapter" data-level="2.1.2" data-path="novice-goals.html"><a href="novice-goals.html#exton"><i class="fa fa-check"></i><b>2.1.2</b> Exton</a></li>
<li class="chapter" data-level="2.1.3" data-path="novice-goals.html"><a href="novice-goals.html#irwin"><i class="fa fa-check"></i><b>2.1.3</b> Irwin</a></li>
<li class="chapter" data-level="2.1.4" data-path="novice-goals.html"><a href="novice-goals.html#camilla"><i class="fa fa-check"></i><b>2.1.4</b> Camilla</a></li>
<li class="chapter" data-level="2.1.5" data-path="novice-goals.html"><a href="novice-goals.html#jordan"><i class="fa fa-check"></i><b>2.1.5</b> Jordan</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="novice-goals.html"><a href="novice-goals.html#getting-started"><i class="fa fa-check"></i><b>2.2</b> Getting started</a></li>
<li class="chapter" data-level="2.3" data-path="novice-goals.html"><a href="novice-goals.html#data-manipulation"><i class="fa fa-check"></i><b>2.3</b> Data manipulation</a></li>
<li class="chapter" data-level="2.4" data-path="novice-goals.html"><a href="novice-goals.html#plotting"><i class="fa fa-check"></i><b>2.4</b> Plotting</a></li>
<li class="chapter" data-level="2.5" data-path="novice-goals.html"><a href="novice-goals.html#development"><i class="fa fa-check"></i><b>2.5</b> Development</a></li>
<li class="chapter" data-level="2.6" data-path="novice-goals.html"><a href="novice-goals.html#data-analysis"><i class="fa fa-check"></i><b>2.6</b> Data analysis</a></li>
<li class="chapter" data-level="2.7" data-path="novice-goals.html"><a href="novice-goals.html#version-control"><i class="fa fa-check"></i><b>2.7</b> Version control</a></li>
<li class="chapter" data-level="2.8" data-path="novice-goals.html"><a href="novice-goals.html#publishing"><i class="fa fa-check"></i><b>2.8</b> Publishing</a></li>
<li class="chapter" data-level="2.9" data-path="novice-goals.html"><a href="novice-goals.html#reproducibility"><i class="fa fa-check"></i><b>2.9</b> Reproducibility</a></li>
<li class="chapter" data-level="2.10" data-path="novice-goals.html"><a href="novice-goals.html#collaboration"><i class="fa fa-check"></i><b>2.10</b> Collaboration</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-intro.html"><a href="r-intro.html"><i class="fa fa-check"></i><b>3</b> Introduction</a><ul>
<li class="chapter" data-level="3.1" data-path="r-intro.html"><a href="r-intro.html#r-intro-personas"><i class="fa fa-check"></i><b>3.1</b> Who are these lessons for?</a><ul>
<li class="chapter" data-level="3.1.1" data-path="r-intro.html"><a href="r-intro.html#exton-excel"><i class="fa fa-check"></i><b>3.1.1</b> Exton Excel</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-intro.html"><a href="r-intro.html#nina-newbie"><i class="fa fa-check"></i><b>3.1.2</b> Nina Newbie</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-intro.html"><a href="r-intro.html#r-intro-goals"><i class="fa fa-check"></i><b>3.2</b> What will these lessons teach you?</a><ul>
<li class="chapter" data-level="3.2.1" data-path="r-intro.html"><a href="r-intro.html#r-intro-prereq"><i class="fa fa-check"></i><b>3.2.1</b> What do you need to have and know to start?</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="r-intro.html"><a href="r-intro.html#r-intro-example"><i class="fa fa-check"></i><b>3.3</b> What examples will we use?</a></li>
<li class="chapter" data-level="3.4" data-path="r-intro.html"><a href="r-intro.html#whats-the-big-picture-r-intro-bigpicture"><i class="fa fa-check"></i><b>3.4</b> What’s the big picture? (#r-intro-bigpicture}</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-getting-started.html"><a href="r-getting-started.html"><i class="fa fa-check"></i><b>4</b> Getting Started with R</a><ul>
<li class="chapter" data-level="4.1" data-path="r-getting-started.html"><a href="r-getting-started.html#r-getting-started-questions"><i class="fa fa-check"></i><b>4.1</b> Questions</a></li>
<li class="chapter" data-level="4.2" data-path="r-getting-started.html"><a href="r-getting-started.html#r-getting-started-rstudio"><i class="fa fa-check"></i><b>4.2</b> Introduction to RStudio</a></li>
<li class="chapter" data-level="4.3" data-path="r-getting-started.html"><a href="r-getting-started.html#r-getting-started-console"><i class="fa fa-check"></i><b>4.3</b> Running Code in the Console</a></li>
<li class="chapter" data-level="4.4" data-path="r-getting-started.html"><a href="r-getting-started.html#r-getting-started-script"><i class="fa fa-check"></i><b>4.4</b> Running Code via Scripts</a></li>
<li class="chapter" data-level="4.5" data-path="r-getting-started.html"><a href="r-getting-started.html#r-getting-started-objects"><i class="fa fa-check"></i><b>4.5</b> Assigning and Recalling Objects</a></li>
<li class="chapter" data-level="4.6" data-path="r-getting-started.html"><a href="r-getting-started.html#r-viewing-installed-packages"><i class="fa fa-check"></i><b>4.6</b> Viewing installed packages</a></li>
<li class="chapter" data-level="4.7" data-path="r-getting-started.html"><a href="r-getting-started.html#r-getting-started-rstudio-help"><i class="fa fa-check"></i><b>4.7</b> Getting Help in RStudio</a></li>
<li class="chapter" data-level="4.8" data-path="r-getting-started.html"><a href="r-getting-started.html#r-getting-started-web-help"><i class="fa fa-check"></i><b>4.8</b> Getting Help Online</a></li>
<li class="chapter" data-level="4.9" data-path="r-getting-started.html"><a href="r-getting-started.html#exercises"><i class="fa fa-check"></i><b>4.9</b> Exercises</a></li>
<li class="chapter" data-level="4.10" data-path="r-getting-started.html"><a href="r-getting-started.html#r-getting-started-keypoints"><i class="fa fa-check"></i><b>4.10</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="practice.html"><a href="practice.html"><i class="fa fa-check"></i><b>5</b> Practice</a><ul>
<li class="chapter" data-level="5.1" data-path="practice.html"><a href="practice.html#working-with-a-single-tidy-table"><i class="fa fa-check"></i><b>5.1</b> Working with a single tidy table</a></li>
<li class="chapter" data-level="5.2" data-path="practice.html"><a href="practice.html#working-with-grouped-data"><i class="fa fa-check"></i><b>5.2</b> Working with grouped data</a></li>
<li class="chapter" data-level="5.3" data-path="practice.html"><a href="practice.html#creating-charts"><i class="fa fa-check"></i><b>5.3</b> Creating charts</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-reproducibility.html"><a href="r-reproducibility.html"><i class="fa fa-check"></i><b>6</b> Reproducibility</a><ul>
<li class="chapter" data-level="6.1" data-path="r-reproducibility.html"><a href="r-reproducibility.html#r-reproducibility-projects"><i class="fa fa-check"></i><b>6.1</b> Project organization</a><ul>
<li class="chapter" data-level="6.1.1" data-path="r-reproducibility.html"><a href="r-reproducibility.html#creating-your-first-project"><i class="fa fa-check"></i><b>6.1.1</b> Creating your first project</a></li>
<li class="chapter" data-level="6.1.2" data-path="r-reproducibility.html"><a href="r-reproducibility.html#exercise-better-file-naming"><i class="fa fa-check"></i><b>6.1.2</b> Exercise: Better file naming</a></li>
<li class="chapter" data-level="6.1.3" data-path="r-reproducibility.html"><a href="r-reproducibility.html#should-you-keep-your-data-under-version-control"><i class="fa fa-check"></i><b>6.1.3</b> Should you keep your data under version control?</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="r-reproducibility.html"><a href="r-reproducibility.html#r-reproducibility-reusability"><i class="fa fa-check"></i><b>6.2</b> Reusability</a><ul>
<li class="chapter" data-level="6.2.1" data-path="r-reproducibility.html"><a href="r-reproducibility.html#keeping-a-clean-slate"><i class="fa fa-check"></i><b>6.2.1</b> Keeping a clean slate</a></li>
<li class="chapter" data-level="6.2.2" data-path="r-reproducibility.html"><a href="r-reproducibility.html#packages-data-and-file-paths"><i class="fa fa-check"></i><b>6.2.2</b> Packages, data, and file paths</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="r-reproducibility.html"><a href="r-reproducibility.html#r-reproducibility-readability"><i class="fa fa-check"></i><b>6.3</b> Readability</a><ul>
<li class="chapter" data-level="6.3.1" data-path="r-reproducibility.html"><a href="r-reproducibility.html#exercise-make-the-code-more-readable"><i class="fa fa-check"></i><b>6.3.1</b> Exercise: Make the code more readable</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-reproducibility.html"><a href="r-reproducibility.html#automatic-styling-with-styler"><i class="fa fa-check"></i><b>6.3.2</b> Automatic styling with styler</a></li>
<li class="chapter" data-level="6.3.3" data-path="r-reproducibility.html"><a href="r-reproducibility.html#exercise-use-styler-to-fix-code-formatting"><i class="fa fa-check"></i><b>6.3.3</b> Exercise: Use styler to fix code formatting</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="r-reproducibility.html"><a href="r-reproducibility.html#r-reproducibility-markdown"><i class="fa fa-check"></i><b>6.4</b> Integrating text, code, and results</a><ul>
<li class="chapter" data-level="6.4.1" data-path="r-reproducibility.html"><a href="r-reproducibility.html#markdown"><i class="fa fa-check"></i><b>6.4.1</b> Markdown</a></li>
<li class="chapter" data-level="6.4.2" data-path="r-reproducibility.html"><a href="r-reproducibility.html#r-markdown"><i class="fa fa-check"></i><b>6.4.2</b> R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="r-reproducibility.html"><a href="r-reproducibility.html#r-reproducibility-keypoints"><i class="fa fa-check"></i><b>6.5</b> Key Points</a></li>
<li class="chapter" data-level="6.6" data-path="r-reproducibility.html"><a href="r-reproducibility.html#r-reproducibility-resources"><i class="fa fa-check"></i><b>6.6</b> Additional learning resources and material</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html"><i class="fa fa-check"></i><b>7</b> Data Manipulation</a><ul>
<li class="chapter" data-level="7.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#r-data-manipulation-questions"><i class="fa fa-check"></i><b>7.1</b> Questions</a></li>
<li class="chapter" data-level="7.2" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#motivation"><i class="fa fa-check"></i><b>7.2</b> Motivation</a><ul>
<li class="chapter" data-level="7.2.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-point-and-click-data-manipulation"><i class="fa fa-check"></i><b>7.2.1</b> Exercise: Point and click data manipulation</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exploring-data-in-the-console"><i class="fa fa-check"></i><b>7.3</b> Exploring data in the console</a><ul>
<li class="chapter" data-level="7.3.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#re-arranging-rows"><i class="fa fa-check"></i><b>7.3.1</b> Re-arranging rows</a></li>
<li class="chapter" data-level="7.3.2" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-arranging-character-strings"><i class="fa fa-check"></i><b>7.3.2</b> Exercise: Arranging character strings</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#how-can-i-select-subsets-of-my-data"><i class="fa fa-check"></i><b>7.4</b> How can I select subsets of my data?</a><ul>
<li class="chapter" data-level="7.4.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#selecting-columns"><i class="fa fa-check"></i><b>7.4.1</b> Selecting columns</a></li>
<li class="chapter" data-level="7.4.2" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-find-the-latest-license-issue-date"><i class="fa fa-check"></i><b>7.4.2</b> Exercise: Find the latest license issue date</a></li>
<li class="chapter" data-level="7.4.3" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#combining-operations-with-the-pipe"><i class="fa fa-check"></i><b>7.4.3</b> Combining operations with the pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="7.4.4" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-reading-aloud"><i class="fa fa-check"></i><b>7.4.4</b> Exercise: Reading aloud</a></li>
<li class="chapter" data-level="7.4.5" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-using-the-pipe"><i class="fa fa-check"></i><b>7.4.5</b> Exercise: Using the pipe</a></li>
<li class="chapter" data-level="7.4.6" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#filtering-to-keep-a-subset-of-rows"><i class="fa fa-check"></i><b>7.4.6</b> Filtering to keep a subset of rows</a></li>
<li class="chapter" data-level="7.4.7" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-enterprising-dogs"><i class="fa fa-check"></i><b>7.4.7</b> Exercise: Enterprising dogs</a></li>
<li class="chapter" data-level="7.4.8" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-expired-licenses"><i class="fa fa-check"></i><b>7.4.8</b> Exercise: Expired Licenses</a></li>
<li class="chapter" data-level="7.4.9" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#more-complicated-expressions"><i class="fa fa-check"></i><b>7.4.9</b> More complicated expressions</a></li>
<li class="chapter" data-level="7.4.10" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-expired-licenses-1"><i class="fa fa-check"></i><b>7.4.10</b> Exercise: Expired Licenses</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#how-can-i-calculate-new-values"><i class="fa fa-check"></i><b>7.5</b> How can I calculate new values?</a><ul>
<li class="chapter" data-level="7.5.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-ages-of-dogs"><i class="fa fa-check"></i><b>7.5.1</b> Exercise: Ages of dogs</a></li>
<li class="chapter" data-level="7.5.2" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-unknown-breeds"><i class="fa fa-check"></i><b>7.5.2</b> Exercise: Unknown breeds</a></li>
<li class="chapter" data-level="7.5.3" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-name-length"><i class="fa fa-check"></i><b>7.5.3</b> Exercise: Name length</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#how-can-i-tell-whats-gone-wrong-in-my-programs"><i class="fa fa-check"></i><b>7.6</b> How can I tell what’s gone wrong in my programs?</a><ul>
<li class="chapter" data-level="7.6.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#common-syntax-errors"><i class="fa fa-check"></i><b>7.6.1</b> Common syntax errors</a></li>
<li class="chapter" data-level="7.6.2" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-syntax-errors"><i class="fa fa-check"></i><b>7.6.2</b> Exercise: Syntax errors</a></li>
<li class="chapter" data-level="7.6.3" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#common-runtime-errors"><i class="fa fa-check"></i><b>7.6.3</b> Common runtime errors</a></li>
<li class="chapter" data-level="7.6.4" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-object-not-found"><i class="fa fa-check"></i><b>7.6.4</b> Exercise: <code>object not found</code></a></li>
<li class="chapter" data-level="7.6.5" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#warnings-and-messages"><i class="fa fa-check"></i><b>7.6.5</b> Warnings and messages</a></li>
<li class="chapter" data-level="7.6.6" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#what-do-i-do-when-i-get-an-error-i-cant-fix"><i class="fa fa-check"></i><b>7.6.6</b> What do I do when I get an <code>Error</code> I can’t fix?</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#how-can-i-operate-on-subsets-of-my-data"><i class="fa fa-check"></i><b>7.7</b> How can I operate on subsets of my data?</a><ul>
<li class="chapter" data-level="7.7.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-dog-birth-months"><i class="fa fa-check"></i><b>7.7.1</b> Exercise: Dog birth months</a></li>
<li class="chapter" data-level="7.7.2" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-order-matters"><i class="fa fa-check"></i><b>7.7.2</b> Exercise: Order matters?</a></li>
<li class="chapter" data-level="7.7.3" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-the-five-boroughs"><i class="fa fa-check"></i><b>7.7.3</b> Exercise: the five boroughs</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#how-can-i-read-my-own-tabular-data-into-r"><i class="fa fa-check"></i><b>7.8</b> How can I read my own tabular data into R?</a><ul>
<li class="chapter" data-level="7.8.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#what-is-tabular-data"><i class="fa fa-check"></i><b>7.8.1</b> What is tabular data?</a></li>
<li class="chapter" data-level="7.8.2" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#importing-csv-data-into-r"><i class="fa fa-check"></i><b>7.8.2</b> Importing CSV data into R</a></li>
<li class="chapter" data-level="7.8.3" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-import-visited.csv"><i class="fa fa-check"></i><b>7.8.3</b> Exercise: Import <code>visited.csv</code></a></li>
<li class="chapter" data-level="7.8.4" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise-import-irs-tax-return-data-for-new-york-city"><i class="fa fa-check"></i><b>7.8.4</b> Exercise: Import IRS tax return data for New York City</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#how-can-i-save-my-results"><i class="fa fa-check"></i><b>7.9</b> How can I save my results?</a><ul>
<li class="chapter" data-level="7.9.1" data-path="r-data-manipulation.html"><a href="r-data-manipulation.html#exercise"><i class="fa fa-check"></i><b>7.9.1</b> Exercise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-publishing.html"><a href="r-publishing.html"><i class="fa fa-check"></i><b>8</b> Publishing</a><ul>
<li class="chapter" data-level="8.1" data-path="r-publishing.html"><a href="r-publishing.html#r-publishing-questions"><i class="fa fa-check"></i><b>8.1</b> Questions</a></li>
<li class="chapter" data-level="8.2" data-path="r-publishing.html"><a href="r-publishing.html#why-should-i-share-my-work-on-the-internet"><i class="fa fa-check"></i><b>8.2</b> Why should I share my work on the internet?</a></li>
<li class="chapter" data-level="8.3" data-path="r-publishing.html"><a href="r-publishing.html#what-does-it-take-to-get-a-webpage-online"><i class="fa fa-check"></i><b>8.3</b> What does it take to get a webpage online?</a></li>
<li class="chapter" data-level="8.4" data-path="r-publishing.html"><a href="r-publishing.html#how-do-i-get-my-work-on-the-web"><i class="fa fa-check"></i><b>8.4</b> How do I get my work on the web?</a><ul>
<li class="chapter" data-level="8.4.1" data-path="r-publishing.html"><a href="r-publishing.html#a-starting-point"><i class="fa fa-check"></i><b>8.4.1</b> A starting point</a></li>
<li class="chapter" data-level="8.4.2" data-path="r-publishing.html"><a href="r-publishing.html#html-files"><i class="fa fa-check"></i><b>8.4.2</b> HTML files</a></li>
<li class="chapter" data-level="8.4.3" data-path="r-publishing.html"><a href="r-publishing.html#setting-up-your-repo-to-have-a-web-page"><i class="fa fa-check"></i><b>8.4.3</b> Setting up your repo to have a web page</a></li>
<li class="chapter" data-level="8.4.4" data-path="r-publishing.html"><a href="r-publishing.html#getting-a-default-page-to-display-when-people-visit-the-project-site"><i class="fa fa-check"></i><b>8.4.4</b> Getting a default page to display when people visit the project site</a></li>
<li class="chapter" data-level="8.4.5" data-path="r-publishing.html"><a href="r-publishing.html#what-does-it-take-to-get-your-work-on-a-webpage"><i class="fa fa-check"></i><b>8.4.5</b> What does it take to get your work on a webpage?</a></li>
<li class="chapter" data-level="8.4.6" data-path="r-publishing.html"><a href="r-publishing.html#exercise-customize-index.rmd"><i class="fa fa-check"></i><b>8.4.6</b> Exercise: Customize <code>index.Rmd</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="r-publishing.html"><a href="r-publishing.html#how-do-i-link-to-other-pages-files-or-images"><i class="fa fa-check"></i><b>8.5</b> How do I link to other pages, files or images?</a><ul>
<li class="chapter" data-level="8.5.1" data-path="r-publishing.html"><a href="r-publishing.html#linking-to-other-pages"><i class="fa fa-check"></i><b>8.5.1</b> Linking to other pages</a></li>
<li class="chapter" data-level="8.5.2" data-path="r-publishing.html"><a href="r-publishing.html#exercise-relative-links"><i class="fa fa-check"></i><b>8.5.2</b> Exercise: Relative links</a></li>
<li class="chapter" data-level="8.5.3" data-path="r-publishing.html"><a href="r-publishing.html#exercise-add-links-to-index.html"><i class="fa fa-check"></i><b>8.5.3</b> Exercise: Add links to <code>index.html</code></a></li>
<li class="chapter" data-level="8.5.4" data-path="r-publishing.html"><a href="r-publishing.html#linking-to-sections-within-a-page"><i class="fa fa-check"></i><b>8.5.4</b> Linking to sections within a page</a></li>
<li class="chapter" data-level="8.5.5" data-path="r-publishing.html"><a href="r-publishing.html#exercise-add-and-link-to-a-section-in-report.rmd"><i class="fa fa-check"></i><b>8.5.5</b> Exercise: Add and link to a section in <code>report.Rmd</code></a></li>
<li class="chapter" data-level="8.5.6" data-path="r-publishing.html"><a href="r-publishing.html#including-images"><i class="fa fa-check"></i><b>8.5.6</b> Including images</a></li>
<li class="chapter" data-level="8.5.7" data-path="r-publishing.html"><a href="r-publishing.html#exercise-add-an-image-to-index.html"><i class="fa fa-check"></i><b>8.5.7</b> Exercise: Add an image to <code>index.html</code></a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="r-publishing.html"><a href="r-publishing.html#exercise-add-a-website-to-an-existing-project"><i class="fa fa-check"></i><b>8.6</b> Exercise: Add a website to an existing project</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i><b>A</b> License</a></li>
<li class="chapter" data-level="B" data-path="conduct.html"><a href="conduct.html"><i class="fa fa-check"></i><b>B</b> Code of Conduct</a><ul>
<li class="chapter" data-level="B.1" data-path="conduct.html"><a href="conduct.html#conduct-standards"><i class="fa fa-check"></i><b>B.1</b> Our Standards</a></li>
<li class="chapter" data-level="B.2" data-path="conduct.html"><a href="conduct.html#conduct-responsibilities"><i class="fa fa-check"></i><b>B.2</b> Our Responsibilities</a></li>
<li class="chapter" data-level="B.3" data-path="conduct.html"><a href="conduct.html#conduct-scope"><i class="fa fa-check"></i><b>B.3</b> Scope</a></li>
<li class="chapter" data-level="B.4" data-path="conduct.html"><a href="conduct.html#conduct-enforcement"><i class="fa fa-check"></i><b>B.4</b> Enforcement</a></li>
<li class="chapter" data-level="B.5" data-path="conduct.html"><a href="conduct.html#conduct-attribution"><i class="fa fa-check"></i><b>B.5</b> Attribution</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i><b>C</b> Contributing</a><ul>
<li class="chapter" data-level="C.1" data-path="contributing.html"><a href="contributing.html#contributing-style"><i class="fa fa-check"></i><b>C.1</b> Style Guide</a></li>
<li class="chapter" data-level="C.2" data-path="contributing.html"><a href="contributing.html#setting-up"><i class="fa fa-check"></i><b>C.2</b> Setting Up</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>D</b> Glossary</a></li>
<li class="chapter" data-level="E" data-path="objectives.html"><a href="objectives.html"><i class="fa fa-check"></i><b>E</b> Novice R Learning Objectives</a></li>
<li class="chapter" data-level="F" data-path="keypoints.html"><a href="keypoints.html"><i class="fa fa-check"></i><b>F</b> Novice R Key Points</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Merely Useful: Novice R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-reproducibility" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Reproducibility</h1>
<p>There are several key cornerstones for doing rigorous and sound scientific
research, two of which are reproducibility and replicability <span class="citation">(Patil et al., <a href="references.html#ref-Patil2016">2016</a>)</span>. Replicability is
when a study is repeated by other independent research groups. <a href="https://en.wikipedia.org/wiki/Reproducibility">Reproducibility</a>
is when, given the same data and the same analytical/computational steps, a
scientific result can be verified. Both of these concepts are surprisingly
difficult to achieve.</p>
<p>This course is about data analysis, so we’ll be focusing solely on reproducibility
rather than replicability. At present, there is little effort in science for
having research be reproducible, likely due in many ways to a lack of training
and awareness. Being reproducible isn’t just about doing better science, it
can also:</p>
<ol style="list-style-type: decimal">
<li>Make you much more efficient and productive, as you spend less time between
coding and putting your results in the document.</li>
<li>Make you more confident in your results, since what you report and show as
figures or tables will be exactly what you get from your analysis. No copying
and pasting required!</li>
</ol>
<p>There are many aspects to reproducibility, such as:</p>
<ul>
<li>Organized files and folder, preferably based on a standard or conventional structure.</li>
<li>Understandable and readable code that is documented and descriptive.</li>
<li>Results from analyses are identical to results presented in scientific output (e.g. article, poster, slides).</li>
<li>Results from analyses are identical when code is executed on other machines (results aren’t dependent on one computer).</li>
<li>Explicit description or instruction on the order that code and scripts need to be executed.</li>
</ul>
<p>We’ll cover the first three items in this course.</p>
<div id="r-reproducibility-projects" class="section level2">
<h2><span class="header-section-number">6.1</span> Project organization</h2>
<p>First off, what exactly does “project” mean? That depends a bit on the group,
individual, or situation, but for our purposes, a “project” is anything related
to one or more completed scientific “products” (e.g. poster, slides, manuscript,
package, teaching material) related to a specific question or goal. This could
be “one manuscript publication and associated conference presentations” per project.
Confining a project to one “scientific output” facilitates keeping the project reproducible
is kept reproducible, all files will relate to that “output”, and can be easily
archived once the manuscript has been published. However, this definition could
be different depending on your own situation and goals.</p>
<p>The ability to read, understand, modify, and write simple pieces of code is an
essential skill for modern data analysis tasks and projects. Here we introduce
you to some of the best practices one should have while writing their code.
, many of which were taken from published “best practices” articles
<span class="citation">(Noble, <a href="references.html#ref-Nobl2009">2009</a>; Taschuk and Wilson, <a href="references.html#ref-Tasc2017">2017</a>; Wilson et al., <a href="references.html#ref-Wils2017">2017</a>)</span>.</p>
<ul>
<li>Organise all R scripts and files in a single parent directory using a common
and consistent folder and file structure.</li>
<li>Use <a href="https://peerj.com/preprints/3159/">version control</a> to track changes to files.</li>
<li>Make raw data “read-only” (don’t edit it directly) and use code to show what
was done.</li>
<li>Write and describe code for people to read by being descriptive and using a
<a href="https://style.tidyverse.org/">style guide</a>.</li>
<li>Think of code as part of your research product: Write for an audience
or other reader.</li>
<li>Create functions to avoid repetition.</li>
<li>Whenever possible, use code to create output (figures, tables) rather than
manualling creating or editing them.</li>
</ul>
<p>Managing your projects in a reproducible fashion doesn’t just make your science
reproducible, it also makes your life easier! RStudio is here to help us with
that by using <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects">R Projects</a>. RStudio projects make it
straightforward to divide your work into multiple contexts, each with their own
working directory, workspace, history, and source documents.</p>
<p>It is strongly recommended that you store <em>all</em> the necessary files that will be
used in your code in the <strong>same parent directory</strong>. You can then use
relative file paths to access them (we’ll talk about file paths below). This
makes the directory and R Project a “product” or “bundle/package”. Like a tiny
machine, that needs to have all its parts in the same place.</p>
<div id="creating-your-first-project" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Creating your first project</h3>
<p>There are many ways one could organise a project folder. We’ll set up a project
directory folder using the
<a href="http://prodigenr.lukewjohnston.com">prodigenr</a> package:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="co"># prodigenr::setup_project(&quot;ProjectName&quot;)</span></a>
<a class="sourceLine" id="cb102-2" data-line-number="2">prodigenr<span class="op">::</span><span class="kw">setup_project</span>(<span class="st">&quot;learningr&quot;</span>)</a></code></pre></div>
<p>(You can also create a new project in RStudio by using “File -&gt; New Project -&gt;”Scientific Analysis Project using prodigenr&quot;.)</p>
<p>When we use the <code>::</code> colon here, we are telling R “use setup_project function from the prodigenr package”. This function will then create the following
folders and files:</p>
<pre><code>learningr
├── R
│   ├── README.md
│   ├── fetch_data.R
│   └── setup.R
├── data
│   └── README.md
├── doc
│   └── README.md
├── .gitignore
├── DESCRIPTION
├── learningr.Rproj
└── README.md</code></pre>
<p>This forces a specific, and consistent, folder structure to all your work. Think
of this like the “introduction”, “methods”, “results”, and “discussion” sections
of your paper. Each project is then like a single manuscript or report, that
contains everything relevant to that specific project. There is a lot of
power in something as simple as a consistent structure. Projects are used to
make life easier. Once a project is opened within RStudio the following actions
are taken:</p>
<ul>
<li>A new R session (process) is started.</li>
<li>The current working directory is set to the project directory.</li>
<li>RStudio project options are loaded.</li>
</ul>
<p>The README in each folder explains a bit about what should be placed there. But
briefly:</p>
<ol style="list-style-type: decimal">
<li>Documents like manuscripts, abstracts, and exploration type documents should
be put in the <code>doc/</code> directory (including <a href="https://rmarkdown.rstudio.com/">R Markdown</a> files which
we will cover <a href="r-reproducibility.html#r-markdown">later</a>).</li>
<li>Data, raw data, and metadata should be in either the <code>data/</code> directory or
in <code>data-raw/</code> for the raw data.</li>
<li>All R files and code should be in the <code>R/</code> directory.</li>
<li>Name all new files to reflect their content or function. Follow the tidyverse
<a href="https://style.tidyverse.org/files.html">style guide for file naming</a>.</li>
</ol>
<p>Note the <code>DESCRIPTION</code> file. This is used as metadata about the project and is
useful when working on R projects. For any project, it is <strong>highly recommended</strong>
to use <a href="novice-goals.html#version-control">version control</a>. We’ll be covering version control in more detail
<a href="novice-goals.html#version-control">later</a> in the course.</p>
</div>
<div id="exercise-better-file-naming" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Exercise: Better file naming</h3>
<p>Look at the list of file names below. Which file names are good names and which
shouldn’t you use?</p>
<pre><code>fit models.R
fit-models.R
foo.r
stuff.r
get_data.R
Manuscript version 10.docx
manuscript.docx
new version of analysis.R
trying.something.here.R
plotting-regression.R
utility_functions.R
code.R</code></pre>
</div>
<div id="should-you-keep-your-data-under-version-control" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Should you keep your data under version control?</h3>
<p>We have a <code>data/</code> folder for a reason. But you might not want to keep the data
under version control, for several reasons:</p>
<ol style="list-style-type: decimal">
<li>It’s a large dataset (tens or more Mb in file size)</li>
<li>There are sensitive and/or personally-identifying information in the data</li>
</ol>
<p>As a rule of thumb, if you can send the data by an email attachment, you could
probably put it into Git. Unless there is sensitive or personal data, then don’t.
If it isn’t kept under version control, make sure you include a reference to how
or where you got the data, either as an R script showing the code you used to
import/clean/download it or described in the <code>README.md</code> file.</p>
</div>
</div>
<div id="r-reproducibility-reusability" class="section level2">
<h2><span class="header-section-number">6.2</span> Reusability</h2>
<p>Part of reproducibility is also making sure your scripts and file organization is
“reusable” meaning that others (or yourself) can run it again. So, for instance,
making sure to use “relative file paths” compared to “absolute file paths”
(we’ll cover these in a bit). Or indicating which other R packages your code
depends on. So here we’ll cover how to make sure your scripts and project files
are reusable.</p>
<div id="keeping-a-clean-slate" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Keeping a clean slate</h3>
<p>When you finish writing your R code for the day and close the session, you probably
will be asked about saving your session. What this does is everything kept in the
<a href="glossary.html#environment">environment</a> (e.g. all objects, functions, or datasets you created and used
during the session) get saved to an <code>.RData</code> file. Then, the next time you open up
your R session, R will see this <code>.RData</code> file and load everything in that file.
Everything you did previously will be loaded into your environment. This seems like
a good thing… but it’s not. Imagine eating your dinner on a really dirty plate…
that’s not pleasant right? Loading a previous session is like that dirty plate.</p>
<p>So, to make sure you always use a clean slate, we’ll run a handy function from
the <a href="https://usethis.r-lib.org/">usethis</a> package to stop R from saving and loading this <code>.RData</code>
file, ensuring you have a clean working environment. You only need to run this function
once, as it will set the appropriate RStudio settings for you.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_blank_slate</span>()</a></code></pre></div>
<p>We’ll use the usethis package more throughout this chapter and others, as it provides
several very useful functions when working with projects.</p>
</div>
<div id="packages-data-and-file-paths" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Packages, data, and file paths</h3>
<p>A major strength of R is in its ability for others to easily create packages
that simplify doing complex tasks (e.g. creating figures with the
<a href="https://ggplot2.tidyverse.org/">ggplot2</a> package)
and for anyone to easily install and use that package<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.
You load a package by writing:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>Working with multiple R scripts and files, it quickly gets tedious to always
write out each library function at the top of each script. A better way of
managing this is to create a new file, keep all package loading code in that
file, and sourcing that file in each R script. So, to create a new R file
in the <code>R/</code> folder, we’ll use this <code>use_r()</code> function from the usethis package:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_r</span>(<span class="st">&quot;package-loading&quot;</span>)</a></code></pre></div>
<p>This creates a file called <code>package-loading.R</code> in the <code>R/</code> folder. In the
<code>package-loading.R</code> file, add this code to it.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>Then in other R scripts in the <code>R/</code>, include this code at the top the script:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1"><span class="kw">source</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;R/package-loading.R&quot;</span>))</a></code></pre></div>
<p>The <a href="https://here.r-lib.org/">here</a> package uses a function
called <code>here()</code> that makes it easier to manage file paths. What is a file path
and why is this necessary? A file path is the list of folders a file is found
in. For instance, your resume may be found in
<code>/Users/Documents/personal_things/resume.docx</code>. The problem with file paths in R
is that when you run a script interactively (e.g. what we do in class and
normally), the file path is located at the Project level (where the <code>.Rproj</code>
file is found). You can see the file path by looking at the top of the
“Console”.</p>
<p>But! When you <code>source()</code> an R script, it may likely run <em>in the
folder it is saved in</em>, e.g. in the <code>R/</code> folder. So your file path
<code>R/packages-loading.R</code> won’t work because there isn’t a folder called R in the
<code>R/</code> folder. Often people use the function <code>setwd()</code>, but this is <em>never</em> a good
idea since using it makes your script <em>runnable only on your computer</em>… which
makes it no longer reproducible. We use the <code>here()</code> function to tell R to go
to the project root (where the <code>.Rproj</code> file is found) and then use the file
path from that point. This simple function can make your work more reproducible
and easier for you to use later on.</p>
<p>We also use the <code>here()</code> function when we import a dataset or save a dataset.
So, let’s load in the NYC Dog License dataset. First, save the CSV in the
<code>data/</code> folder. Then create a new R file:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1">usethis<span class="op">::</span><span class="kw">use_r</span>(<span class="st">&quot;load-data&quot;</span>)</a></code></pre></div>
<p>And write these lines in the file:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="kw">source</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;R/package-loading.R&quot;</span>))</a>
<a class="sourceLine" id="cb111-2" data-line-number="2">dog_license &lt;-<span class="st"> </span><span class="kw">read_csv</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;data/nyc-dog-licenses.csv.gz&quot;</span>))</a>
<a class="sourceLine" id="cb111-3" data-line-number="3"><span class="kw">head</span>(dog_license)</a></code></pre></div>
<p>That is how we will load data in from now on.</p>
<p>Here are a few other tips for keeping your code reusable:</p>
<ul>
<li>When encountering a difficult problem, try
to find R packages or functions that do your problem for you<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.</li>
<li>Split up your analyses steps into individual files (e.g. “model” file, “plot”
file). Then <code>source</code> those files as needed or save the output in <code>data/</code> to use
it in other files.</li>
<li>Try not to have R scripts be too long (e.g. more than 500 lines of code). Keep
script sizes as small as necessary and as specific as possible (have a single
purpose). A script should have an end goal.</li>
</ul>
</div>
</div>
<div id="r-reproducibility-readability" class="section level2">
<h2><span class="header-section-number">6.3</span> Readability</h2>
<p>There are two reasons we write code: to instruct the computer to do something and
to record the steps we took to get a particular result for us or others to
understand. For computers, <em>how</em> or <em>what</em> you write doesn’t matter, as long as
the code is correct. Computers don’t need to <em>understand</em> the code. But humans
do need to understand it. We need clear language and explicit meaning in order
to understand what is going on. Humans write code, humans read code, and humans
must maintain it and fix any errors. So, what you write and how you write it
is extremely important.</p>
<p>Like natural human languages, R has a relaxed approached to how R code is written.
This has some nice advantages, but also some major disadvantages, notably that
writing styles can be quite different across the world or even within one’s own
code. So, it’s important to stick to some guidelines, for instance, as laid out
by the tidyverse <a href="https://style.tidyverse.org/">style guide</a>. Some other tips include:</p>
<ul>
<li>Write your code assuming other people will be reading it.</li>
<li>Stick to a <em><a href="https://style.tidyverse.org/">style guide</a></em>. (We’re repeating this because it’s
really important!)</li>
<li>Use full and descriptive words when typing and creating objects.</li>
<li>Use white space to separate concepts (empty lines between them, use spaces,
and/or tabs).</li>
<li>Use RStudio R Script Sections (<code>&quot;Code-&gt;Insert Section&quot;</code> or <code>Ctrl-Shift-R</code>) to
separate content in scripts.</li>
</ul>
<p>Even though R doesn’t care about naming, spacing, and indenting, it really
matters how your code looks. Coding is just like writing. Even though you may go
through a brainstorming note-taking stage of writing, you eventually need to
write correctly so others can understand, <em>and read</em>, what you are trying to
say. Brainstorming and exploratory work is fine, but eventually you need to
write code that will be legible. That’s why using a <a href="https://style.tidyverse.org/">style guide</a>
is really important.</p>
<div id="exercise-make-the-code-more-readable" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Exercise: Make the code more readable</h3>
<p>Using the <a href="https://style.tidyverse.org/">style guide</a> found in the link, try to make these code
more readable. Edit the code so it follows the correct style and so it is easier to
understand and read. You don’t need to understand what the code does, just
follow the guide.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1"><span class="co"># Object names</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2">DayOne</a>
<a class="sourceLine" id="cb112-3" data-line-number="3">dayone</a>
<a class="sourceLine" id="cb112-4" data-line-number="4">T &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb112-5" data-line-number="5">c &lt;-<span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb112-6" data-line-number="6">mean &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">sum</span>(x)</a>
<a class="sourceLine" id="cb112-7" data-line-number="7"></a>
<a class="sourceLine" id="cb112-8" data-line-number="8"><span class="co"># Spacing</span></a>
<a class="sourceLine" id="cb112-9" data-line-number="9">x[,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb112-10" data-line-number="10">x[ ,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb112-11" data-line-number="11">x[ , <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb112-12" data-line-number="12"><span class="kw">mean</span> (x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb112-13" data-line-number="13"><span class="kw">mean</span>( x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span> )</a>
<a class="sourceLine" id="cb112-14" data-line-number="14"><span class="cf">function</span> (x) {}</a>
<a class="sourceLine" id="cb112-15" data-line-number="15"><span class="cf">function</span>(x){}</a>
<a class="sourceLine" id="cb112-16" data-line-number="16">height&lt;-feet<span class="op">*</span><span class="dv">12</span><span class="op">+</span>inches</a>
<a class="sourceLine" id="cb112-17" data-line-number="17"><span class="kw">mean</span>(x, <span class="dt">na.rm=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb112-18" data-line-number="18"><span class="kw">sqrt</span>(x <span class="op">^</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>y <span class="op">^</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb112-19" data-line-number="19">df <span class="op">$</span><span class="st"> </span>z</a>
<a class="sourceLine" id="cb112-20" data-line-number="20">x &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">:</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb112-21" data-line-number="21"></a>
<a class="sourceLine" id="cb112-22" data-line-number="22"><span class="co"># Indenting</span></a>
<a class="sourceLine" id="cb112-23" data-line-number="23"><span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug)</a>
<a class="sourceLine" id="cb112-24" data-line-number="24"><span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)</a></code></pre></div>
<p>FIXME: The below “details” will need to be dealt with since PDF doesn’t allow this
FIXME: Maybe move to a solutions section at the end of chapter?</p>
<details>
<summary><strong>Click for a possible solution</strong></summary>
<p>
<p>The old code is in comments and the better code is below it.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1"><span class="co"># Object names</span></a>
<a class="sourceLine" id="cb113-2" data-line-number="2"></a>
<a class="sourceLine" id="cb113-3" data-line-number="3"><span class="co"># Should be camel case</span></a>
<a class="sourceLine" id="cb113-4" data-line-number="4"><span class="co"># DayOne</span></a>
<a class="sourceLine" id="cb113-5" data-line-number="5">day_one</a>
<a class="sourceLine" id="cb113-6" data-line-number="6"><span class="co"># dayone</span></a>
<a class="sourceLine" id="cb113-7" data-line-number="7">day_one</a>
<a class="sourceLine" id="cb113-8" data-line-number="8"></a>
<a class="sourceLine" id="cb113-9" data-line-number="9"><span class="co"># Should not over write existing function names</span></a>
<a class="sourceLine" id="cb113-10" data-line-number="10"><span class="co"># T = TRUE, so don&#39;t name anything T</span></a>
<a class="sourceLine" id="cb113-11" data-line-number="11"><span class="co"># T &lt;- FALSE</span></a>
<a class="sourceLine" id="cb113-12" data-line-number="12">false &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb113-13" data-line-number="13"><span class="co"># c is a function name already. Plus c is not descriptive</span></a>
<a class="sourceLine" id="cb113-14" data-line-number="14"><span class="co"># c &lt;- 9</span></a>
<a class="sourceLine" id="cb113-15" data-line-number="15">number_value &lt;-<span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb113-16" data-line-number="16"><span class="co"># mean is a function, plus does not describe the function which is sum</span></a>
<a class="sourceLine" id="cb113-17" data-line-number="17"><span class="co"># mean &lt;- function(x) sum(x)</span></a>
<a class="sourceLine" id="cb113-18" data-line-number="18">sum_vector &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">sum</span>(x)</a>
<a class="sourceLine" id="cb113-19" data-line-number="19"></a>
<a class="sourceLine" id="cb113-20" data-line-number="20"><span class="co"># Spacing</span></a>
<a class="sourceLine" id="cb113-21" data-line-number="21"><span class="co"># Commas should be in correct place</span></a>
<a class="sourceLine" id="cb113-22" data-line-number="22"><span class="co"># x[,1]</span></a>
<a class="sourceLine" id="cb113-23" data-line-number="23"><span class="co"># x[ ,1]</span></a>
<a class="sourceLine" id="cb113-24" data-line-number="24"><span class="co"># x[ , 1]</span></a>
<a class="sourceLine" id="cb113-25" data-line-number="25">x[, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb113-26" data-line-number="26"><span class="co"># Spaces should be in correct place</span></a>
<a class="sourceLine" id="cb113-27" data-line-number="27"><span class="co"># mean (x, na.rm = TRUE)</span></a>
<a class="sourceLine" id="cb113-28" data-line-number="28"><span class="co"># mean( x, na.rm = TRUE )</span></a>
<a class="sourceLine" id="cb113-29" data-line-number="29"><span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb113-30" data-line-number="30"><span class="co"># function (x) {}</span></a>
<a class="sourceLine" id="cb113-31" data-line-number="31"><span class="co"># function(x){}</span></a>
<a class="sourceLine" id="cb113-32" data-line-number="32"><span class="cf">function</span>(x) {}</a>
<a class="sourceLine" id="cb113-33" data-line-number="33"><span class="co"># height&lt;-feet*12+inches</span></a>
<a class="sourceLine" id="cb113-34" data-line-number="34">height &lt;-<span class="st"> </span>feet <span class="op">*</span><span class="st"> </span><span class="dv">12</span> <span class="op">+</span><span class="st"> </span>inches</a>
<a class="sourceLine" id="cb113-35" data-line-number="35"><span class="co"># mean(x, na.rm=10)</span></a>
<a class="sourceLine" id="cb113-36" data-line-number="36"><span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb113-37" data-line-number="37"><span class="co"># sqrt(x ^ 2 + y ^ 2)</span></a>
<a class="sourceLine" id="cb113-38" data-line-number="38"><span class="kw">sqrt</span>(x<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>y<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb113-39" data-line-number="39"><span class="co"># df $ z</span></a>
<a class="sourceLine" id="cb113-40" data-line-number="40">df<span class="op">$</span>z</a>
<a class="sourceLine" id="cb113-41" data-line-number="41"><span class="co"># x &lt;- 1 : 10</span></a>
<a class="sourceLine" id="cb113-42" data-line-number="42">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb113-43" data-line-number="43"></a>
<a class="sourceLine" id="cb113-44" data-line-number="44"><span class="co"># Indenting should be done after if, for, else functions</span></a>
<a class="sourceLine" id="cb113-45" data-line-number="45"><span class="co"># if (y &lt; 0 &amp;&amp; debug)</span></a>
<a class="sourceLine" id="cb113-46" data-line-number="46"><span class="co"># message(&quot;Y is negative&quot;)</span></a>
<a class="sourceLine" id="cb113-47" data-line-number="47"><span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug)</a>
<a class="sourceLine" id="cb113-48" data-line-number="48">    <span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)</a></code></pre></div>
</p>
</details>
</div>
<div id="automatic-styling-with-styler" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Automatic styling with styler</h3>
<p>You may have organised the exercise by hand, but it’s possible to do it
automatically. The tidyverse <a href="https://style.tidyverse.org/">style guide</a> has been implemented
into the <a href="http://styler.r-lib.org/">styler</a> package to automate the process of following the
guide by directly re-styling selected code. The styler snippets can be found in
the Addins function in the RStudio “Addins” menu after you have installed it.</p>
<p>RStudio also has its own automatic styling ability, through the menu item <code>&quot;Code -&gt; Reformat Code&quot;</code> (or <code>Ctrl-Shift-A</code>). Try both methods of styling on the exercise
code above. There are slight differences in how each method works and they both
aren’t always perfect. For now, let’s stick with using the styler package. The
styler functions work on R code within both <code>.R</code> script files as well as R code
within <code>.Rmd</code> documents, which we will cover later in this lesson.</p>
<p>There are several styler RStudio addins, but we’ll focus on the two:</p>
<ul>
<li><code>&quot;Style selection&quot;</code>: Highlight text and click this button to reformat the code.</li>
<li><code>&quot;Style active file&quot;</code>: Code in the <code>.R</code> or <code>.Rmd</code> file you have open and
visible in RStudio will be reformatted when you click this button.</li>
</ul>
<p>There are two other styler functions that are also useful:</p>
<ul>
<li><code>styler::style_file(&quot;path/to/filename&quot;)</code>: Styles the whole file as indicated by the
file path in the first argument. Can be either an <code>.R</code> or <code>.Rmd</code> file.</li>
<li><code>styler::style_dir(&quot;directoryname&quot;)</code>: Styles all files in the indicated directory
in the first argument.</li>
</ul>
<p>Let’s try the <code>styler::style_file()</code> function out. Inside a file called
<code>non-styled-code.R</code>, it has:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="co"># Spacing</span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2">x[,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb114-3" data-line-number="3"><span class="kw">mean</span> (x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb114-4" data-line-number="4"><span class="cf">function</span> (x) {}</a>
<a class="sourceLine" id="cb114-5" data-line-number="5">height&lt;-feet<span class="op">*</span><span class="dv">12</span><span class="op">+</span>inches</a>
<a class="sourceLine" id="cb114-6" data-line-number="6"><span class="kw">sqrt</span>(x <span class="op">^</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>y <span class="op">^</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb114-7" data-line-number="7">df <span class="op">$</span><span class="st"> </span>z</a>
<a class="sourceLine" id="cb114-8" data-line-number="8">x &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">:</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb114-9" data-line-number="9"></a>
<a class="sourceLine" id="cb114-10" data-line-number="10"><span class="co"># Indenting</span></a>
<a class="sourceLine" id="cb114-11" data-line-number="11"><span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug)</a>
<a class="sourceLine" id="cb114-12" data-line-number="12"><span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)</a></code></pre></div>
<p>Then we run:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1">styler<span class="op">::</span><span class="kw">style_file</span>(<span class="st">&quot;testing-styler.R&quot;</span>)</a></code></pre></div>
<pre><code>Styling  1  files:
 testing-styler.R ℹ
────────────────────────────────────────
Status  Count   Legend
✔   0   File unchanged.
ℹ   1   File changed.
✖   0   Styling threw an error.
────────────────────────────────────────
Please review the changes carefully!</code></pre>
<p>Which changes the file to be styled!</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb117-1" data-line-number="1"><span class="co"># Spacing</span></a>
<a class="sourceLine" id="cb117-2" data-line-number="2">x[, <span class="dv">1</span>]</a>
<a class="sourceLine" id="cb117-3" data-line-number="3"><span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb117-4" data-line-number="4"><span class="cf">function</span>(x) {}</a>
<a class="sourceLine" id="cb117-5" data-line-number="5">height &lt;-<span class="st"> </span>feet <span class="op">*</span><span class="st"> </span><span class="dv">12</span> <span class="op">+</span><span class="st"> </span>inches</a>
<a class="sourceLine" id="cb117-6" data-line-number="6"><span class="kw">sqrt</span>(x<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>y<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb117-7" data-line-number="7">df<span class="op">$</span><span class="st"> </span>z</a>
<a class="sourceLine" id="cb117-8" data-line-number="8">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb117-9" data-line-number="9"></a>
<a class="sourceLine" id="cb117-10" data-line-number="10"><span class="co"># Indenting</span></a>
<a class="sourceLine" id="cb117-11" data-line-number="11"><span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug) {</a>
<a class="sourceLine" id="cb117-12" data-line-number="12">  <span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)</a>
<a class="sourceLine" id="cb117-13" data-line-number="13">}</a></code></pre></div>
<p>This is more or less everything that the styler package does.</p>
</div>
<div id="exercise-use-styler-to-fix-code-formatting" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Exercise: Use styler to fix code formatting</h3>
<p>Use the styler package function on the code from the previous exercise by either
running <code>styler::style_file()</code> or with the <code>&quot;Style selection&quot;</code> addin when
highlighting the code.</p>
</div>
</div>
<div id="r-reproducibility-markdown" class="section level2">
<h2><span class="header-section-number">6.4</span> Integrating text, code, and results</h2>
<p>The most obvious demonstration of reproducibility is when the results obtained
from executing the analysis code (by an independent entity) are indentical to
the results presented in the scientific output such as in an article. When there
is agreement between these two, reproducibility has been more or less acheived.
In R, there are tools available to <em>completely</em> ensure that this happens by
directly inserting the results from the code <em>into the scientific ouput</em>. This is
done by using <a href="https://rmarkdown.rstudio.com/">R Markdown</a>, which interweaves R code with text.
So instead of, for example, manually inserting a figure, you write R code within
the document to insert the figure for you! Using <a href="https://rmarkdown.rstudio.com/">R Markdown</a> can
save so much time and get your work that much closer to being reproducible.</p>
<p>There are many other advantages to using R Markdown. From the single R Markdown
format you can use it to create manuscripts, posters, slides, websites, books,
and many more from simply using R Markdown. In fact, this book was written using
R Markdown. As a bonus, switching between citation formats or Word templates for
different journals is easier than doing it with Word.</p>
<div id="markdown" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Markdown</h3>
<p>R Markdown uses, well, <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> as the format to convert to multiple
document types. Fun fact: This website is built based on Markdown! While there
are many “flavours” of Markdown that have been developed over the years, R
Markdown uses the <a href="https://pandoc.org/MANUAL.html#pandocs-markdown">Pandoc</a> version. Pandoc is a combination of
pan which is Latin for “all” and doc which means document.</p>
<p>Markdown is a “markup language” meaning that special characters mean certain
things, which we will cover below.</p>
<p>To format text, such as to bold or make a list, you use the special characters.
You write Markdown as plain text (like R code), so you don’t need any special
software (like you do with Word documents). Most features needed for writing a
scientific document are available in Markdown, but not all. <em>Tip</em>: Try to fit
your writing and document creation around what Markdown can acheive, rather
than force or fight Markdown to do something it wasn’t designed to do.</p>
<p>All right, let’s create and save an R Markdown file. In RStudio, go to <code>File -&gt; New File -&gt; R Markdown</code>. A dialog box will pop up. In the “Title” section,
type in <code>Reproducible documents</code> and in the “Author” section type in your name.
Choose the HTML output format. Save this file as <code>learning-rmarkdown.Rmd</code> in the
<code>doc/</code> folder.</p>
<p>Inside the file, there is a bunch of text that shows some basic formatting you
can use for writing Markdown. For now, delete everything <em>except</em> the top part
of the file (the part surrounded by <code>---</code>). This part is called the YAML header,
which we will cover more a bit later. Try converting the file to HTML by hitting
the “Knit” button at the top or by typing out <code>Ctrl-Shift-K</code>.</p>
<div class="figure">
<img src="figures/r-reproducibility/knit-button-rstudio.png" alt="“Knit” button." />
<p class="caption">“Knit” button.</p>
</div>
<div id="headers" class="section level4">
<h4><span class="header-section-number">6.4.1.1</span> Headers</h4>
<p>Creating headers (like chapters or sections) is indicated by using one or more <code>#</code>
at the beginning of a line, prefixing some text:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb118-1" data-line-number="1"><span class="fu"># Header level 1</span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2"></a>
<a class="sourceLine" id="cb118-3" data-line-number="3">Paragraph.</a>
<a class="sourceLine" id="cb118-4" data-line-number="4"></a>
<a class="sourceLine" id="cb118-5" data-line-number="5"><span class="fu">## Header level 2</span></a>
<a class="sourceLine" id="cb118-6" data-line-number="6"></a>
<a class="sourceLine" id="cb118-7" data-line-number="7">Paragraph.</a>
<a class="sourceLine" id="cb118-8" data-line-number="8"></a>
<a class="sourceLine" id="cb118-9" data-line-number="9"><span class="fu">### Header level 3</span></a>
<a class="sourceLine" id="cb118-10" data-line-number="10"></a>
<a class="sourceLine" id="cb118-11" data-line-number="11">Paragraph.</a></code></pre></div>
<p>This creates the section headers as seen directly above (“Headers”) or below
(“Text formatting”). The header text <em>must</em> be on one line, otherwise the next
line is interpreted as paragraph text.</p>
<p>See how it looks by “Knitting” the document (“Knit” button or <code>Ctrl-Shift-K</code>).</p>
</div>
<div id="text-formatting" class="section level4">
<h4><span class="header-section-number">6.4.1.2</span> Text formatting</h4>
<p>To format text individually, surround the text with the special characters, as
shown here:</p>
<ul>
<li><code>**bold**</code> gives <strong>bold</strong>.</li>
<li><code>*italics*</code> gives <em>italics</em>.</li>
<li><code>super^script^</code> gives super<sup>script</sup>.</li>
<li><code>sub~script~</code> gives sub<sub>script</sub>.</li>
</ul>
<p>What if you want to use the special character as simple text? Prefix it with an <code>\</code>,
so <code>\*</code> becomes *, <code>\^</code> becomes ^, and <code>\~</code> becomes ~.</p>
</div>
<div id="lists" class="section level4">
<h4><span class="header-section-number">6.4.1.3</span> Lists</h4>
<p>To create an unnumbered list, do:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb119-1" data-line-number="1"></a>
<a class="sourceLine" id="cb119-2" data-line-number="2">- <span class="fl">item 1</span></a>
<a class="sourceLine" id="cb119-3" data-line-number="3"><span class="fl">- item 2</span></a>
<a class="sourceLine" id="cb119-4" data-line-number="4"><span class="fl">- item 3</span></a></code></pre></div>
<p>which gives…</p>
<ul>
<li>item 1</li>
<li>item 2</li>
<li>item 3</li>
</ul>
<p>Notice the empty lines above and below the line, those are important. To create
a numbered list, do:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb120-1" data-line-number="1"></a>
<a class="sourceLine" id="cb120-2" data-line-number="2">1. <span class="fl">item 1</span></a>
<a class="sourceLine" id="cb120-3" data-line-number="3"><span class="fl">2. item 2</span></a>
<a class="sourceLine" id="cb120-4" data-line-number="4"><span class="fl">3. item 3</span></a></code></pre></div>
<p>which gives…</p>
<ol style="list-style-type: decimal">
<li>item 1</li>
<li>item 2</li>
<li>item 3</li>
</ol>
<p>See how it looks by “Knitting” the document (“Knit” button or <code>Ctrl-Shift-K</code>).</p>
</div>
<div id="blockquotes" class="section level4">
<h4><span class="header-section-number">6.4.1.4</span> Blockquotes</h4>
<p>Sometimes (probably not too commonly), you may need to quote someone by using
“blockquotes”. To do that, do:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb121-1" data-line-number="1">&gt;<span class="dt"> Blockquote</span></a></code></pre></div>
<p>which gives…</p>
<blockquote>
<p>Blockquote</p>
</blockquote>
<p>Blockquotes can be as many lines as you want. To stop a paragraph from being in
the blockquote, separate the text with an empty line:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb122-1" data-line-number="1">&gt;<span class="dt"> Bockquote paragraph</span></a>
<a class="sourceLine" id="cb122-2" data-line-number="2"></a>
<a class="sourceLine" id="cb122-3" data-line-number="3">Regular paragraph</a></code></pre></div>
</div>
<div id="adding-footnotes" class="section level4">
<h4><span class="header-section-number">6.4.1.5</span> Adding footnotes</h4>
<p>Footnotes can be added by using <code>[^some-text-label]</code>, such as:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb123-1" data-line-number="1">Footnote<span class="ot">[^1]</span></a>
<a class="sourceLine" id="cb123-2" data-line-number="2"></a>
<a class="sourceLine" id="cb123-3" data-line-number="3"><span class="ot">[^1]</span>: Footnote content.</a></code></pre></div>
<p>which gives…</p>
<p>Footnote<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>So you can write some text, add some footnotes within, and include the footnote
content right below the paragraph:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb124-1" data-line-number="1">Paragraph text<span class="ot">[^1]</span>, with some more text<span class="ot">[^reference]</span>.</a>
<a class="sourceLine" id="cb124-2" data-line-number="2"></a>
<a class="sourceLine" id="cb124-3" data-line-number="3"><span class="ot">[^1]</span>: This is the first footnote.</a>
<a class="sourceLine" id="cb124-4" data-line-number="4"><span class="ot">[^reference]</span>: This is the next footnote.</a>
<a class="sourceLine" id="cb124-5" data-line-number="5"></a>
<a class="sourceLine" id="cb124-6" data-line-number="6">More paragraphs.</a></code></pre></div>
<p>Notice the empty lines in between. The footnote should also be on one line, though
it isn’t strictly necessary. See how it looks by “Knitting” the document (“Knit”
button or <code>Ctrl-Shift-K</code>).</p>
</div>
<div id="inserting-pictures-images-or-figures" class="section level4">
<h4><span class="header-section-number">6.4.1.6</span> Inserting pictures, images, or figures</h4>
<p>You can include externally created (i.e. not by an R code chunk, discussed later
on) png, jpeg, or pdf image file by adding (:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="al">![Image caption here.](path/to/image/file.png)</span></a></code></pre></div>
<p>So something like this:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="al">![Steps to being more reproducible. Source DOI: 10.1038/d41586-018-05990-5](figures/r-reproducibility/code-sharing-steps.png)</span></a></code></pre></div>
<p>which gives…</p>
<div class="figure">
<img src="figures/r-reproducibility/code-sharing-steps.png" alt="Steps to being more reproducible. Source DOI: 10.1038/d41586-018-05990-5" />
<p class="caption">Steps to being more reproducible. Source DOI: <a href="https://doi.org/10.1038/d41586-018-05990-5">10.1038/d41586-018-05990-5</a></p>
</div>
<p><em>Tip</em>: Can also include links to images from the Internet, as a URL link.</p>
<p>If you want to modify the width or sizing, append something like <code>{width=##%}</code> to
the end of the image insertion:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb127-1" data-line-number="1"><span class="al">![Caption.](figures/r-reproducibility/code-sharing-steps.png)</span>{width=50%}</a></code></pre></div>
<p>which gives…</p>
<div class="figure">
<img src="figures/r-reproducibility/code-sharing-steps.png" alt="Caption." style="width:50.0%" />
<p class="caption">Caption.</p>
</div>
</div>
<div id="adding-links-to-websites" class="section level4">
<h4><span class="header-section-number">6.4.1.7</span> Adding links to websites</h4>
<p>And a link can be linked in the following format:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb128-1" data-line-number="1"><span class="ot">[Link to GitHub](https://github.com)</span>.</a></code></pre></div>
<p>gives…</p>
<p><a href="https://github.com">Link to GitHub</a>.</p>
<p>The above form is great for one time use, but what if you want to use the same link
again later on? Use this form then:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb129-1" data-line-number="1">Use multiple [links] in your document. The same [links] can be used again.</a>
<a class="sourceLine" id="cb129-2" data-line-number="2"></a>
<a class="sourceLine" id="cb129-3" data-line-number="3"><span class="ot">[links]: https://github.com</span></a></code></pre></div>
<p>which gives…</p>
<p>Use multiple <a href="https://github.com">links</a> in your document. The same <a href="https://github.com">links</a> can be used again.</p>
</div>
<div id="inserting-simple-tables" class="section level4">
<h4><span class="header-section-number">6.4.1.8</span> Inserting (simple) tables</h4>
<p>You can insert tables with Markdown too. We wouldn’t recommend doing it for
complicated tables though, as it can get tedious fast! (A recommended approach
for more complex or bigger tables is to make the table contents as a data frame
in R first and then use the <code>knitr::kable()</code> function to create the table, as
we’ll cover in the R Markdown section below). You can even include Markdown
text formatting inside the table:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb130-1" data-line-number="1">|   | Fun | Serious |</a>
<a class="sourceLine" id="cb130-2" data-line-number="2">|:--|--:|:--:|</a>
<a class="sourceLine" id="cb130-3" data-line-number="3">| **Happy** | 1234 | 5678 |</a>
<a class="sourceLine" id="cb130-4" data-line-number="4">| **Sad** | 123 | 456 |</a></code></pre></div>
<p>which gives…</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">Fun</th>
<th align="center">Serious</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Happy</strong></td>
<td align="right">1234</td>
<td align="center">5678</td>
</tr>
<tr class="even">
<td align="left"><strong>Sad</strong></td>
<td align="right">123</td>
<td align="center">456</td>
</tr>
</tbody>
</table>
<p>The <code>|--:|</code> or <code>|:--|</code> tell the table to right-align or left-align,
respectively, the values in the table column. Center-align is <code>|:--:|</code>.
See how it looks by “Knitting” the document (“Knit” button or <code>Ctrl-Shift-K</code>).</p>
</div>
<div id="exercise-try-to-re-create-a-document-using-markdown" class="section level4">
<h4><span class="header-section-number">6.4.1.9</span> Exercise: Try to re-create a document using Markdown</h4>
<ol style="list-style-type: decimal">
<li>Open <a href="https://htmlpreview.github.io/?https://github.com/merely-useful/merely-useful.github.io/blob/book/includes/r-reproducibility/exercise.html">this link</a>.
This is a HTML file that has been created by using
Markdown formatting.</li>
<li>Create a new R Markdown file, with output type “HTML”, and save it as
<code>mimic-html-file.Rmd</code>.</li>
<li>Delete all the automatically added text except the top part Inside the R Markdown file</li>
<li>Write text using Markdown formatting so that you
can create a <code>html_document</code> that looks exactly like the linked file.</li>
<li>Knit the R Markdown document. Confirm that your version looks the same as the above version.</li>
</ol>
</div>
</div>
<div id="r-markdown" class="section level3">
<h3><span class="header-section-number">6.4.2</span> R Markdown</h3>
<p><a href="https://rmarkdown.rstudio.com/">R Markdown</a> is an extension of Markdown that weaves together R code
with Markdown formatted text all together in a single document. Output from the
R code gets inserted directly into the document for a seamless integration of
document writing and analysis reporting.</p>
<div id="yaml-headermetadata" class="section level4">
<h4><span class="header-section-number">6.4.2.1</span> YAML header/metadata</h4>
<p>Most Markdown documents (especially for R Markdown) include <a href="https://bookdown.org/yihui/rmarkdown/html-document.html">YAML</a> metadata at
the top of the document, surrounded by <code>---</code>. YAML is a data format, like CSV,
that contains the metadata and various options that R Markdown uses for the
entire document. Data in YAML is stored in the form <code>variable: value</code>. For
instance, <code>title</code> or <code>author</code> is paired with their respective “values” and then
used by Markdown when creating the document. Other options are also included
here, such as what the converted output document should be, such as Word. There
are many more output formats to choose from (e.g. slides, websites, books). The
YAML header looks something like this:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="ot">---</span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2"><span class="fu">title:</span><span class="at"> </span><span class="st">&quot;Document title&quot;</span></a>
<a class="sourceLine" id="cb131-3" data-line-number="3"><span class="fu">author:</span><span class="at"> Your Name</span></a>
<a class="sourceLine" id="cb131-4" data-line-number="4"><span class="fu">output:</span><span class="at"> html_document</span></a>
<a class="sourceLine" id="cb131-5" data-line-number="5"><span class="ot">---</span></a></code></pre></div>
<p>Here, there are three variable-value pairings: <code>title</code>, <code>author</code>, and <code>output</code>.
In the <code>output</code> variable, the R Markdown function <code>html_document</code> is given so that
the output document format is converted to HTML. There are also <code>word_document</code>
and <code>pdf_document</code> settings. For now, we’ll focus on the <code>html_document</code> output.
Usually when you create the R Markdown file, this YAML header gets added
automatically. There are additional options you can set in the output field,
which we will cover later on.</p>
</div>
<div id="using-r-code-chunks" class="section level4">
<h4><span class="header-section-number">6.4.2.2</span> Using R code chunks</h4>
<p>R Markdown’s primary function is to allow combining text and R code in the same
document, which is incredibly powerful and useful! All R code chunks have the
appearance:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb132-1" data-line-number="1">```{r chunk-label-name, chunk.option=&quot;...&quot;, chunk.option=...}</a>
<a class="sourceLine" id="cb132-2" data-line-number="2">...R code...</a>
<a class="sourceLine" id="cb132-3" data-line-number="3">```</a></code></pre></div>
<p>Notice that chunk options need to be on the same line (one single line). Any
R code in the code chunk gets evaluated and any output gets inserted into the
document. So if the code prints to the console, it will get inserted into the
document.</p>
<p>The <code>r</code> tells R Markdown to run R on the code chunk, while the <a href="https://yihui.name/knitr/options/#chunk-options">chunk label</a>
differentiates the chunk from other chunks. Using a chunk label also helps navigate
a document when you use RStudio’s “Document outline” (<code>Code -&gt; Show Document Outline</code>).
It also does a few other things.</p>
<p><strong>Note</strong>: Standard practice is that code <a href="https://yihui.name/knitr/options/#chunk-options">chunk labels</a> should be
named without <code>_</code>, spaces, or <code>.</code> and instead should be one word or be separated
by <code>-</code>.</p>
<p>Let’s load in some packages and data:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb133-1" data-line-number="1">```{r setup}</a>
<a class="sourceLine" id="cb133-2" data-line-number="2">library(tidyverse)</a>
<a class="sourceLine" id="cb133-3" data-line-number="3">co2_data &lt;- read_csv(here::here(&quot;data/co2.csv&quot;)) %&gt;%</a>
<a class="sourceLine" id="cb133-4" data-line-number="4">  filter(co2_standard &gt; 0)</a>
<a class="sourceLine" id="cb133-5" data-line-number="5">```</a></code></pre></div>
<p>When running your code chunks interactively as you develop and write your document,
R Markdown will look for a code chunk labeled <code>setup</code> to run first (for
instance, to load all packages used in a document). Hence we name this chunk “setup”.</p>
</div>
<div id="inserting-figures" class="section level4">
<h4><span class="header-section-number">6.4.2.3</span> Inserting figures</h4>
<p>One of the most obvious benefits to using R Markdown is to automatically insert
a plot. To do that we do:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb134-1" data-line-number="1">```{r co2-time-plot}</a>
<a class="sourceLine" id="cb134-2" data-line-number="2">ggplot(co2_data, aes(x = year, y = co2_standard)) +</a>
<a class="sourceLine" id="cb134-3" data-line-number="3"><span class="bn">    geom_point()</span></a>
<a class="sourceLine" id="cb134-4" data-line-number="4">```</a></code></pre></div>
<p><img src="r_files/figure-html/co2-time-plot-1.png" /><!-- --></p>
<p>What if we want to include the plot but not the code? Easy! Set the chunk option
<code>echo</code> to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb135-1" data-line-number="1">```{r co2-time-plot, echo=FALSE}</a>
<a class="sourceLine" id="cb135-2" data-line-number="2">ggplot(co2_data, aes(x = year, y = co2_standard)) +</a>
<a class="sourceLine" id="cb135-3" data-line-number="3"><span class="bn">    geom_point()</span></a>
<a class="sourceLine" id="cb135-4" data-line-number="4">```</a></code></pre></div>
<p>Or what if you don’t want R to run the code chunk, but still show the code? Set
the chunk option <code>eval</code> (for evaluate) to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb136-1" data-line-number="1">```{r co2-time-plot, eval=FALSE}</a>
<a class="sourceLine" id="cb136-2" data-line-number="2">ggplot(co2_data, aes(x = year, y = co2_standard)) +</a>
<a class="sourceLine" id="cb136-3" data-line-number="3"><span class="bn">    geom_point()</span></a>
<a class="sourceLine" id="cb136-4" data-line-number="4">```</a></code></pre></div>
<p>Since we have a figure, we can change some width, height, and alignment options,
as well as add a caption with the <code>fig.width</code>, <code>fig.height</code>, <code>fig.align</code>, and <code>fig.cap</code>
(respectively):</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb137-1" data-line-number="1">```{r co2-time-plot, fig.cap=&quot;Add your figure title here.&quot;, fig.height=4, fig.width=7}</a>
<a class="sourceLine" id="cb137-2" data-line-number="2">ggplot(co2_data, aes(x = year, y = co2_standard)) +</a>
<a class="sourceLine" id="cb137-3" data-line-number="3"><span class="bn">    geom_point()</span></a>
<a class="sourceLine" id="cb137-4" data-line-number="4">```</a></code></pre></div>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="kw">ggplot</span>(co2_data, <span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> co2_standard)) <span class="op">+</span></a>
<a class="sourceLine" id="cb138-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>()</a></code></pre></div>
<div class="figure"><span id="fig:co2-time-plot-1"></span>
<img src="r_files/figure-html/co2-time-plot-1-1.png" alt="Add your figure title here."  />
<p class="caption">
Figure 6.1: Add your figure title here.
</p>
</div>
<p>What if we want to first run some code before running the plot, but don’t want to
include the output of the other code? Make sure that the output doesn’t “print”.
So letting R evaluate both dataframe and plot, the code chunk will output and
insert both into the knitted document.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb139-1" data-line-number="1">```{r co2-time-plot-after-2000-1, fig.cap=&quot;Add your figure title here.&quot;, fig.height=4, fig.width=7}</a>
<a class="sourceLine" id="cb139-2" data-line-number="2">co2_after_2000 &lt;- co2_data %&gt;%</a>
<a class="sourceLine" id="cb139-3" data-line-number="3"><span class="bn">    filter(year &gt;= 2000)</span></a>
<a class="sourceLine" id="cb139-4" data-line-number="4"></a>
<a class="sourceLine" id="cb139-5" data-line-number="5"><span class="fu"># Print dataframe</span></a>
<a class="sourceLine" id="cb139-6" data-line-number="6">co2_after_2000</a>
<a class="sourceLine" id="cb139-7" data-line-number="7"></a>
<a class="sourceLine" id="cb139-8" data-line-number="8"><span class="fu"># Print plot</span></a>
<a class="sourceLine" id="cb139-9" data-line-number="9">ggplot(co2_after_2000, aes(x = year, y = co2_standard)) +</a>
<a class="sourceLine" id="cb139-10" data-line-number="10"><span class="bn">    geom_point()</span></a>
<a class="sourceLine" id="cb139-11" data-line-number="11">```</a></code></pre></div>
<pre><code>## # A tibble: 680 x 5
##     year month date_numeric co2_standard station               
##    &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;                 
##  1  2000     1        2000.         369. Mauna Loa, Hawaii, USA
##  2  2000     2        2000.         369. Mauna Loa, Hawaii, USA
##  3  2000     3        2000.         371. Mauna Loa, Hawaii, USA
##  4  2000     4        2000.         372. Mauna Loa, Hawaii, USA
##  5  2000     5        2000.         372. Mauna Loa, Hawaii, USA
##  6  2000     6        2000.         372. Mauna Loa, Hawaii, USA
##  7  2000     7        2001.         370. Mauna Loa, Hawaii, USA
##  8  2000     8        2001.         368. Mauna Loa, Hawaii, USA
##  9  2000     9        2001.         367. Mauna Loa, Hawaii, USA
## 10  2000    10        2001.         367. Mauna Loa, Hawaii, USA
## # … with 670 more rows</code></pre>
<div class="figure"><span id="fig:co2-time-plot-after-2000-1"></span>
<img src="r_files/figure-html/co2-time-plot-after-2000-1-1.png" alt="Add your figure title here."  />
<p class="caption">
Figure 6.2: Add your figure title here.
</p>
</div>
<p>Compare to this next code chunk, which will only output (“print”) the plot. See
how we don’t include code that would send anything to the console to be
“printed”? Only things that get “printed” will be included in the R Markdown output
document. Also notice how we renamed the chunk label? In R Markdown you can’t
have duplicate code chunk labels.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb141-1" data-line-number="1">```{r co2-time-plot-after-2000-2, fig.cap=&quot;Add your figure title here.&quot;, fig.height=4, fig.width=7}</a>
<a class="sourceLine" id="cb141-2" data-line-number="2">co2_after_2000 &lt;- co2_data %&gt;%</a>
<a class="sourceLine" id="cb141-3" data-line-number="3"><span class="bn">    filter(year &gt;= 2000)</span></a>
<a class="sourceLine" id="cb141-4" data-line-number="4"></a>
<a class="sourceLine" id="cb141-5" data-line-number="5"><span class="fu"># Print plot</span></a>
<a class="sourceLine" id="cb141-6" data-line-number="6">ggplot(co2_after_2000, aes(x = year, y = co2_standard)) +</a>
<a class="sourceLine" id="cb141-7" data-line-number="7"><span class="bn">    geom_point()</span></a>
<a class="sourceLine" id="cb141-8" data-line-number="8">```</a></code></pre></div>
<div class="figure"><span id="fig:co2-time-plot-after-2000-2"></span>
<img src="r_files/figure-html/co2-time-plot-after-2000-2-1.png" alt="Add your figure title here."  />
<p class="caption">
Figure 6.3: Add your figure title here.
</p>
</div>
</div>
<div id="exercise-add-some-figures-to-a-r-markdown-document" class="section level4">
<h4><span class="header-section-number">6.4.2.4</span> Exercise: Add some figures to a R Markdown document</h4>
<ol style="list-style-type: decimal">
<li>Create a new R Markdown file (“File -&gt; New File -&gt; R Markdown”), providing
the title, author name (your name), and setting the output to HTML.</li>
<li>Save the file as <code>using-rmarkdown.Rmd</code> in the <code>doc/</code> folder.</li>
<li>Delete all text <em>except</em> the YAML header.</li>
<li>Create an R code chunk and call the label “setup”. Write code so the packages
and data are loaded.</li>
<li>Create another code chunk and call it “plot-licenses-by-year”. Write R code
to create a point plot (<code>geom_point()</code>) of the year on the <code>x</code> axis and number
of licenses on the <code>y</code> axis.</li>
<li>Knit the document and see what the output looks like.</li>
<li>Change the theme of the plot to another builtin theme (<em>hint</em>: themes start
with <code>theme_</code>).</li>
</ol>
</div>
<div id="using-r-code-chunks-to-insert-tables" class="section level4">
<h4><span class="header-section-number">6.4.2.5</span> Using R code chunks to insert tables</h4>
<p>You can also create tables by using the <code>kable()</code> function from the knitr package.
Let’s create a table of the mean CO<sub>2</sub> concentration over the years at each
monthly period for each station.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb142-1" data-line-number="1">```{r mean-co2-table}</a>
<a class="sourceLine" id="cb142-2" data-line-number="2">co2_data %&gt;%</a>
<a class="sourceLine" id="cb142-3" data-line-number="3"><span class="bn">    select(station, month, co2_standard) %&gt;%</span></a>
<a class="sourceLine" id="cb142-4" data-line-number="4"><span class="bn">    group_by(station, month) %&gt;%</span></a>
<a class="sourceLine" id="cb142-5" data-line-number="5"><span class="bn">    summarise(MeanCO2 = round(mean(co2_standard, na.rm = TRUE), 2)) %&gt;%</span></a>
<a class="sourceLine" id="cb142-6" data-line-number="6"><span class="bn">    spread(station, MeanCO2) %&gt;%</span></a>
<a class="sourceLine" id="cb142-7" data-line-number="7"><span class="bn">    knitr::kable(caption = &quot;Table caption here.&quot;)</span></a>
<a class="sourceLine" id="cb142-8" data-line-number="8">```</a></code></pre></div>
<table>
<caption><span id="tab:mean-co2-table">Table 6.1: </span>Table caption here.</caption>
<thead>
<tr class="header">
<th align="right">month</th>
<th align="right">Alert Station, NWT, Canada</th>
<th align="right">Cape Grim, Tasmania, Australia</th>
<th align="right">Mauna Loa, Hawaii, USA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">378.54</td>
<td align="right">364.63</td>
<td align="right">354.61</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">380.06</td>
<td align="right">364.65</td>
<td align="right">355.96</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">380.75</td>
<td align="right">364.73</td>
<td align="right">356.11</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">381.07</td>
<td align="right">364.89</td>
<td align="right">357.47</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">380.36</td>
<td align="right">363.34</td>
<td align="right">356.57</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">378.43</td>
<td align="right">363.70</td>
<td align="right">356.64</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">371.33</td>
<td align="right">364.16</td>
<td align="right">354.50</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">365.98</td>
<td align="right">364.60</td>
<td align="right">352.51</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">365.11</td>
<td align="right">364.85</td>
<td align="right">350.85</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">369.21</td>
<td align="right">364.90</td>
<td align="right">351.49</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="right">374.77</td>
<td align="right">364.80</td>
<td align="right">352.24</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">376.94</td>
<td align="right">364.68</td>
<td align="right">353.53</td>
</tr>
</tbody>
</table>
</div>
<div id="inline-r-code" class="section level4">
<h4><span class="header-section-number">6.4.2.6</span> Inline R code</h4>
<p>Often you might have results inside the text you are writing. Here you can
include R code within the text so that the results are inserted directly
into the document. It looks like:</p>
<blockquote>
<p>The mean of CO<sub>2</sub> is `r round(mean(co2_data$co2_standard, na.rm = TRUE), 2)`.</p>
</blockquote>
<p>Which gives…</p>
<blockquote>
<p>The mean of CO<sub>2</sub> is <code>round(mean(co2_data$co2_standard, na.rm = TRUE), 2)</code>.</p>
</blockquote>
<p>Keep in mind that inline R code can <em>only</em> insert a single number or character
value, nothing more.</p>
</div>
<div id="citing-literature-with-r-markdown" class="section level4">
<h4><span class="header-section-number">6.4.2.7</span> Citing literature with R Markdown</h4>
<p>No scientific writing is complete without being able to include references. If
you want to insert a citation, use the Markdown key <code>[@Cone2016]</code>, which will
look like <span class="citation">(Conery, <a href="references.html#ref-Cone2016">2016</a>)</span>. The text <code>Cone2016</code> is the key that the bibliography
manager uses to identify a specific reference. Adding more references is done
by separating by a <code>;</code>, so like <code>[@AuthorYear; @Author2Year; @Author3Year]</code>. The
resulting citation reference will be inserted at the bottom of the document. To
get the bibliography to work, you’ll also need to add a line to the YAML header
like this:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb143-1" data-line-number="1"><span class="ot">---</span></a>
<a class="sourceLine" id="cb143-2" data-line-number="2"><span class="fu">title:</span><span class="at"> </span><span class="st">&quot;My report&quot;</span></a>
<a class="sourceLine" id="cb143-3" data-line-number="3"><span class="fu">author:</span><span class="at"> </span><span class="st">&quot;Me!&quot;</span></a>
<a class="sourceLine" id="cb143-4" data-line-number="4"><span class="fu">bibliography:</span><span class="at"> my_references.bib</span></a>
<a class="sourceLine" id="cb143-5" data-line-number="5"><span class="ot">---</span></a></code></pre></div>
<p>The <code>my_references.bib</code> is a <code>.bib</code> file found in the same folder as the <code>.Rmd</code>
file. So in our case, the <code>.bib</code> file is in the <code>doc/</code> folder. You can also use
other bibliography manager files, such as EndNote.
See <a href="https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html#specifying_a_bibliography">this documentation</a>
for which bibliography managers can be used.</p>
<p>Since all references are appended to the bottom of the document, it’s good to
add a final “Reference” section header to the end of your file, like so:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="fu"># References</span></a></code></pre></div>
</div>
<div id="making-your-report-prettier" class="section level4">
<h4><span class="header-section-number">6.4.2.8</span> Making your report prettier</h4>
<p>This part mostly applies to HTML-based and PDF<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> outputs, since
programmatically modifying or setting templates in Word documents is rather
difficult<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>. Changing broad features of a document can be done by
setting the “theme” of the document. Add an option in the YAML metadata like:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb145-1" data-line-number="1"><span class="ot">---</span></a>
<a class="sourceLine" id="cb145-2" data-line-number="2"><span class="fu">title:</span><span class="at"> </span><span class="st">&quot;My report&quot;</span></a>
<a class="sourceLine" id="cb145-3" data-line-number="3"><span class="fu">output:</span></a>
<a class="sourceLine" id="cb145-4" data-line-number="4">    <span class="fu">html_document:</span></a>
<a class="sourceLine" id="cb145-5" data-line-number="5">        <span class="fu">theme:</span><span class="at"> sandstone</span></a>
<a class="sourceLine" id="cb145-6" data-line-number="6"><span class="ot">---</span></a></code></pre></div>
<p>Check out the R Markdown <a href="FIXME">documentation</a> for more types of
themes you can use for HTML documents, and advanced topics such as parameterized
R Markdown documents. Most of the <a href="https://bootswatch.com/3/">Bootswatch</a> themes are available
for use in R Markdown to HTML conversion.</p>
<p>Want to add a Table of Contents? Easy! Add <code>toc: true</code> to the YAML header:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="ot">---</span></a>
<a class="sourceLine" id="cb146-2" data-line-number="2"><span class="fu">title:</span><span class="at"> </span><span class="st">&quot;My report&quot;</span></a>
<a class="sourceLine" id="cb146-3" data-line-number="3"><span class="fu">output:</span></a>
<a class="sourceLine" id="cb146-4" data-line-number="4">    <span class="fu">html_document:</span></a>
<a class="sourceLine" id="cb146-5" data-line-number="5">        <span class="fu">theme:</span><span class="at"> sandstone</span></a>
<a class="sourceLine" id="cb146-6" data-line-number="6">        <span class="fu">toc:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb146-7" data-line-number="7"><span class="ot">---</span></a></code></pre></div>
<p>Adding a <code>toc</code> only works for PDF and HTML, but <em>not</em> Word documents.</p>
</div>
<div id="exercise-add-a-summary-table-inline-results-and-a-prettier-theme" class="section level4">
<h4><span class="header-section-number">6.4.2.9</span> Exercise: Add a summary table, inline results, and a prettier theme</h4>
<ol style="list-style-type: decimal">
<li>Use the R Markdown file from the previous exercise (<code>using-rmarkdown.Rmd</code>).</li>
<li>Create three new header 1 <code>#</code> sections: Objective, Results, Conclusion.</li>
<li>Write in the “Objective” section an idea you have about the Dog License dataset.
It can be as simple as “How many dogs are there in New Year City?”. Include an
<em>italics</em> in this sentence.</li>
<li>Create three new code chunks in the “Results” section: One for <code>setup</code>, one
for <code>plot-dogs</code>, and one for <code>table-dogs</code>.</li>
<li>Write R code to load the packages and data in the <code>setup</code> chunk. Knit the document
to see what it looks like.</li>
<li>Write R code to create a simple ggplot2 plot in the <code>plot-dogs</code> chunk related
to your “Objective”. Knit the document to see what it looks like.</li>
<li>Write R code to create a simple summary table using <code>kable()</code> in the
<code>table-dogs</code> chunk related to your “Objective”. Knit the document to see what it
looks like.</li>
<li>Write an observation you made about the data from the plot and table in the
“Conclusions” section. Include a <strong>bold</strong> text in this section.</li>
<li>Check out the <a href="https://bootswatch.com/3/">Bootswatch</a> themes and change your HTML theme to
something else and add a Table of Contents.</li>
</ol>
</div>
</div>
</div>
<div id="r-reproducibility-keypoints" class="section level2">
<h2><span class="header-section-number">6.5</span> Key Points</h2>
<ul>
<li>A structured and standard project folder and file layout
is the first step to having a reproducible data analysis project.</li>
<li>Writing documents in R Markdown can reduce the time spent on manual tasks
since results can be easily re-generated and inserted into the final document to improve reproducibility.</li>
<li><code>usethis</code> has several helper functions for managing data analysis projects.</li>
<li>Following a style guide and emphasizing readable code can lead to better quality code
and to code that is more likely to be reproducible and reusable.</li>
<li>Using Markdown to write documents is a great way to improve accessibility (since it is plain text only)
and allows you to generate multiple types of output (HTML, PDF, slides, etc) from a single document source.</li>
</ul>
</div>
<div id="r-reproducibility-resources" class="section level2">
<h2><span class="header-section-number">6.6</span> Additional learning resources and material</h2>
<p><strong>For learning</strong>:</p>
<ul>
<li>Use <a href="https://bookdown.org/yihui/rmarkdown/language-engines.html">other programming languages</a>
in an R Markdown document.</li>
<li><a href="https://bookdown.org/yihui/rmarkdown/">Online book for R Markdown</a></li>
<li><a href="https://r4ds.had.co.nz/r-markdown.html#r-markdown">R Markdown chapter</a> in the
<a href="http://r4ds.had.co.nz/">R for Data Science</a> book.</li>
</ul>
<p><strong>For help</strong>:</p>
<ul>
<li><a href="https://www.rstudio.com/resources/cheatsheets/">RStudio helpful cheatsheets</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf">R Markdown cheatsheet</a> (downloads a pdf file)</li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">R Markdown reference cheatsheet</a></li>
</ul>
<p>Note: Source material for this chapter was modified from
<a href="https://rqawr-course.lwjohnst.com/" class="uri">https://rqawr-course.lwjohnst.com/</a>, as well as many other resources (see
<a href="https://rqawr-course.lwjohnst.com/license/" class="uri">https://rqawr-course.lwjohnst.com/license/</a>).</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>You may encounter some who say you shouldn’t rely on packages and
to only use base R functions. However, this is seriously bad advice since the
ecosystem of R packages can greatly simplify your life doing data analysis.
Plus, packages greatly expand and enhance the capability of R, so make use of
packages! If someone invents a wheel, why wouldn’t you use it?<a href="r-reproducibility.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>You may hear some people say “oh, don’t bother with R
packages, do everything in base R”… don’t listen to them. Do you build a
computer from scratch everytime you want to do any type of work? Or a car when
you want to drive somewhere? No, you don’t. Make use of other people’s hard work
to make tools that simplify your life.<a href="r-reproducibility.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>Footnote content.<a href="r-reproducibility.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>Knitting to PDF requires LaTeX, which you can install from <a href="https://yihui.name/tinytex/">tinytex</a>.
After you install LaTeX you can create truly beautifully typeset PDF documents.<a href="r-reproducibility.html#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>If you really want to do it, the best way is to create your
template in the <code>.odt</code>, and then convert to <code>.docx</code>.<a href="r-reproducibility.html#fnref5" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="practice.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r-data-manipulation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/merely-useful/merely-useful.github.io/edit/master/r-reproducibility.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["r.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
